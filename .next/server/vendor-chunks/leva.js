"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/leva";
exports.ids = ["vendor-chunks/leva"];
exports.modules = {

/***/ "(ssr)/./node_modules/leva/dist/leva.esm.js":
/*!********************************************!*\
  !*** ./node_modules/leva/dist/leva.esm.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Leva: () => (/* binding */ Leva),\n/* harmony export */   LevaInputs: () => (/* reexport safe */ _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a2),\n/* harmony export */   LevaPanel: () => (/* binding */ LevaPanel),\n/* harmony export */   LevaStoreProvider: () => (/* reexport safe */ _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a7),\n/* harmony export */   button: () => (/* binding */ button),\n/* harmony export */   buttonGroup: () => (/* binding */ buttonGroup),\n/* harmony export */   folder: () => (/* binding */ folder),\n/* harmony export */   levaStore: () => (/* binding */ levaStore),\n/* harmony export */   monitor: () => (/* binding */ monitor),\n/* harmony export */   useControls: () => (/* binding */ useControls),\n/* harmony export */   useCreateStore: () => (/* binding */ useCreateStore),\n/* harmony export */   useStoreContext: () => (/* reexport safe */ _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.E)\n/* harmony export */ });\n/* harmony import */ var _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vector-plugin-6f82aee9.esm.js */ \"(ssr)/./node_modules/leva/dist/vector-plugin-6f82aee9.esm.js\");\n/* harmony import */ var v8n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! v8n */ \"(ssr)/./node_modules/v8n/dist/v8n.esm.js\");\n/* harmony import */ var colord__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! colord */ \"(ssr)/./node_modules/colord/index.mjs\");\n/* harmony import */ var colord_plugins_names__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! colord/plugins/names */ \"(ssr)/./node_modules/colord/plugins/names.mjs\");\n/* harmony import */ var dequal_lite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dequal/lite */ \"(ssr)/./node_modules/dequal/lite/index.mjs\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react_colorful__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-colorful */ \"(ssr)/./node_modules/react-colorful/dist/index.mjs\");\n/* harmony import */ var zustand_shallow__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zustand/shallow */ \"(ssr)/./node_modules/leva/node_modules/zustand/esm/shallow.js\");\n/* harmony import */ var react_dropzone__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-dropzone */ \"(ssr)/./node_modules/react-dropzone/dist/es/index.js\");\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zustand */ \"(ssr)/./node_modules/leva/node_modules/zustand/esm/index.js\");\n/* harmony import */ var zustand_middleware__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! zustand/middleware */ \"(ssr)/./node_modules/leva/node_modules/zustand/esm/middleware.js\");\n/* harmony import */ var merge_value__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! merge-value */ \"(ssr)/./node_modules/merge-value/index.js\");\n/* harmony import */ var merge_value__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(merge_value__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst join = (...args) => args.filter(Boolean).join('.');\nfunction getKeyPath(path) {\n  const dir = path.split('.');\n  return [dir.pop(), dir.join('.') || undefined];\n}\n\nfunction getValuesForPaths(data, paths) {\n  return Object.entries((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.p)(data, paths)).reduce(\n\n  (acc, [, {\n    value,\n    disabled,\n    key\n  }]) => {\n    acc[key] = disabled ? undefined : value;\n    return acc;\n  }, {});\n}\n\nfunction useCompareMemoize(value, deep) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)();\n  const compare = deep ? dequal_lite__WEBPACK_IMPORTED_MODULE_2__.dequal : zustand_shallow__WEBPACK_IMPORTED_MODULE_6__[\"default\"];\n  if (!compare(value, ref.current)) {\n    ref.current = value;\n  }\n  return ref.current;\n}\n\nfunction useDeepMemo(fn, deps) {\n  return (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(fn, useCompareMemoize(deps, true));\n}\n\nfunction useToggle(toggled) {\n  const wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const contentRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const firstRender = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(true);\n\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useLayoutEffect)(() => {\n    if (!toggled) {\n      wrapperRef.current.style.height = '0px';\n      wrapperRef.current.style.overflow = 'hidden';\n    }\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    if (firstRender.current) {\n      firstRender.current = false;\n      return;\n    }\n    let timeout;\n    const ref = wrapperRef.current;\n    const fixHeight = () => {\n      if (toggled) {\n        ref.style.removeProperty('height');\n        ref.style.removeProperty('overflow');\n        contentRef.current.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest'\n        });\n      }\n    };\n    ref.addEventListener('transitionend', fixHeight, {\n      once: true\n    });\n    const {\n      height\n    } = contentRef.current.getBoundingClientRect();\n    ref.style.height = height + 'px';\n    if (!toggled) {\n      ref.style.overflow = 'hidden';\n      timeout = window.setTimeout(() => ref.style.height = '0px', 50);\n    }\n    return () => {\n      ref.removeEventListener('transitionend', fixHeight);\n      clearTimeout(timeout);\n    };\n  }, [toggled]);\n  return {\n    wrapperRef,\n    contentRef\n  };\n}\n\nconst useVisiblePaths = store => {\n  const [paths, setPaths] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(store.getVisiblePaths());\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    setPaths(store.getVisiblePaths());\n    const unsub = store.useStore.subscribe(store.getVisiblePaths, setPaths, {\n      equalityFn: zustand_shallow__WEBPACK_IMPORTED_MODULE_6__[\"default\"]\n    });\n    return () => unsub();\n  }, [store]);\n  return paths;\n};\n\nfunction useValuesForPath(store, paths, initialData) {\n  const valuesForPath = store.useStore(s => {\n    const data = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, initialData), s.data);\n    return getValuesForPaths(data, paths);\n  }, zustand_shallow__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n  return valuesForPath;\n}\n\nfunction usePopin(margin = 3) {\n  const popinRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const [shown, setShow] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n  const show = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(() => setShow(true), []);\n  const hide = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(() => setShow(false), []);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useLayoutEffect)(() => {\n    if (shown) {\n      const {\n        bottom,\n        top,\n        left\n      } = popinRef.current.getBoundingClientRect();\n      const {\n        height\n      } = wrapperRef.current.getBoundingClientRect();\n      const direction = bottom + height > window.innerHeight - 40 ? 'up' : 'down';\n      wrapperRef.current.style.position = 'fixed';\n      wrapperRef.current.style.zIndex = '10000';\n      wrapperRef.current.style.left = left + 'px';\n      if (direction === 'down') wrapperRef.current.style.top = bottom + margin + 'px';else wrapperRef.current.style.bottom = window.innerHeight - top + margin + 'px';\n    }\n  }, [margin, shown]);\n  return {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  };\n}\n\n(0,colord__WEBPACK_IMPORTED_MODULE_7__.extend)([colord_plugins_names__WEBPACK_IMPORTED_MODULE_8__[\"default\"]]);\nconst convertMap = {\n  rgb: 'toRgb',\n  hsl: 'toHsl',\n  hsv: 'toHsv',\n  hex: 'toHex'\n};\nv8n__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  color: () => value => (0,colord__WEBPACK_IMPORTED_MODULE_7__.colord)(value).isValid()\n});\nconst schema$2 = o => (0,v8n__WEBPACK_IMPORTED_MODULE_1__[\"default\"])().color().test(o);\nfunction convert(color, {\n  format,\n  hasAlpha,\n  isString\n}) {\n  const convertFn = convertMap[format] + (isString && format !== 'hex' ? 'String' : '');\n  const result = color[convertFn]();\n  return typeof result === 'object' && !hasAlpha ? (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.o)(result, ['a']) : result;\n}\nconst sanitize$2 = (v, settings) => {\n  const color = (0,colord__WEBPACK_IMPORTED_MODULE_7__.colord)(v);\n  if (!color.isValid()) throw Error('Invalid color');\n  return convert(color, settings);\n};\nconst format$1 = (v, settings) => {\n  return convert((0,colord__WEBPACK_IMPORTED_MODULE_7__.colord)(v), (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, settings), {}, {\n    isString: true,\n    format: 'hex'\n  }));\n};\nconst normalize$3 = ({\n  value\n}) => {\n  const _f = (0,colord__WEBPACK_IMPORTED_MODULE_7__.getFormat)(value);\n  const format = _f === 'name' ? 'hex' : _f;\n  const hasAlpha = typeof value === 'object' ? 'a' in value : _f === 'hex' && value.length === 8 || /^(rgba)|(hsla)|(hsva)/.test(value);\n  const settings = {\n    format,\n    hasAlpha,\n    isString: typeof value === 'string'\n  };\n\n  return {\n    value: sanitize$2(value, settings),\n    settings\n  };\n};\n\nvar props$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema$2,\n  sanitize: sanitize$2,\n  format: format$1,\n  normalize: normalize$3\n});\n\nconst ColorPreview = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  position: 'relative',\n  boxSizing: 'border-box',\n  borderRadius: '$sm',\n  overflow: 'hidden',\n  cursor: 'pointer',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  backgroundColor: '#fff',\n  backgroundImage: `url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill-opacity=\".05\"><path d=\"M8 0h8v8H8zM0 8h8v8H0z\"/></svg>')`,\n  $inputStyle: '',\n  $hover: '',\n  zIndex: 1,\n  variants: {\n    active: {\n      true: {\n        $inputStyle: '$accent1'\n      }\n    }\n  },\n  '&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n    backgroundColor: 'currentColor',\n    zIndex: 1\n  }\n});\nconst PickerContainer = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '$sizes$rowHeight auto',\n  columnGap: '$colGap',\n  alignItems: 'center'\n});\nconst PickerWrapper = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  width: '$colorPickerWidth',\n  height: '$colorPickerHeight',\n  '.react-colorful': {\n    width: '100%',\n    height: '100%',\n    boxShadow: '$level2',\n    cursor: 'crosshair'\n  },\n  '.react-colorful__saturation': {\n    borderRadius: '$sm $sm 0 0'\n  },\n  '.react-colorful__alpha, .react-colorful__hue': {\n    height: 10\n  },\n  '.react-colorful__last-control': {\n    borderRadius: '0 0 $sm $sm'\n  },\n  '.react-colorful__pointer': {\n    height: 12,\n    width: 12\n  }\n});\n\nfunction convertToRgb(value, format) {\n  return format !== 'rgb' ? (0,colord__WEBPACK_IMPORTED_MODULE_7__.colord)(value).toRgb() : value;\n}\nfunction Color({\n  value,\n  displayValue,\n  settings,\n  onUpdate\n}) {\n  const {\n    emitOnEditStart,\n    emitOnEditEnd\n  } = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.u)();\n  const {\n    format,\n    hasAlpha\n  } = settings;\n  const {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  } = usePopin();\n\n  const timer = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(0);\n\n  const [initialRgb, setInitialRgb] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(() => convertToRgb(value, format));\n  const ColorPicker = hasAlpha ? react_colorful__WEBPACK_IMPORTED_MODULE_9__.RgbaColorPicker : react_colorful__WEBPACK_IMPORTED_MODULE_9__.RgbColorPicker;\n  const showPicker = () => {\n    setInitialRgb(convertToRgb(value, format));\n    show();\n    emitOnEditStart();\n  };\n  const hidePicker = () => {\n    hide();\n    emitOnEditEnd();\n    window.clearTimeout(timer.current);\n  };\n  const hideAfterDelay = () => {\n    timer.current = window.setTimeout(hidePicker, 500);\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    return () => window.clearTimeout(timer.current);\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement((react__WEBPACK_IMPORTED_MODULE_4___default().Fragment), null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(ColorPreview, {\n    ref: popinRef,\n    active: shown,\n    onClick: () => showPicker(),\n    style: {\n      color: displayValue\n    }\n  }), shown && react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.P, null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.O, {\n    onPointerUp: hidePicker\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(PickerWrapper, {\n    ref: wrapperRef,\n    onMouseEnter: () => window.clearTimeout(timer.current),\n    onMouseLeave: e => e.buttons === 0 && hideAfterDelay()\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(ColorPicker, {\n    color: initialRgb,\n    onChange: onUpdate\n  }))));\n}\nfunction ColorComponent() {\n  const {\n    value,\n    displayValue,\n    label,\n    onChange,\n    onUpdate,\n    settings\n  } = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.u)();\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.R, {\n    input: true\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.L, null, label), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(PickerContainer, null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Color, {\n    value: value,\n    displayValue: displayValue,\n    onChange: onChange,\n    onUpdate: onUpdate,\n    settings: settings\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.V, {\n    value: displayValue,\n    onChange: onChange,\n    onUpdate: onUpdate\n  })));\n}\n\nvar color = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.c)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({\n  component: ColorComponent\n}, props$2));\n\nfunction Vector3dComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.u)();\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.R, {\n    input: true\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.L, null, label), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  }));\n}\n\nvar vector3d = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.c)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({\n  component: Vector3dComponent\n}, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.g)(['x', 'y', 'z'])));\n\nconst JoystickTrigger = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  $flexCenter: '',\n  position: 'relative',\n  backgroundColor: '$elevation3',\n  borderRadius: '$sm',\n  cursor: 'pointer',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  touchAction: 'none',\n  $draggable: '',\n  $hover: '',\n  '&:active': {\n    cursor: 'none'\n  },\n  '&::after': {\n    content: '\"\"',\n    backgroundColor: '$accent2',\n    height: 4,\n    width: 4,\n    borderRadius: 2\n  }\n});\nconst JoystickPlayground = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  $flexCenter: '',\n  width: '$joystickWidth',\n  height: '$joystickHeight',\n  borderRadius: '$sm',\n  boxShadow: '$level2',\n  position: 'fixed',\n  zIndex: 10000,\n  overflow: 'hidden',\n  $draggable: '',\n  transform: 'translate(-50%, -50%)',\n  variants: {\n    isOutOfBounds: {\n      true: {\n        backgroundColor: '$elevation1'\n      },\n      false: {\n        backgroundColor: '$elevation3'\n      }\n    }\n  },\n  '> div': {\n    position: 'absolute',\n    $flexCenter: '',\n    borderStyle: 'solid',\n    borderWidth: 1,\n    borderColor: '$highlight1',\n    backgroundColor: '$elevation3',\n    width: '80%',\n    height: '80%',\n    '&::after,&::before': {\n      content: '\"\"',\n      position: 'absolute',\n      zindex: 10,\n      backgroundColor: '$highlight1'\n    },\n    '&::before': {\n      width: '100%',\n      height: 1\n    },\n    '&::after': {\n      height: '100%',\n      width: 1\n    }\n  },\n  '> span': {\n    position: 'relative',\n    zindex: 100,\n    width: 10,\n    height: 10,\n    backgroundColor: '$accent2',\n    borderRadius: '50%'\n  }\n});\n\nfunction Joystick({\n  value,\n  settings,\n  onUpdate\n}) {\n  const timeout = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)();\n  const outOfBoundsX = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(0);\n  const outOfBoundsY = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(0);\n  const stepMultiplier = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(1);\n  const [joystickShown, setShowJoystick] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n  const [isOutOfBounds, setIsOutOfBounds] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n  const [spanRef, set] = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.b)();\n  const joystickeRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const playgroundRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useLayoutEffect)(() => {\n    if (joystickShown) {\n      const {\n        top,\n        left,\n        width,\n        height\n      } = joystickeRef.current.getBoundingClientRect();\n      playgroundRef.current.style.left = left + width / 2 + 'px';\n      playgroundRef.current.style.top = top + height / 2 + 'px';\n    }\n  }, [joystickShown]);\n  const {\n    keys: [v1, v2],\n    joystick\n  } = settings;\n  const yFactor = joystick === 'invertY' ? 1 : -1;\n  const {\n    [v1]: {\n      step: stepV1\n    },\n    [v2]: {\n      step: stepV2\n    }\n  } = settings;\n  const wpx = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)('sizes', 'joystickWidth');\n  const hpx = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)('sizes', 'joystickHeight');\n  const w = parseFloat(wpx) * 0.8 / 2;\n  const h = parseFloat(hpx) * 0.8 / 2;\n  const startOutOfBounds = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(() => {\n    if (timeout.current) return;\n    setIsOutOfBounds(true);\n    if (outOfBoundsX.current) set({\n      x: outOfBoundsX.current * w\n    });\n    if (outOfBoundsY.current) set({\n      y: outOfBoundsY.current * -h\n    });\n    timeout.current = window.setInterval(() => {\n      onUpdate(v => {\n        const incX = stepV1 * outOfBoundsX.current * stepMultiplier.current;\n        const incY = yFactor * stepV2 * outOfBoundsY.current * stepMultiplier.current;\n        return Array.isArray(v) ? {\n          [v1]: v[0] + incX,\n          [v2]: v[1] + incY\n        } : {\n          [v1]: v[v1] + incX,\n          [v2]: v[v2] + incY\n        };\n      });\n    }, 16);\n  }, [w, h, onUpdate, set, stepV1, stepV2, v1, v2, yFactor]);\n  const endOutOfBounds = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(() => {\n    window.clearTimeout(timeout.current);\n    timeout.current = undefined;\n    setIsOutOfBounds(false);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    function setStepMultiplier(event) {\n      stepMultiplier.current = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.m)(event);\n    }\n    window.addEventListener('keydown', setStepMultiplier);\n    window.addEventListener('keyup', setStepMultiplier);\n    return () => {\n      window.clearTimeout(timeout.current);\n      window.removeEventListener('keydown', setStepMultiplier);\n      window.removeEventListener('keyup', setStepMultiplier);\n    };\n  }, []);\n  const bind = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.e)(({\n    first,\n    active,\n    delta: [dx, dy],\n    movement: [mx, my]\n  }) => {\n    if (first) setShowJoystick(true);\n    const _x = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.h)(mx, -w, w);\n    const _y = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.h)(my, -h, h);\n    outOfBoundsX.current = Math.abs(mx) > Math.abs(_x) ? Math.sign(mx - _x) : 0;\n    outOfBoundsY.current = Math.abs(my) > Math.abs(_y) ? Math.sign(_y - my) : 0;\n\n    let newX = value[v1];\n    let newY = value[v2];\n    if (active) {\n      if (!outOfBoundsX.current) {\n        newX += dx * stepV1 * stepMultiplier.current;\n        set({\n          x: _x\n        });\n      }\n      if (!outOfBoundsY.current) {\n        newY -= yFactor * dy * stepV2 * stepMultiplier.current;\n        set({\n          y: _y\n        });\n      }\n      if (outOfBoundsX.current || outOfBoundsY.current) startOutOfBounds();else endOutOfBounds();\n      onUpdate({\n        [v1]: newX,\n        [v2]: newY\n      });\n    } else {\n      setShowJoystick(false);\n      outOfBoundsX.current = 0;\n      outOfBoundsY.current = 0;\n      set({\n        x: 0,\n        y: 0\n      });\n      endOutOfBounds();\n    }\n  });\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(JoystickTrigger, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.f)({\n    ref: joystickeRef\n  }, bind()), joystickShown && react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.P, null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(JoystickPlayground, {\n    ref: playgroundRef,\n    isOutOfBounds: isOutOfBounds\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"span\", {\n    ref: spanRef\n  }))));\n}\n\nconst Container$1 = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  variants: {\n    withJoystick: {\n      true: {\n        gridTemplateColumns: '$sizes$rowHeight auto'\n      },\n      false: {\n        gridTemplateColumns: 'auto'\n      }\n    }\n  }\n});\nfunction Vector2dComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.u)();\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.R, {\n    input: true\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.L, null, label), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Container$1, {\n    withJoystick: !!settings.joystick\n  }, settings.joystick && react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Joystick, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  })));\n}\n\nconst _excluded$7 = [\"joystick\"];\nconst plugin = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.g)(['x', 'y']);\nconst normalize$2 = _ref => {\n  let {\n      joystick = true\n    } = _ref,\n    input = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(_ref, _excluded$7);\n  const {\n    value,\n    settings\n  } = plugin.normalize(input);\n  return {\n    value,\n    settings: (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, settings), {}, {\n      joystick\n    })\n  };\n};\nvar vector2d = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.c)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({\n  component: Vector2dComponent\n}, plugin), {}, {\n  normalize: normalize$2\n}));\n\nconst sanitize$1 = v => {\n  if (v === undefined) return undefined;\n  if (v instanceof File) {\n    try {\n      return URL.createObjectURL(v);\n    } catch (e) {\n      return undefined;\n    }\n  }\n  if (typeof v === 'string' && v.indexOf('blob:') === 0) return v;\n  throw Error(`Invalid image format [undefined | blob |Â File].`);\n};\nconst schema$1 = (_o, s) => typeof s === 'object' && 'image' in s;\nconst normalize$1 = ({\n  image\n}) => {\n  return {\n    value: image\n  };\n};\n\nvar props$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  sanitize: sanitize$1,\n  schema: schema$1,\n  normalize: normalize$1\n});\n\nconst ImageContainer = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '$sizes$rowHeight auto 20px',\n  columnGap: '$colGap',\n  alignItems: 'center'\n});\nconst DropZone = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  $flexCenter: '',\n  overflow: 'hidden',\n  height: '$rowHeight',\n  background: '$elevation3',\n  textAlign: 'center',\n  color: 'inherit',\n  borderRadius: '$sm',\n  outline: 'none',\n  userSelect: 'none',\n  cursor: 'pointer',\n  $inputStyle: '',\n  $hover: '',\n  $focusWithin: '',\n  $active: '$accent1 $elevation1',\n  variants: {\n    isDragAccept: {\n      true: {\n        $inputStyle: '$accent1',\n        backgroundColor: '$elevation1'\n      }\n    }\n  }\n});\nconst ImagePreview = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  boxSizing: 'border-box',\n  borderRadius: '$sm',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  $inputStyle: '',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center',\n  variants: {\n    hasImage: {\n      true: {\n        cursor: 'pointer',\n        $hover: '',\n        $active: ''\n      }\n    }\n  }\n});\nconst ImageLargePreview = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  $flexCenter: '',\n  width: '$imagePreviewWidth',\n  height: '$imagePreviewHeight',\n  borderRadius: '$sm',\n  boxShadow: '$level2',\n  pointerEvents: 'none',\n  $inputStyle: '',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center'\n});\nconst Instructions = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  fontSize: '0.8em',\n  height: '100%',\n  padding: '$rowGap $md'\n});\nconst Remove = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  $flexCenter: '',\n  top: '0',\n  right: '0',\n  marginRight: '$sm',\n  height: '100%',\n  cursor: 'pointer',\n  variants: {\n    disabled: {\n      true: {\n        color: '$elevation3',\n        cursor: 'default'\n      }\n    }\n  },\n  '&::after,&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    height: 2,\n    width: 10,\n    borderRadius: 1,\n    backgroundColor: 'currentColor'\n  },\n  '&::after': {\n    transform: 'rotate(45deg)'\n  },\n  '&::before': {\n    transform: 'rotate(-45deg)'\n  }\n});\n\nfunction ImageComponent() {\n  const {\n    label,\n    value,\n    onUpdate,\n    disabled\n  } = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.u)();\n  const {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  } = usePopin();\n  const onDrop = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(acceptedFiles => {\n    if (acceptedFiles.length) onUpdate(acceptedFiles[0]);\n  }, [onUpdate]);\n  const clear = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(e => {\n    e.stopPropagation();\n    onUpdate(undefined);\n  }, [onUpdate]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragAccept\n  } = (0,react_dropzone__WEBPACK_IMPORTED_MODULE_10__.useDropzone)({\n    maxFiles: 1,\n    accept: 'image/*',\n    onDrop,\n    disabled\n  });\n\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.R, {\n    input: true\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.L, null, label), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(ImageContainer, null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(ImagePreview, {\n    ref: popinRef,\n    hasImage: !!value,\n    onPointerDown: () => !!value && show(),\n    onPointerUp: hide,\n    style: {\n      backgroundImage: value ? `url(${value})` : 'none'\n    }\n  }), shown && !!value && react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.P, null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.O, {\n    onPointerUp: hide,\n    style: {\n      cursor: 'pointer'\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(ImageLargePreview, {\n    ref: wrapperRef,\n    style: {\n      backgroundImage: `url(${value})`\n    }\n  })), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(DropZone, getRootProps({\n    isDragAccept\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"input\", getInputProps()), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Instructions, null, isDragAccept ? 'drop image' : 'click or drop')), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Remove, {\n    onClick: clear,\n    disabled: !value\n  })));\n}\n\nvar image = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.c)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({\n  component: ImageComponent\n}, props$1));\n\nconst number = (0,v8n__WEBPACK_IMPORTED_MODULE_1__[\"default\"])().number();\nconst schema = (o, s) => (0,v8n__WEBPACK_IMPORTED_MODULE_1__[\"default\"])().array().length(2).every.number().test(o) && (0,v8n__WEBPACK_IMPORTED_MODULE_1__[\"default\"])().schema({\n  min: number,\n  max: number\n}).test(s);\nconst format = v => ({\n  min: v[0],\n  max: v[1]\n});\nconst sanitize = (value, {\n  bounds: [MIN, MAX]\n}, prevValue) => {\n  const _value = Array.isArray(value) ? format(value) : value;\n  const _newValue = {\n    min: prevValue[0],\n    max: prevValue[1]\n  };\n  const {\n    min,\n    max\n  } = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, _newValue), _value);\n  return [(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.h)(Number(min), MIN, Math.max(MIN, max)), (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.h)(Number(max), Math.min(MAX, min), MAX)];\n};\nconst normalize = ({\n  value,\n  min,\n  max\n}) => {\n  const boundsSettings = {\n    min,\n    max\n  };\n  const _settings = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.n)(format(value), {\n    min: boundsSettings,\n    max: boundsSettings\n  });\n  const bounds = [min, max];\n  const settings = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, _settings), {}, {\n    bounds\n  });\n\n  const _value = sanitize(format(value), settings, value);\n  return {\n    value: _value,\n    settings\n  };\n};\n\nvar props = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema,\n  format: format,\n  sanitize: sanitize,\n  normalize: normalize\n});\n\nconst _excluded$6 = [\"value\", \"bounds\", \"onDrag\"],\n  _excluded2$1 = [\"bounds\"];\nconst Container = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  gridTemplateColumns: 'auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)'\n});\nfunction IntervalSlider(_ref) {\n  let {\n      value,\n      bounds: [min, max],\n      onDrag\n    } = _ref,\n    settings = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(_ref, _excluded$6);\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const minScrubberRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const maxScrubberRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const rangeWidth = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(0);\n  const scrubberWidth = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)('sizes', 'scrubberWidth');\n  const bind = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.e)(({\n    event,\n    first,\n    xy: [x],\n    movement: [mx],\n    memo: _memo = {}\n  }) => {\n    if (first) {\n      const {\n        width,\n        left\n      } = ref.current.getBoundingClientRect();\n      rangeWidth.current = width - parseFloat(scrubberWidth);\n      const targetIsScrub = (event === null || event === void 0 ? void 0 : event.target) === minScrubberRef.current || (event === null || event === void 0 ? void 0 : event.target) === maxScrubberRef.current;\n      _memo.pos = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.j)((x - left) / width, min, max);\n      const delta = Math.abs(_memo.pos - value.min) - Math.abs(_memo.pos - value.max);\n      _memo.key = delta < 0 || delta === 0 && _memo.pos <= value.min ? 'min' : 'max';\n      if (targetIsScrub) _memo.pos = value[_memo.key];\n    }\n    const newValue = _memo.pos + (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.j)(mx / rangeWidth.current, 0, max - min);\n    onDrag({\n      [_memo.key]: (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.k)(newValue, settings[_memo.key])\n    });\n    return _memo;\n  });\n  const minStyle = `calc(${(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.r)(value.min, min, max)} * (100% - ${scrubberWidth} - 8px) + 4px)`;\n  const maxStyle = `calc(${1 - (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.r)(value.max, min, max)} * (100% - ${scrubberWidth} - 8px) + 4px)`;\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.l, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.f)({\n    ref: ref\n  }, bind()), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.q, null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.I, {\n    style: {\n      left: minStyle,\n      right: maxStyle\n    }\n  })), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.S, {\n    position: \"left\",\n    ref: minScrubberRef,\n    style: {\n      left: minStyle\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.S, {\n    position: \"right\",\n    ref: maxScrubberRef,\n    style: {\n      right: maxStyle\n    }\n  }));\n}\nfunction IntervalComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.u)();\n  const _settings = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(settings, _excluded2$1);\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement((react__WEBPACK_IMPORTED_MODULE_4___default().Fragment), null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.R, {\n    input: true\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.L, null, label), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Container, null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(IntervalSlider, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.f)({\n    value: displayValue\n  }, settings, {\n    onDrag: onUpdate\n  })), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a, {\n    value: displayValue,\n    settings: _settings,\n    onUpdate: onUpdate,\n    innerLabelTrim: 0\n  }))));\n}\n\nvar interval = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.c)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({\n  component: IntervalComponent\n}, props));\n\nconst createEventEmitter = () => {\n  const listenerMapping = new Map();\n  return {\n    on: (topic, listener) => {\n      let listeners = listenerMapping.get(topic);\n      if (listeners === undefined) {\n        listeners = new Set();\n        listenerMapping.set(topic, listeners);\n      }\n      listeners.add(listener);\n    },\n    off: (topic, listener) => {\n      const listeners = listenerMapping.get(topic);\n      if (listeners === undefined) {\n        return;\n      }\n      listeners.delete(listener);\n      if (listeners.size === 0) {\n        listenerMapping.delete(topic);\n      }\n    },\n    emit: (topic, ...args) => {\n      const listeners = listenerMapping.get(topic);\n      if (listeners === undefined) {\n        return;\n      }\n      for (const listener of listeners) {\n        listener(...args);\n      }\n    }\n  };\n};\n\nconst _excluded$5 = [\"type\", \"value\"],\n  _excluded2 = [\"onChange\", \"transient\", \"onEditStart\", \"onEditEnd\"];\nconst Store = function Store() {\n  const store = (0,zustand__WEBPACK_IMPORTED_MODULE_11__[\"default\"])((0,zustand_middleware__WEBPACK_IMPORTED_MODULE_12__.subscribeWithSelector)(() => ({\n    data: {}\n  })));\n  const eventEmitter = createEventEmitter();\n  this.storeId = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.t)();\n  this.useStore = store;\n  const folders = {};\n\n  const orderedPaths = new Set();\n\n  this.getVisiblePaths = () => {\n    const data = this.getData();\n    const paths = Object.keys(data);\n    const hiddenFolders = [];\n    Object.entries(folders).forEach(([path, settings]) => {\n      if (\n      settings.render &&\n      paths.some(p => p.indexOf(path) === 0) &&\n      !settings.render(this.get))\n        hiddenFolders.push(path + '.');\n    });\n    const visiblePaths = [];\n    orderedPaths.forEach(path => {\n      if (path in data &&\n      data[path].__refCount > 0 &&\n      hiddenFolders.every(p => path.indexOf(p) === -1) && (\n      !data[path].render || data[path].render(this.get))) {\n        visiblePaths.push(path);\n      }\n    });\n    return visiblePaths;\n  };\n\n  this.setOrderedPaths = newPaths => {\n    newPaths.forEach(p => orderedPaths.add(p));\n  };\n  this.orderPaths = paths => {\n    this.setOrderedPaths(paths);\n    return paths;\n  };\n\n  this.disposePaths = paths => {\n    store.setState(s => {\n      const data = s.data;\n      paths.forEach(path => {\n        if (path in data) {\n          const input = data[path];\n          input.__refCount--;\n          if (input.__refCount === 0 && input.type in _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.v) {\n            delete data[path];\n          }\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n  this.dispose = () => {\n    store.setState(() => {\n      return {\n        data: {}\n      };\n    });\n  };\n  this.getFolderSettings = path => {\n    return folders[path] || {};\n  };\n\n  this.getData = () => {\n    return store.getState().data;\n  };\n\n  this.addData = (newData, override) => {\n    store.setState(s => {\n      const data = s.data;\n      Object.entries(newData).forEach(([path, newInputData]) => {\n        let input = data[path];\n\n        if (!!input) {\n          const {\n              type,\n              value\n            } = newInputData,\n            rest = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(newInputData, _excluded$5);\n          if (type !== input.type) {\n            (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.w)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.x.INPUT_TYPE_OVERRIDE, type);\n          } else {\n            if (input.__refCount === 0 || override) {\n              Object.assign(input, rest);\n            }\n            input.__refCount++;\n          }\n        } else {\n          data[path] = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, newInputData), {}, {\n            __refCount: 1\n          });\n        }\n      });\n\n      return {\n        data\n      };\n    });\n  };\n\n  this.setValueAtPath = (path, value, fromPanel) => {\n    store.setState(s => {\n      const data = s.data;\n      (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.y)(data[path], value, path, this, fromPanel);\n      return {\n        data\n      };\n    });\n  };\n  this.setSettingsAtPath = (path, settings) => {\n    store.setState(s => {\n      const data = s.data;\n      data[path].settings = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, data[path].settings), settings);\n      return {\n        data\n      };\n    });\n  };\n  this.disableInputAtPath = (path, flag) => {\n    store.setState(s => {\n      const data = s.data;\n      data[path].disabled = flag;\n      return {\n        data\n      };\n    });\n  };\n  this.set = (values, fromPanel) => {\n    store.setState(s => {\n      const data = s.data;\n      Object.entries(values).forEach(([path, value]) => {\n        try {\n          (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.y)(data[path], value, undefined, undefined, fromPanel);\n        } catch (e) {\n          if (true) {\n            console.warn(`[This message will only show in development]: \\`set\\` for path ${path} has failed.`, e);\n          }\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n  this.getInput = path => {\n    try {\n      return this.getData()[path];\n    } catch (e) {\n      (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.w)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.x.PATH_DOESNT_EXIST, path);\n    }\n  };\n  this.get = path => {\n    var _this$getInput;\n    return (_this$getInput = this.getInput(path)) === null || _this$getInput === void 0 ? void 0 : _this$getInput.value;\n  };\n  this.emitOnEditStart = path => {\n    eventEmitter.emit(`onEditStart:${path}`, this.get(path), path, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, this.getInput(path)), {}, {\n      get: this.get\n    }));\n  };\n  this.emitOnEditEnd = path => {\n    eventEmitter.emit(`onEditEnd:${path}`, this.get(path), path, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, this.getInput(path)), {}, {\n      get: this.get\n    }));\n  };\n  this.subscribeToEditStart = (path, listener) => {\n    const _path = `onEditStart:${path}`;\n    eventEmitter.on(_path, listener);\n    return () => eventEmitter.off(_path, listener);\n  };\n  this.subscribeToEditEnd = (path, listener) => {\n    const _path = `onEditEnd:${path}`;\n    eventEmitter.on(_path, listener);\n    return () => eventEmitter.off(_path, listener);\n  };\n\n  const _getDataFromSchema = (schema, rootPath, mappedPaths) => {\n    const data = {};\n    Object.entries(schema).forEach(([key, rawInput]) => {\n      if (key === '') return (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.w)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.x.EMPTY_KEY);\n      let newPath = join(rootPath, key);\n\n      if (rawInput.type === _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.v.FOLDER) {\n        const newData = _getDataFromSchema(rawInput.schema, newPath, mappedPaths);\n        Object.assign(data, newData);\n\n        if (!(newPath in folders)) folders[newPath] = rawInput.settings;\n      } else if (key in mappedPaths) {\n        (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.w)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.x.DUPLICATE_KEYS, key, newPath, mappedPaths[key].path);\n      } else {\n        const normalizedInput = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.z)(rawInput, key, newPath, data);\n        if (normalizedInput) {\n          const {\n            type,\n            options,\n            input\n          } = normalizedInput;\n          const {\n              onChange,\n              transient,\n              onEditStart,\n              onEditEnd\n            } = options,\n            _options = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(options, _excluded2);\n          data[newPath] = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({\n            type\n          }, _options), input), {}, {\n            fromPanel: true\n          });\n          mappedPaths[key] = {\n            path: newPath,\n            onChange,\n            transient,\n            onEditStart,\n            onEditEnd\n          };\n        } else {\n          (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.w)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.x.UNKNOWN_INPUT, newPath, rawInput);\n        }\n      }\n    });\n    return data;\n  };\n  this.getDataFromSchema = schema => {\n    const mappedPaths = {};\n    const data = _getDataFromSchema(schema, '', mappedPaths);\n    return [data, mappedPaths];\n  };\n};\nconst levaStore = new Store();\nfunction useCreateStore() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(() => new Store(), []);\n}\nif ( true && typeof window !== 'undefined') {\n  window.__STORE = levaStore;\n}\n\nconst defaultSettings$2 = {\n  collapsed: false\n};\nfunction folder(schema, settings) {\n  return {\n    type: _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.v.FOLDER,\n    schema,\n    settings: (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultSettings$2), settings)\n  };\n}\n\nconst defaultSettings$1 = {\n  disabled: false\n};\n\nfunction button(onClick, settings) {\n  return {\n    type: _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.v.BUTTON,\n    onClick,\n    settings: (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultSettings$1), settings)\n  };\n}\n\nfunction buttonGroup(opts) {\n  return {\n    type: _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.v.BUTTON_GROUP,\n    opts\n  };\n}\n\nconst defaultSettings = {\n  graph: false,\n  interval: 100\n};\nfunction monitor(objectOrFn, settings) {\n  return {\n    type: _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.v.MONITOR,\n    objectOrFn,\n    settings: (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultSettings), settings)\n  };\n}\n\nconst isInput = v => '__levaInput' in v;\nconst buildTree = (paths, filter) => {\n  const tree = {};\n  const _filter = filter ? filter.toLowerCase() : null;\n  paths.forEach(path => {\n    const [valueKey, folderPath] = getKeyPath(path);\n    if (!_filter || valueKey.toLowerCase().indexOf(_filter) > -1) {\n      merge_value__WEBPACK_IMPORTED_MODULE_5___default()(tree, folderPath, {\n        [valueKey]: {\n          __levaInput: true,\n          path\n        }\n      });\n    }\n  });\n  return tree;\n};\n\nconst _excluded$4 = [\"type\", \"label\", \"path\", \"valueKey\", \"value\", \"settings\", \"setValue\", \"disabled\"];\nfunction ControlInput(_ref) {\n  let {\n      type,\n      label,\n      path,\n      valueKey,\n      value,\n      settings,\n      setValue,\n      disabled\n    } = _ref,\n    rest = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(_ref, _excluded$4);\n  const {\n    displayValue,\n    onChange,\n    onUpdate\n  } = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.A)({\n    type,\n    value,\n    settings,\n    setValue\n  });\n  const Input = _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.B[type].component;\n  if (!Input) {\n    (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.w)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.x.NO_COMPONENT_FOR_TYPE, type, path);\n    return null;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.C.Provider, {\n    value: (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({\n      key: valueKey,\n      path,\n      id: '' + path,\n      label,\n      displayValue,\n      value,\n      onChange,\n      onUpdate,\n      settings,\n      setValue,\n      disabled\n    }, rest)\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.D, {\n    disabled: disabled\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Input, null)));\n}\n\nconst StyledButton = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('button', {\n  display: 'block',\n  $reset: '',\n  fontWeight: '$button',\n  height: '$rowHeight',\n  borderStyle: 'none',\n  borderRadius: '$sm',\n  backgroundColor: '$elevation1',\n  color: '$highlight1',\n  '&:not(:disabled)': {\n    color: '$highlight3',\n    backgroundColor: '$accent2',\n    cursor: 'pointer',\n    $hover: '$accent3',\n    $active: '$accent3 $accent1',\n    $focus: ''\n  }\n});\n\nfunction Button({\n  onClick,\n  settings,\n  label\n}) {\n  const store = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.E)();\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.R, null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(StyledButton, {\n    disabled: settings.disabled,\n    onClick: () => onClick(store.get)\n  }, label));\n}\n\nconst StyledButtonGroup = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  $flex: '',\n  justifyContent: 'flex-end',\n  gap: '$colGap'\n});\n\nconst StyledButtonGroupButton = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('button', {\n  $reset: '',\n  cursor: 'pointer',\n  borderRadius: '$xs',\n  '&:hover': {\n    backgroundColor: '$elevation3'\n  }\n});\n\nconst getOpts = ({\n  label: _label,\n  opts: _opts\n}) => {\n  let label = typeof _label === 'string' ? _label.trim() === '' ? null : _label : _label;\n  let opts = _opts;\n  if (typeof _opts.opts === 'object') {\n    if (opts.label !== undefined) {\n      label = _opts.label;\n    }\n    opts = _opts.opts;\n  }\n  return {\n    label,\n    opts: opts\n  };\n};\nfunction ButtonGroup(props) {\n  const {\n    label,\n    opts\n  } = getOpts(props);\n  const store = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.E)();\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.R, {\n    input: !!label\n  }, label && react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.L, null, label), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(StyledButtonGroup, null, Object.entries(opts).map(([label, onClick]) => react__WEBPACK_IMPORTED_MODULE_4___default().createElement(StyledButtonGroupButton, {\n    key: label,\n    onClick: () => onClick(store.get)\n  }, label))));\n}\n\nconst Canvas = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('canvas', {\n  height: '$monitorHeight',\n  width: '100%',\n  display: 'block',\n  borderRadius: '$sm'\n});\n\nconst POINTS = 100;\nfunction push(arr, val) {\n  arr.push(val);\n  if (arr.length > POINTS) arr.shift();\n}\nconst MonitorCanvas = (0,react__WEBPACK_IMPORTED_MODULE_4__.forwardRef)(function ({\n  initialValue\n}, ref) {\n  const accentColor = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)('colors', 'highlight3');\n  const backgroundColor = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)('colors', 'elevation2');\n  const fillColor = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)('colors', 'highlight1');\n  const [gradientTop, gradientBottom] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(() => {\n    return [(0,colord__WEBPACK_IMPORTED_MODULE_7__.colord)(fillColor).alpha(0.4).toRgbString(), (0,colord__WEBPACK_IMPORTED_MODULE_7__.colord)(fillColor).alpha(0.1).toRgbString()];\n  }, [fillColor]);\n  const points = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)([initialValue]);\n  const min = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(initialValue);\n  const max = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(initialValue);\n  const raf = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)();\n  const drawPlot = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((_canvas, _ctx) => {\n    if (!_canvas) return;\n    const {\n      width,\n      height\n    } = _canvas;\n\n    const path = new Path2D();\n    const interval = width / POINTS;\n    const verticalPadding = height * 0.05;\n    for (let i = 0; i < points.current.length; i++) {\n      const p = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.r)(points.current[i], min.current, max.current);\n      const x = interval * i;\n      const y = height - p * (height - verticalPadding * 2) - verticalPadding;\n      path.lineTo(x, y);\n    }\n\n    _ctx.clearRect(0, 0, width, height);\n\n    const gradientPath = new Path2D(path);\n    gradientPath.lineTo(interval * (points.current.length + 1), height);\n    gradientPath.lineTo(0, height);\n    gradientPath.lineTo(0, 0);\n    const gradient = _ctx.createLinearGradient(0, 0, 0, height);\n    gradient.addColorStop(0.0, gradientTop);\n    gradient.addColorStop(1.0, gradientBottom);\n    _ctx.fillStyle = gradient;\n    _ctx.fill(gradientPath);\n\n    _ctx.strokeStyle = backgroundColor;\n    _ctx.lineJoin = 'round';\n    _ctx.lineWidth = 14;\n    _ctx.stroke(path);\n\n    _ctx.strokeStyle = accentColor;\n    _ctx.lineWidth = 2;\n    _ctx.stroke(path);\n  }, [accentColor, backgroundColor, gradientTop, gradientBottom]);\n  const [canvas, ctx] = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.F)(drawPlot);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useImperativeHandle)(ref, () => ({\n    frame: val => {\n      if (min.current === undefined || val < min.current) min.current = val;\n      if (max.current === undefined || val > max.current) max.current = val;\n      push(points.current, val);\n      raf.current = requestAnimationFrame(() => drawPlot(canvas.current, ctx.current));\n    }\n  }), [canvas, ctx, drawPlot]);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => () => cancelAnimationFrame(raf.current), []);\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Canvas, {\n    ref: canvas\n  });\n});\nconst parse = val => Number.isFinite(val) ? val.toPrecision(2) : val.toString();\nconst MonitorLog = (0,react__WEBPACK_IMPORTED_MODULE_4__.forwardRef)(function ({\n  initialValue\n}, ref) {\n  const [val, set] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(parse(initialValue));\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useImperativeHandle)(ref, () => ({\n    frame: v => set(parse(v))\n  }), []);\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, val);\n});\nfunction getValue(o) {\n  return typeof o === 'function' ? o() : o.current;\n}\nfunction Monitor({\n  label,\n  objectOrFn,\n  settings\n}) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)();\n  const initialValue = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(getValue(objectOrFn));\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    const timeout = window.setInterval(() => {\n      var _ref$current;\n      if (document.hidden) return;\n      (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.frame(getValue(objectOrFn));\n    }, settings.interval);\n    return () => window.clearInterval(timeout);\n  }, [objectOrFn, settings.interval]);\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.R, {\n    input: true\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.L, {\n    align: \"top\"\n  }, label), settings.graph ? react__WEBPACK_IMPORTED_MODULE_4___default().createElement(MonitorCanvas, {\n    ref: ref,\n    initialValue: initialValue.current\n  }) : react__WEBPACK_IMPORTED_MODULE_4___default().createElement(MonitorLog, {\n    ref: ref,\n    initialValue: initialValue.current\n  }));\n}\n\nconst _excluded$3 = [\"type\", \"label\", \"key\"];\nconst specialComponents = {\n  [_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.v.BUTTON]: Button,\n  [_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.v.BUTTON_GROUP]: ButtonGroup,\n  [_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.v.MONITOR]: Monitor\n};\nconst Control = react__WEBPACK_IMPORTED_MODULE_4___default().memo(({\n  path\n}) => {\n  const [input, {\n    set,\n    setSettings,\n    disable,\n    storeId,\n    emitOnEditStart,\n    emitOnEditEnd\n  }] = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.G)(path);\n  if (!input) return null;\n  const {\n      type,\n      label,\n      key\n    } = input,\n    inputProps = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(input, _excluded$3);\n  if (type in _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.v) {\n    const SpecialInputForType = specialComponents[type];\n    return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(SpecialInputForType, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.f)({\n      label: label,\n      path: path\n    }, inputProps));\n  }\n  if (!(type in _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.B)) {\n    (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.H)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.x.UNSUPPORTED_INPUT, type, path);\n    return null;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(ControlInput, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.f)({\n    key: storeId + path,\n    type: type,\n    label: label,\n    storeId: storeId,\n    path: path,\n    valueKey: key,\n    setValue: set,\n    setSettings: setSettings,\n    disable: disable,\n    emitOnEditStart: emitOnEditStart,\n    emitOnEditEnd: emitOnEditEnd\n  }, inputProps));\n});\n\nfunction FolderTitle({\n  toggle,\n  toggled,\n  name\n}) {\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.J, {\n    onClick: () => toggle()\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.K, {\n    toggled: toggled\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, name));\n}\n\nconst Folder = ({\n  name,\n  path,\n  tree\n}) => {\n  const store = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.E)();\n  const newPath = join(path, name);\n  const {\n    collapsed,\n    color\n  } = store.getFolderSettings(newPath);\n  const [toggled, setToggle] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(!collapsed);\n  const folderRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const widgetColor = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)('colors', 'folderWidgetColor');\n  const textColor = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)('colors', 'folderTextColor');\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useLayoutEffect)(() => {\n    folderRef.current.style.setProperty('--leva-colors-folderWidgetColor', color || widgetColor);\n    folderRef.current.style.setProperty('--leva-colors-folderTextColor', color || textColor);\n  }, [color, widgetColor, textColor]);\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.Q, {\n    ref: folderRef\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(FolderTitle, {\n    name: name,\n    toggled: toggled,\n    toggle: () => setToggle(t => !t)\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(TreeWrapper, {\n    parent: newPath,\n    tree: tree,\n    toggled: toggled\n  }));\n};\nconst TreeWrapper = react__WEBPACK_IMPORTED_MODULE_4___default().memo(({\n  isRoot: _isRoot = false,\n  fill: _fill = false,\n  flat: _flat = false,\n  parent,\n  tree,\n  toggled\n}) => {\n  const {\n    wrapperRef,\n    contentRef\n  } = useToggle(toggled);\n  const store = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.E)();\n  const getOrder = ([key, o]) => {\n    var _store$getInput;\n    const order = isInput(o) ? (_store$getInput = store.getInput(o.path)) === null || _store$getInput === void 0 ? void 0 : _store$getInput.order : store.getFolderSettings(join(parent, key)).order;\n    return order || 0;\n  };\n  const entries = Object.entries(tree).sort((a, b) => getOrder(a) - getOrder(b));\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.M, {\n    ref: wrapperRef,\n    isRoot: _isRoot,\n    fill: _fill,\n    flat: _flat\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.N, {\n    ref: contentRef,\n    isRoot: _isRoot,\n    toggled: toggled\n  }, entries.map(([key, value]) => isInput(value) ? react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Control, {\n    key: value.path,\n    valueKey: value.valueKey,\n    path: value.path\n  }) : react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Folder, {\n    key: key,\n    name: key,\n    path: parent,\n    tree: value\n  }))));\n});\n\nconst StyledRoot = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  position: 'relative',\n  fontFamily: '$mono',\n  fontSize: '$root',\n  color: '$rootText',\n  backgroundColor: '$elevation1',\n  variants: {\n    fill: {\n      false: {\n        position: 'fixed',\n        top: '10px',\n        right: '10px',\n        zIndex: 1000,\n        width: '$rootWidth'\n      },\n      true: {\n        position: 'relative',\n        width: '100%'\n      }\n    },\n    flat: {\n      false: {\n        borderRadius: '$lg',\n        boxShadow: '$level1'\n      }\n    },\n    oneLineLabels: {\n      true: {\n        [`${_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.T}`]: {\n          gridTemplateColumns: 'auto',\n          gridAutoColumns: 'minmax(max-content, 1fr)',\n          gridAutoRows: 'minmax($sizes$rowHeight), auto)',\n          rowGap: 0,\n          columnGap: 0,\n          marginTop: '$rowGap'\n        }\n      }\n    },\n    hideTitleBar: {\n      true: {\n        $$titleBarHeight: '0px'\n      },\n      false: {\n        $$titleBarHeight: '$sizes$titleBarHeight'\n      }\n    }\n  },\n  '&,*,*:after,*:before': {\n    boxSizing: 'border-box'\n  },\n  '*::selection': {\n    backgroundColor: '$accent2'\n  }\n});\n\nconst iconWidth = 40;\nconst Icon = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('i', {\n  $flexCenter: '',\n  width: iconWidth,\n  userSelect: 'none',\n  cursor: 'pointer',\n  '> svg': {\n    fill: '$highlight1',\n    transition: 'transform 350ms ease, fill 250ms ease'\n  },\n  '&:hover > svg': {\n    fill: '$highlight3'\n  },\n  variants: {\n    active: {\n      true: {\n        '> svg': {\n          fill: '$highlight2'\n        }\n      }\n    }\n  }\n});\nconst StyledTitleWithFilter = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  display: 'flex',\n  alignItems: 'stretch',\n  justifyContent: 'space-between',\n  height: '$titleBarHeight',\n  variants: {\n    mode: {\n      drag: {\n        cursor: 'grab'\n      }\n    }\n  }\n});\nconst FilterWrapper = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  $flex: '',\n  position: 'relative',\n  width: '100%',\n  overflow: 'hidden',\n  transition: 'height 250ms ease',\n  color: '$highlight3',\n  paddingLeft: '$md',\n  [`> ${Icon}`]: {\n    height: 30\n  },\n  variants: {\n    toggled: {\n      true: {\n        height: 30\n      },\n      false: {\n        height: 0\n      }\n    }\n  }\n});\nconst StyledFilterInput = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('input', {\n  $reset: '',\n  flex: 1,\n  position: 'relative',\n  height: 30,\n  width: '100%',\n  backgroundColor: 'transparent',\n  fontSize: '10px',\n  borderRadius: '$root',\n  '&:focus': {},\n  '&::placeholder': {\n    color: '$highlight2'\n  }\n});\nconst TitleContainer = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)('div', {\n  touchAction: 'none',\n  $flexCenter: '',\n  flex: 1,\n  '> svg': {\n    fill: '$highlight1'\n  },\n  color: '$highlight1',\n  variants: {\n    drag: {\n      true: {\n        $draggable: '',\n        '> svg': {\n          transition: 'fill 250ms ease'\n        },\n        '&:hover': {\n          color: '$highlight3'\n        },\n        '&:hover > svg': {\n          fill: '$highlight3'\n        }\n      }\n    },\n    filterEnabled: {\n      false: {\n        paddingRight: iconWidth\n      }\n    }\n  }\n});\n\nconst FilterInput = react__WEBPACK_IMPORTED_MODULE_4___default().forwardRef(({\n  setFilter,\n  toggle\n}, ref) => {\n  const [value, set] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)('');\n  const debouncedOnChange = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(() => (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.U)(setFilter, 250), [setFilter]);\n  const clear = () => {\n    setFilter('');\n    set('');\n  };\n  const _onChange = e => {\n    const v = e.currentTarget.value;\n    toggle(true);\n    set(v);\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    debouncedOnChange(value);\n  }, [value, debouncedOnChange]);\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement((react__WEBPACK_IMPORTED_MODULE_4___default().Fragment), null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(StyledFilterInput, {\n    ref: ref,\n    value: value,\n    placeholder: \"[Open filter with CMD+SHIFT+L]\",\n    onPointerDown: e => e.stopPropagation(),\n    onChange: _onChange\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Icon, {\n    onClick: () => clear(),\n    style: {\n      visibility: value ? 'visible' : 'hidden'\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"14\",\n    width: \"14\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\"\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n    clipRule: \"evenodd\"\n  }))));\n});\nfunction TitleWithFilter({\n  setFilter,\n  onDrag,\n  onDragStart,\n  onDragEnd,\n  toggle,\n  toggled,\n  title,\n  drag,\n  filterEnabled,\n  from\n}) {\n  const [filterShown, setShowFilter] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n  const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    var _inputRef$current, _inputRef$current2;\n    if (filterShown) (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();else (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.blur();\n  }, [filterShown]);\n  const bind = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.e)(({\n    offset: [x, y],\n    first,\n    last\n  }) => {\n    onDrag({\n      x,\n      y\n    });\n    if (first) {\n      onDragStart({\n        x,\n        y\n      });\n    }\n    if (last) {\n      onDragEnd({\n        x,\n        y\n      });\n    }\n  }, {\n    filterTaps: true,\n    from: ({\n      offset: [x, y]\n    }) => [(from === null || from === void 0 ? void 0 : from.x) || x, (from === null || from === void 0 ? void 0 : from.y) || y]\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    const handleShortcut = event => {\n      if (event.key === 'L' && event.shiftKey && event.metaKey) {\n        setShowFilter(f => !f);\n      }\n    };\n    window.addEventListener('keydown', handleShortcut);\n    return () => window.removeEventListener('keydown', handleShortcut);\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement((react__WEBPACK_IMPORTED_MODULE_4___default().Fragment), null, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(StyledTitleWithFilter, {\n    mode: drag ? 'drag' : undefined\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Icon, {\n    active: !toggled,\n    onClick: () => toggle()\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.K, {\n    toggled: toggled,\n    width: 12,\n    height: 8\n  })), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(TitleContainer, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.f)({}, drag ? bind() : {}, {\n    drag: drag,\n    filterEnabled: filterEnabled\n  }), title === undefined && drag ? react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"svg\", {\n    width: \"20\",\n    height: \"10\",\n    viewBox: \"0 0 28 14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"circle\", {\n    cx: \"2\",\n    cy: \"2\",\n    r: \"2\"\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"circle\", {\n    cx: \"14\",\n    cy: \"2\",\n    r: \"2\"\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"circle\", {\n    cx: \"26\",\n    cy: \"2\",\n    r: \"2\"\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"circle\", {\n    cx: \"2\",\n    cy: \"12\",\n    r: \"2\"\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"circle\", {\n    cx: \"14\",\n    cy: \"12\",\n    r: \"2\"\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"circle\", {\n    cx: \"26\",\n    cy: \"12\",\n    r: \"2\"\n  })) : title), filterEnabled && react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Icon, {\n    active: filterShown,\n    onClick: () => setShowFilter(f => !f)\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"20\",\n    viewBox: \"0 0 20 20\"\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"path\", {\n    d: \"M9 9a2 2 0 114 0 2 2 0 01-4 0z\"\n  }), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z\",\n    clipRule: \"evenodd\"\n  })))), react__WEBPACK_IMPORTED_MODULE_4___default().createElement(FilterWrapper, {\n    toggled: filterShown\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(FilterInput, {\n    ref: inputRef,\n    setFilter: setFilter,\n    toggle: toggle\n  })));\n}\n\nconst _excluded$2 = [\"store\", \"hidden\", \"theme\", \"collapsed\"];\nfunction LevaRoot(_ref) {\n  let {\n      store,\n      hidden = false,\n      theme,\n      collapsed = false\n    } = _ref,\n    props = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(_ref, _excluded$2);\n  const themeContext = useDeepMemo(() => (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.Z)(theme), [theme]);\n  const [toggled, setToggle] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(!collapsed);\n  const computedToggled = typeof collapsed === 'object' ? !collapsed.collapsed : toggled;\n  const computedSetToggle = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(() => {\n    if (typeof collapsed === 'object') {\n      return value => {\n        if (typeof value === 'function') {\n          collapsed.onChange(!value(!collapsed.collapsed));\n        } else {\n          collapsed.onChange(!value);\n        }\n      };\n    }\n    return setToggle;\n  }, [collapsed]);\n  if (!store || hidden) return null;\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.$.Provider, {\n    value: themeContext\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(LevaCore, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.f)({\n    store: store\n  }, props, {\n    toggled: computedToggled,\n    setToggle: computedSetToggle,\n    rootClass: themeContext.className\n  })));\n}\nconst LevaCore = react__WEBPACK_IMPORTED_MODULE_4___default().memo(({\n  store,\n  rootClass,\n  fill: _fill = false,\n  flat: _flat = false,\n  neverHide: _neverHide = false,\n  oneLineLabels: _oneLineLabels = false,\n  titleBar: _titleBar = {\n    title: undefined,\n    drag: true,\n    filter: true,\n    position: undefined,\n    onDrag: undefined,\n    onDragStart: undefined,\n    onDragEnd: undefined\n  },\n  hideCopyButton: _hideCopyButton = false,\n  toggled,\n  setToggle\n}) => {\n  var _titleBar$drag, _titleBar$filter;\n  const paths = useVisiblePaths(store);\n  const [filter, setFilter] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)('');\n  const tree = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(() => buildTree(paths, filter), [paths, filter]);\n\n  const [rootRef, set] = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.b)();\n\n  const shouldShow = _neverHide || paths.length > 0;\n  const title = typeof _titleBar === 'object' ? _titleBar.title || undefined : undefined;\n  const drag = typeof _titleBar === 'object' ? (_titleBar$drag = _titleBar.drag) !== null && _titleBar$drag !== void 0 ? _titleBar$drag : true : true;\n  const filterEnabled = typeof _titleBar === 'object' ? (_titleBar$filter = _titleBar.filter) !== null && _titleBar$filter !== void 0 ? _titleBar$filter : true : true;\n  const position = typeof _titleBar === 'object' ? _titleBar.position || undefined : undefined;\n  const onDrag = typeof _titleBar === 'object' ? _titleBar.onDrag || undefined : undefined;\n  const onDragStart = typeof _titleBar === 'object' ? _titleBar.onDragStart || undefined : undefined;\n  const onDragEnd = typeof _titleBar === 'object' ? _titleBar.onDragEnd || undefined : undefined;\n  react__WEBPACK_IMPORTED_MODULE_4___default().useEffect(() => {\n    set({\n      x: position === null || position === void 0 ? void 0 : position.x,\n      y: position === null || position === void 0 ? void 0 : position.y\n    });\n  }, [position, set]);\n  (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.W)();\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.X.Provider, {\n    value: {\n      hideCopyButton: _hideCopyButton\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(StyledRoot, {\n    ref: rootRef,\n    className: rootClass,\n    fill: _fill,\n    flat: _flat,\n    oneLineLabels: _oneLineLabels,\n    hideTitleBar: !_titleBar,\n    style: {\n      display: shouldShow ? 'block' : 'none'\n    }\n  }, _titleBar && react__WEBPACK_IMPORTED_MODULE_4___default().createElement(TitleWithFilter, {\n    onDrag: point => {\n      set(point);\n      onDrag === null || onDrag === void 0 ? void 0 : onDrag(point);\n    },\n    onDragStart: point => onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(point),\n    onDragEnd: point => onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(point),\n    setFilter: setFilter,\n    toggle: flag => setToggle(t => flag !== null && flag !== void 0 ? flag : !t),\n    toggled: toggled,\n    title: title,\n    drag: drag,\n    filterEnabled: filterEnabled,\n    from: position\n  }), shouldShow && react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.Y.Provider, {\n    value: store\n  }, react__WEBPACK_IMPORTED_MODULE_4___default().createElement(TreeWrapper, {\n    isRoot: true,\n    fill: _fill,\n    flat: _flat,\n    tree: tree,\n    toggled: toggled\n  }))));\n});\n\nconst _excluded$1 = [\"isRoot\"];\nlet rootInitialized = false;\nlet rootEl = null;\nfunction Leva(_ref) {\n  let {\n      isRoot = false\n    } = _ref,\n    props = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(_ref, _excluded$1);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    rootInitialized = true;\n    if (!isRoot && rootEl) {\n      rootEl.remove();\n      rootEl = null;\n    }\n    return () => {\n      if (!isRoot) rootInitialized = false;\n    };\n  }, [isRoot]);\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(LevaRoot, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.f)({\n    store: levaStore\n  }, props));\n}\n\nfunction useRenderRoot(isGlobalPanel) {\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    if (isGlobalPanel && !rootInitialized) {\n      if (!rootEl) {\n        rootEl = document.getElementById('leva__root') || Object.assign(document.createElement('div'), {\n          id: 'leva__root'\n        });\n        if (document.body) {\n          document.body.appendChild(rootEl);\n          (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a0)(react__WEBPACK_IMPORTED_MODULE_4___default().createElement(Leva, {\n            isRoot: true\n          }), rootEl);\n        }\n      }\n      rootInitialized = true;\n    }\n  }, [isGlobalPanel]);\n}\n\nconst _excluded = [\"store\"];\nfunction LevaPanel(_ref) {\n  let {\n      store\n    } = _ref,\n    props = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(_ref, _excluded);\n  const parentStore = (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.E)();\n  const _store = store === undefined ? parentStore : store;\n  return react__WEBPACK_IMPORTED_MODULE_4___default().createElement(LevaRoot, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.f)({\n    store: _store\n  }, props));\n}\n\nfunction parseArgs(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined) {\n  let schema;\n  let folderName = undefined;\n  let folderSettings;\n  let hookSettings;\n  let deps;\n  if (typeof schemaOrFolderName === 'string') {\n    folderName = schemaOrFolderName;\n    schema = settingsOrDepsOrSchema;\n    if (Array.isArray(depsOrSettingsOrFolderSettings)) {\n      deps = depsOrSettingsOrFolderSettings;\n    } else {\n      if (depsOrSettingsOrFolderSettings) {\n        if ('store' in depsOrSettingsOrFolderSettings) {\n          hookSettings = depsOrSettingsOrFolderSettings;\n          deps = depsOrSettings;\n        } else {\n          folderSettings = depsOrSettingsOrFolderSettings;\n          if (Array.isArray(depsOrSettings)) {\n            deps = depsOrSettings;\n          } else {\n            hookSettings = depsOrSettings;\n            deps = depsOrUndefined;\n          }\n        }\n      }\n    }\n  } else {\n    schema = schemaOrFolderName;\n    if (Array.isArray(settingsOrDepsOrSchema)) {\n      deps = settingsOrDepsOrSchema;\n    } else {\n      hookSettings = settingsOrDepsOrSchema;\n      deps = depsOrSettingsOrFolderSettings;\n    }\n  }\n  return {\n    schema,\n    folderName,\n    folderSettings,\n    hookSettings,\n    deps: deps || []\n  };\n}\n\nfunction useControls(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined) {\n  const {\n    folderName,\n    schema,\n    folderSettings,\n    hookSettings,\n    deps\n  } = parseArgs(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined);\n  const schemaIsFunction = typeof schema === 'function';\n\n  const depsChanged = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(false);\n  const firstRender = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(true);\n\n  const _schema = useDeepMemo(() => {\n    depsChanged.current = true;\n    const s = typeof schema === 'function' ? schema() : schema;\n    return folderName ? {\n      [folderName]: folder(s, folderSettings)\n    } : s;\n  }, deps);\n\n  const isGlobalPanel = !(hookSettings !== null && hookSettings !== void 0 && hookSettings.store);\n  useRenderRoot(isGlobalPanel);\n  const [store] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(() => (hookSettings === null || hookSettings === void 0 ? void 0 : hookSettings.store) || levaStore);\n\n  const [initialData, mappedPaths] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(() => store.getDataFromSchema(_schema), [store, _schema]);\n  const [allPaths, renderPaths, onChangePaths, onEditStartPaths, onEditEndPaths] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(() => {\n    const allPaths = [];\n    const renderPaths = [];\n    const onChangePaths = {};\n    const onEditStartPaths = {};\n    const onEditEndPaths = {};\n    Object.values(mappedPaths).forEach(({\n      path,\n      onChange,\n      onEditStart,\n      onEditEnd,\n      transient\n    }) => {\n      allPaths.push(path);\n      if (!!onChange) {\n        onChangePaths[path] = onChange;\n        if (!transient) {\n          renderPaths.push(path);\n        }\n      } else {\n        renderPaths.push(path);\n      }\n      if (onEditStart) {\n        onEditStartPaths[path] = onEditStart;\n      }\n      if (onEditEnd) {\n        onEditEndPaths[path] = onEditEnd;\n      }\n    });\n    return [allPaths, renderPaths, onChangePaths, onEditStartPaths, onEditEndPaths];\n  }, [mappedPaths]);\n\n  const paths = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(() => store.orderPaths(allPaths), [allPaths, store]);\n\n  const values = useValuesForPath(store, renderPaths, initialData);\n  const set = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(values => {\n    const _values = Object.entries(values).reduce((acc, [p, v]) => Object.assign(acc, {\n      [mappedPaths[p].path]: v\n    }), {});\n    store.set(_values, false);\n  }, [store, mappedPaths]);\n  const get = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(path => store.get(mappedPaths[path].path), [store, mappedPaths]);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n\n    const shouldOverrideSettings = !firstRender.current && depsChanged.current;\n    store.addData(initialData, shouldOverrideSettings);\n    firstRender.current = false;\n    depsChanged.current = false;\n    return () => store.disposePaths(paths);\n  }, [store, paths, initialData]);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    const unsubscriptions = [];\n    Object.entries(onChangePaths).forEach(([path, onChange]) => {\n      onChange(store.get(path), path, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({\n        initial: true,\n        get: store.get\n      }, store.getInput(path)));\n      const unsub = store.useStore.subscribe(s => {\n        const input = s.data[path];\n        const value = input.disabled ? undefined : input.value;\n        return [value, input];\n      }, ([value, input]) => onChange(value, path, (0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({\n        initial: false,\n        get: store.get\n      }, input)), {\n        equalityFn: zustand_shallow__WEBPACK_IMPORTED_MODULE_6__[\"default\"]\n      });\n      unsubscriptions.push(unsub);\n    });\n    return () => unsubscriptions.forEach(unsub => unsub());\n  }, [store, onChangePaths]);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    const unsubscriptions = [];\n    Object.entries(onEditStartPaths).forEach(([path, onEditStart]) => unsubscriptions.push(store.subscribeToEditStart(path, onEditStart)));\n    Object.entries(onEditEndPaths).forEach(([path, onEditEnd]) => unsubscriptions.push(store.subscribeToEditEnd(path, onEditEnd)));\n    return () => unsubscriptions.forEach(unsub => unsub());\n  }, [onEditStartPaths, onEditEndPaths, store]);\n  if (schemaIsFunction) return [values, set, get];\n  return values;\n}\n\n(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a1)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a2.SELECT, _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a3);\n(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a1)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a2.IMAGE, image);\n(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a1)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a2.NUMBER, _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a4);\n(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a1)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a2.COLOR, color);\n(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a1)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a2.STRING, _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a5);\n(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a1)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a2.BOOLEAN, _vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a6);\n(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a1)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a2.INTERVAL, interval);\n(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a1)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a2.VECTOR3D, vector3d);\n(0,_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a1)(_vector_plugin_6f82aee9_esm_js__WEBPACK_IMPORTED_MODULE_0__.a2.VECTOR2D, vector2d);\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGV2YS9kaXN0L2xldmEuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaWxDO0FBQy85QjtBQUM1RjtBQUM2QjtBQUNKO0FBQ1Y7QUFDbEI7QUFDZ0g7QUFDbEU7QUFDM0I7QUFDVjtBQUNJO0FBQ0M7QUFDWTtBQUNoQjtBQUM4QjtBQUMzQjtBQUNQOztBQUV6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCLGlFQUFJOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRyxJQUFJO0FBQ1A7O0FBRUE7QUFDQSxjQUFjLDZDQUFNO0FBQ3BCLHlCQUF5QiwrQ0FBTSxHQUFHLHVEQUFPO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTLDhDQUFPO0FBQ2hCOztBQUVBO0FBQ0EscUJBQXFCLDZDQUFNO0FBQzNCLHFCQUFxQiw2Q0FBTTtBQUMzQixzQkFBc0IsNkNBQU07O0FBRTVCLEVBQUUsc0RBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsK0NBQVE7QUFDcEMsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQSxrQkFBa0IsdURBQU87QUFDekIsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixpRUFBYyxDQUFD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Q3BDLGtFQUFRLENBQUMsOERBQVU7QUFDbkIsa0VBQVEsQ0FBQyw4REFBVSxTQUFTLDhEQUFNO0FBQ2xDLGtFQUFRLENBQUMsOERBQVUsVUFBVSw4REFBTztBQUNwQyxrRUFBUSxDQUFDLDhEQUFVO0FBQ25CLGtFQUFRLENBQUMsOERBQVU7QUFDbkIsa0VBQVEsQ0FBQyw4REFBVTs7QUFFc0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9keHctYWktbGFuZ3VhZ2UtdGVhY2hlci8uL25vZGVfbW9kdWxlcy9sZXZhL2Rpc3QvbGV2YS5lc20uanM/MjZmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwIGFzIHBpY2ssIF8gYXMgX29iamVjdFNwcmVhZDIsIG8gYXMgb21pdCwgcyBhcyBzdHlsZWQsIHUgYXMgdXNlSW5wdXRDb250ZXh0LCBSIGFzIFJvdywgTCBhcyBMYWJlbCwgViBhcyBWYWx1ZUlucHV0LCBQIGFzIFBvcnRhbCwgTyBhcyBPdmVybGF5LCBjIGFzIGNyZWF0ZUludGVybmFsUGx1Z2luLCBhIGFzIFZlY3RvciwgZyBhcyBnZXRWZWN0b3JQbHVnaW4sIGIgYXMgdXNlVHJhbnNmb3JtLCBkIGFzIHVzZVRoLCBlIGFzIHVzZURyYWcsIGYgYXMgX2V4dGVuZHMsIG0gYXMgbXVsdGlwbHlTdGVwLCBoIGFzIGNsYW1wLCBpIGFzIF9vYmplY3RXaXRob3V0UHJvcGVydGllcywgbiBhcyBub3JtYWxpemVLZXllZE51bWJlclNldHRpbmdzLCBqIGFzIGludmVydGVkUmFuZ2UsIGsgYXMgc2FuaXRpemVTdGVwLCByIGFzIHJhbmdlLCBsIGFzIFJhbmdlV3JhcHBlciwgcSBhcyBSYW5nZSwgSSBhcyBJbmRpY2F0b3IsIFMgYXMgU2NydWJiZXIsIHQgYXMgZ2V0VWlkLCB2IGFzIFNwZWNpYWxJbnB1dHMsIHcgYXMgd2FybiwgeCBhcyBMZXZhRXJyb3JzLCB5IGFzIHVwZGF0ZUlucHV0LCB6IGFzIG5vcm1hbGl6ZUlucHV0LCBBIGFzIHVzZUlucHV0U2V0dGVycywgQiBhcyBQbHVnaW5zLCBDIGFzIElucHV0Q29udGV4dCwgRCBhcyBTdHlsZWRJbnB1dFdyYXBwZXIsIEUgYXMgdXNlU3RvcmVDb250ZXh0LCBGIGFzIHVzZUNhbnZhczJkLCBHIGFzIHVzZUlucHV0LCBIIGFzIGxvZywgSiBhcyBTdHlsZWRUaXRsZSwgSyBhcyBDaGV2cm9uLCBNIGFzIFN0eWxlZFdyYXBwZXIsIE4gYXMgU3R5bGVkQ29udGVudCwgUSBhcyBTdHlsZWRGb2xkZXIsIFQgYXMgU3R5bGVkSW5wdXRSb3csIFUgYXMgZGVib3VuY2UsIFcgYXMgZ2xvYmFsU3R5bGVzLCBYIGFzIFBhbmVsU2V0dGluZ3NDb250ZXh0LCBZIGFzIFN0b3JlQ29udGV4dCwgWiBhcyBtZXJnZVRoZW1lLCAkIGFzIFRoZW1lQ29udGV4dCwgYTAgYXMgcmVuZGVyLCBhMSBhcyByZWdpc3RlciwgYTIgYXMgTGV2YUlucHV0cywgYTMgYXMgc2VsZWN0LCBhNCBhcyBudW1iZXIkMSwgYTUgYXMgc3RyaW5nLCBhNiBhcyBib29sZWFuIH0gZnJvbSAnLi92ZWN0b3ItcGx1Z2luLTZmODJhZWU5LmVzbS5qcyc7XG5leHBvcnQgeyBhMiBhcyBMZXZhSW5wdXRzLCBhNyBhcyBMZXZhU3RvcmVQcm92aWRlciwgRSBhcyB1c2VTdG9yZUNvbnRleHQgfSBmcm9tICcuL3ZlY3Rvci1wbHVnaW4tNmY4MmFlZTkuZXNtLmpzJztcbmltcG9ydCB2OG4gZnJvbSAndjhuJztcbmltcG9ydCB7IGV4dGVuZCwgY29sb3JkLCBnZXRGb3JtYXQgfSBmcm9tICdjb2xvcmQnO1xuaW1wb3J0IG5hbWVzUGx1Z2luIGZyb20gJ2NvbG9yZC9wbHVnaW5zL25hbWVzJztcbmltcG9ydCB7IGRlcXVhbCB9IGZyb20gJ2RlcXVhbC9saXRlJztcbmltcG9ydCAncmVhY3QtZG9tJztcbmltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZU1lbW8sIHVzZUxheW91dEVmZmVjdCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIGZvcndhcmRSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBSZ2JhQ29sb3JQaWNrZXIsIFJnYkNvbG9yUGlja2VyIH0gZnJvbSAncmVhY3QtY29sb3JmdWwnO1xuaW1wb3J0IHNoYWxsb3cgZnJvbSAnenVzdGFuZC9zaGFsbG93JztcbmltcG9ydCAnQHVzZS1nZXN0dXJlL3JlYWN0JztcbmltcG9ydCAnQHJhZGl4LXVpL3JlYWN0LXBvcnRhbCc7XG5pbXBvcnQgJ0ByYWRpeC11aS9yZWFjdC10b29sdGlwJztcbmltcG9ydCB7IHVzZURyb3B6b25lIH0gZnJvbSAncmVhY3QtZHJvcHpvbmUnO1xuaW1wb3J0IGNyZWF0ZSBmcm9tICd6dXN0YW5kJztcbmltcG9ydCB7IHN1YnNjcmliZVdpdGhTZWxlY3RvciB9IGZyb20gJ3p1c3RhbmQvbWlkZGxld2FyZSc7XG5pbXBvcnQgbWVyZ2UgZnJvbSAnbWVyZ2UtdmFsdWUnO1xuaW1wb3J0ICdAc3RpdGNoZXMvcmVhY3QnO1xuXG5jb25zdCBqb2luID0gKC4uLmFyZ3MpID0+IGFyZ3MuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJy4nKTtcbmZ1bmN0aW9uIGdldEtleVBhdGgocGF0aCkge1xuICBjb25zdCBkaXIgPSBwYXRoLnNwbGl0KCcuJyk7XG4gIHJldHVybiBbZGlyLnBvcCgpLCBkaXIuam9pbignLicpIHx8IHVuZGVmaW5lZF07XG59XG5cbmZ1bmN0aW9uIGdldFZhbHVlc0ZvclBhdGhzKGRhdGEsIHBhdGhzKSB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhwaWNrKGRhdGEsIHBhdGhzKSkucmVkdWNlKFxuXG4gIChhY2MsIFssIHtcbiAgICB2YWx1ZSxcbiAgICBkaXNhYmxlZCxcbiAgICBrZXlcbiAgfV0pID0+IHtcbiAgICBhY2Nba2V5XSA9IGRpc2FibGVkID8gdW5kZWZpbmVkIDogdmFsdWU7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuXG5mdW5jdGlvbiB1c2VDb21wYXJlTWVtb2l6ZSh2YWx1ZSwgZGVlcCkge1xuICBjb25zdCByZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgY29tcGFyZSA9IGRlZXAgPyBkZXF1YWwgOiBzaGFsbG93O1xuICBpZiAoIWNvbXBhcmUodmFsdWUsIHJlZi5jdXJyZW50KSkge1xuICAgIHJlZi5jdXJyZW50ID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHJlZi5jdXJyZW50O1xufVxuXG5mdW5jdGlvbiB1c2VEZWVwTWVtbyhmbiwgZGVwcykge1xuICByZXR1cm4gdXNlTWVtbyhmbiwgdXNlQ29tcGFyZU1lbW9pemUoZGVwcywgdHJ1ZSkpO1xufVxuXG5mdW5jdGlvbiB1c2VUb2dnbGUodG9nZ2xlZCkge1xuICBjb25zdCB3cmFwcGVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBjb250ZW50UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBmaXJzdFJlbmRlciA9IHVzZVJlZih0cnVlKTtcblxuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdG9nZ2xlZCkge1xuICAgICAgd3JhcHBlclJlZi5jdXJyZW50LnN0eWxlLmhlaWdodCA9ICcwcHgnO1xuICAgICAgd3JhcHBlclJlZi5jdXJyZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgfVxuICB9LCBbXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGZpcnN0UmVuZGVyLmN1cnJlbnQpIHtcbiAgICAgIGZpcnN0UmVuZGVyLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHRpbWVvdXQ7XG4gICAgY29uc3QgcmVmID0gd3JhcHBlclJlZi5jdXJyZW50O1xuICAgIGNvbnN0IGZpeEhlaWdodCA9ICgpID0+IHtcbiAgICAgIGlmICh0b2dnbGVkKSB7XG4gICAgICAgIHJlZi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XG4gICAgICAgIHJlZi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcbiAgICAgICAgY29udGVudFJlZi5jdXJyZW50LnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcsXG4gICAgICAgICAgYmxvY2s6ICduZWFyZXN0J1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJlZi5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZml4SGVpZ2h0LCB7XG4gICAgICBvbmNlOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3Qge1xuICAgICAgaGVpZ2h0XG4gICAgfSA9IGNvbnRlbnRSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZWYuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcbiAgICBpZiAoIXRvZ2dsZWQpIHtcbiAgICAgIHJlZi5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHJlZi5zdHlsZS5oZWlnaHQgPSAnMHB4JywgNTApO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmVmLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBmaXhIZWlnaHQpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIH07XG4gIH0sIFt0b2dnbGVkXSk7XG4gIHJldHVybiB7XG4gICAgd3JhcHBlclJlZixcbiAgICBjb250ZW50UmVmXG4gIH07XG59XG5cbmNvbnN0IHVzZVZpc2libGVQYXRocyA9IHN0b3JlID0+IHtcbiAgY29uc3QgW3BhdGhzLCBzZXRQYXRoc10gPSB1c2VTdGF0ZShzdG9yZS5nZXRWaXNpYmxlUGF0aHMoKSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0UGF0aHMoc3RvcmUuZ2V0VmlzaWJsZVBhdGhzKCkpO1xuICAgIGNvbnN0IHVuc3ViID0gc3RvcmUudXNlU3RvcmUuc3Vic2NyaWJlKHN0b3JlLmdldFZpc2libGVQYXRocywgc2V0UGF0aHMsIHtcbiAgICAgIGVxdWFsaXR5Rm46IHNoYWxsb3dcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4gdW5zdWIoKTtcbiAgfSwgW3N0b3JlXSk7XG4gIHJldHVybiBwYXRocztcbn07XG5cbmZ1bmN0aW9uIHVzZVZhbHVlc0ZvclBhdGgoc3RvcmUsIHBhdGhzLCBpbml0aWFsRGF0YSkge1xuICBjb25zdCB2YWx1ZXNGb3JQYXRoID0gc3RvcmUudXNlU3RvcmUocyA9PiB7XG4gICAgY29uc3QgZGF0YSA9IF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBpbml0aWFsRGF0YSksIHMuZGF0YSk7XG4gICAgcmV0dXJuIGdldFZhbHVlc0ZvclBhdGhzKGRhdGEsIHBhdGhzKTtcbiAgfSwgc2hhbGxvdyk7XG4gIHJldHVybiB2YWx1ZXNGb3JQYXRoO1xufVxuXG5mdW5jdGlvbiB1c2VQb3BpbihtYXJnaW4gPSAzKSB7XG4gIGNvbnN0IHBvcGluUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCB3cmFwcGVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbc2hvd24sIHNldFNob3ddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBzaG93ID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0U2hvdyh0cnVlKSwgW10pO1xuICBjb25zdCBoaWRlID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0U2hvdyhmYWxzZSksIFtdKTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2hvd24pIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgYm90dG9tLFxuICAgICAgICB0b3AsXG4gICAgICAgIGxlZnRcbiAgICAgIH0gPSBwb3BpblJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3Qge1xuICAgICAgICBoZWlnaHRcbiAgICAgIH0gPSB3cmFwcGVyUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSBib3R0b20gKyBoZWlnaHQgPiB3aW5kb3cuaW5uZXJIZWlnaHQgLSA0MCA/ICd1cCcgOiAnZG93bic7XG4gICAgICB3cmFwcGVyUmVmLmN1cnJlbnQuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgd3JhcHBlclJlZi5jdXJyZW50LnN0eWxlLnpJbmRleCA9ICcxMDAwMCc7XG4gICAgICB3cmFwcGVyUmVmLmN1cnJlbnQuc3R5bGUubGVmdCA9IGxlZnQgKyAncHgnO1xuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2Rvd24nKSB3cmFwcGVyUmVmLmN1cnJlbnQuc3R5bGUudG9wID0gYm90dG9tICsgbWFyZ2luICsgJ3B4JztlbHNlIHdyYXBwZXJSZWYuY3VycmVudC5zdHlsZS5ib3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0b3AgKyBtYXJnaW4gKyAncHgnO1xuICAgIH1cbiAgfSwgW21hcmdpbiwgc2hvd25dKTtcbiAgcmV0dXJuIHtcbiAgICBwb3BpblJlZixcbiAgICB3cmFwcGVyUmVmLFxuICAgIHNob3duLFxuICAgIHNob3csXG4gICAgaGlkZVxuICB9O1xufVxuXG5leHRlbmQoW25hbWVzUGx1Z2luXSk7XG5jb25zdCBjb252ZXJ0TWFwID0ge1xuICByZ2I6ICd0b1JnYicsXG4gIGhzbDogJ3RvSHNsJyxcbiAgaHN2OiAndG9Ic3YnLFxuICBoZXg6ICd0b0hleCdcbn07XG52OG4uZXh0ZW5kKHtcbiAgY29sb3I6ICgpID0+IHZhbHVlID0+IGNvbG9yZCh2YWx1ZSkuaXNWYWxpZCgpXG59KTtcbmNvbnN0IHNjaGVtYSQyID0gbyA9PiB2OG4oKS5jb2xvcigpLnRlc3Qobyk7XG5mdW5jdGlvbiBjb252ZXJ0KGNvbG9yLCB7XG4gIGZvcm1hdCxcbiAgaGFzQWxwaGEsXG4gIGlzU3RyaW5nXG59KSB7XG4gIGNvbnN0IGNvbnZlcnRGbiA9IGNvbnZlcnRNYXBbZm9ybWF0XSArIChpc1N0cmluZyAmJiBmb3JtYXQgIT09ICdoZXgnID8gJ1N0cmluZycgOiAnJyk7XG4gIGNvbnN0IHJlc3VsdCA9IGNvbG9yW2NvbnZlcnRGbl0oKTtcbiAgcmV0dXJuIHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnICYmICFoYXNBbHBoYSA/IG9taXQocmVzdWx0LCBbJ2EnXSkgOiByZXN1bHQ7XG59XG5jb25zdCBzYW5pdGl6ZSQyID0gKHYsIHNldHRpbmdzKSA9PiB7XG4gIGNvbnN0IGNvbG9yID0gY29sb3JkKHYpO1xuICBpZiAoIWNvbG9yLmlzVmFsaWQoKSkgdGhyb3cgRXJyb3IoJ0ludmFsaWQgY29sb3InKTtcbiAgcmV0dXJuIGNvbnZlcnQoY29sb3IsIHNldHRpbmdzKTtcbn07XG5jb25zdCBmb3JtYXQkMSA9ICh2LCBzZXR0aW5ncykgPT4ge1xuICByZXR1cm4gY29udmVydChjb2xvcmQodiksIF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBzZXR0aW5ncyksIHt9LCB7XG4gICAgaXNTdHJpbmc6IHRydWUsXG4gICAgZm9ybWF0OiAnaGV4J1xuICB9KSk7XG59O1xuY29uc3Qgbm9ybWFsaXplJDMgPSAoe1xuICB2YWx1ZVxufSkgPT4ge1xuICBjb25zdCBfZiA9IGdldEZvcm1hdCh2YWx1ZSk7XG4gIGNvbnN0IGZvcm1hdCA9IF9mID09PSAnbmFtZScgPyAnaGV4JyA6IF9mO1xuICBjb25zdCBoYXNBbHBoYSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgPyAnYScgaW4gdmFsdWUgOiBfZiA9PT0gJ2hleCcgJiYgdmFsdWUubGVuZ3RoID09PSA4IHx8IC9eKHJnYmEpfChoc2xhKXwoaHN2YSkvLnRlc3QodmFsdWUpO1xuICBjb25zdCBzZXR0aW5ncyA9IHtcbiAgICBmb3JtYXQsXG4gICAgaGFzQWxwaGEsXG4gICAgaXNTdHJpbmc6IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZydcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHZhbHVlOiBzYW5pdGl6ZSQyKHZhbHVlLCBzZXR0aW5ncyksXG4gICAgc2V0dGluZ3NcbiAgfTtcbn07XG5cbnZhciBwcm9wcyQyID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIHNjaGVtYTogc2NoZW1hJDIsXG4gIHNhbml0aXplOiBzYW5pdGl6ZSQyLFxuICBmb3JtYXQ6IGZvcm1hdCQxLFxuICBub3JtYWxpemU6IG5vcm1hbGl6ZSQzXG59KTtcblxuY29uc3QgQ29sb3JQcmV2aWV3ID0gc3R5bGVkKCdkaXYnLCB7XG4gIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgYm9yZGVyUmFkaXVzOiAnJHNtJyxcbiAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgaGVpZ2h0OiAnJHJvd0hlaWdodCcsXG4gIHdpZHRoOiAnJHJvd0hlaWdodCcsXG4gIGJhY2tncm91bmRDb2xvcjogJyNmZmYnLFxuICBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiIGZpbGwtb3BhY2l0eT1cIi4wNVwiPjxwYXRoIGQ9XCJNOCAwaDh2OEg4ek0wIDhoOHY4SDB6XCIvPjwvc3ZnPicpYCxcbiAgJGlucHV0U3R5bGU6ICcnLFxuICAkaG92ZXI6ICcnLFxuICB6SW5kZXg6IDEsXG4gIHZhcmlhbnRzOiB7XG4gICAgYWN0aXZlOiB7XG4gICAgICB0cnVlOiB7XG4gICAgICAgICRpbnB1dFN0eWxlOiAnJGFjY2VudDEnXG4gICAgICB9XG4gICAgfVxuICB9LFxuICAnJjo6YmVmb3JlJzoge1xuICAgIGNvbnRlbnQ6ICdcIlwiJyxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IDAsXG4gICAgYm90dG9tOiAwLFxuICAgIHJpZ2h0OiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnY3VycmVudENvbG9yJyxcbiAgICB6SW5kZXg6IDFcbiAgfVxufSk7XG5jb25zdCBQaWNrZXJDb250YWluZXIgPSBzdHlsZWQoJ2RpdicsIHtcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gIGRpc3BsYXk6ICdncmlkJyxcbiAgZ3JpZFRlbXBsYXRlQ29sdW1uczogJyRzaXplcyRyb3dIZWlnaHQgYXV0bycsXG4gIGNvbHVtbkdhcDogJyRjb2xHYXAnLFxuICBhbGlnbkl0ZW1zOiAnY2VudGVyJ1xufSk7XG5jb25zdCBQaWNrZXJXcmFwcGVyID0gc3R5bGVkKCdkaXYnLCB7XG4gIHdpZHRoOiAnJGNvbG9yUGlja2VyV2lkdGgnLFxuICBoZWlnaHQ6ICckY29sb3JQaWNrZXJIZWlnaHQnLFxuICAnLnJlYWN0LWNvbG9yZnVsJzoge1xuICAgIHdpZHRoOiAnMTAwJScsXG4gICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgYm94U2hhZG93OiAnJGxldmVsMicsXG4gICAgY3Vyc29yOiAnY3Jvc3NoYWlyJ1xuICB9LFxuICAnLnJlYWN0LWNvbG9yZnVsX19zYXR1cmF0aW9uJzoge1xuICAgIGJvcmRlclJhZGl1czogJyRzbSAkc20gMCAwJ1xuICB9LFxuICAnLnJlYWN0LWNvbG9yZnVsX19hbHBoYSwgLnJlYWN0LWNvbG9yZnVsX19odWUnOiB7XG4gICAgaGVpZ2h0OiAxMFxuICB9LFxuICAnLnJlYWN0LWNvbG9yZnVsX19sYXN0LWNvbnRyb2wnOiB7XG4gICAgYm9yZGVyUmFkaXVzOiAnMCAwICRzbSAkc20nXG4gIH0sXG4gICcucmVhY3QtY29sb3JmdWxfX3BvaW50ZXInOiB7XG4gICAgaGVpZ2h0OiAxMixcbiAgICB3aWR0aDogMTJcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGNvbnZlcnRUb1JnYih2YWx1ZSwgZm9ybWF0KSB7XG4gIHJldHVybiBmb3JtYXQgIT09ICdyZ2InID8gY29sb3JkKHZhbHVlKS50b1JnYigpIDogdmFsdWU7XG59XG5mdW5jdGlvbiBDb2xvcih7XG4gIHZhbHVlLFxuICBkaXNwbGF5VmFsdWUsXG4gIHNldHRpbmdzLFxuICBvblVwZGF0ZVxufSkge1xuICBjb25zdCB7XG4gICAgZW1pdE9uRWRpdFN0YXJ0LFxuICAgIGVtaXRPbkVkaXRFbmRcbiAgfSA9IHVzZUlucHV0Q29udGV4dCgpO1xuICBjb25zdCB7XG4gICAgZm9ybWF0LFxuICAgIGhhc0FscGhhXG4gIH0gPSBzZXR0aW5ncztcbiAgY29uc3Qge1xuICAgIHBvcGluUmVmLFxuICAgIHdyYXBwZXJSZWYsXG4gICAgc2hvd24sXG4gICAgc2hvdyxcbiAgICBoaWRlXG4gIH0gPSB1c2VQb3BpbigpO1xuXG4gIGNvbnN0IHRpbWVyID0gdXNlUmVmKDApO1xuXG4gIGNvbnN0IFtpbml0aWFsUmdiLCBzZXRJbml0aWFsUmdiXSA9IHVzZVN0YXRlKCgpID0+IGNvbnZlcnRUb1JnYih2YWx1ZSwgZm9ybWF0KSk7XG4gIGNvbnN0IENvbG9yUGlja2VyID0gaGFzQWxwaGEgPyBSZ2JhQ29sb3JQaWNrZXIgOiBSZ2JDb2xvclBpY2tlcjtcbiAgY29uc3Qgc2hvd1BpY2tlciA9ICgpID0+IHtcbiAgICBzZXRJbml0aWFsUmdiKGNvbnZlcnRUb1JnYih2YWx1ZSwgZm9ybWF0KSk7XG4gICAgc2hvdygpO1xuICAgIGVtaXRPbkVkaXRTdGFydCgpO1xuICB9O1xuICBjb25zdCBoaWRlUGlja2VyID0gKCkgPT4ge1xuICAgIGhpZGUoKTtcbiAgICBlbWl0T25FZGl0RW5kKCk7XG4gICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lci5jdXJyZW50KTtcbiAgfTtcbiAgY29uc3QgaGlkZUFmdGVyRGVsYXkgPSAoKSA9PiB7XG4gICAgdGltZXIuY3VycmVudCA9IHdpbmRvdy5zZXRUaW1lb3V0KGhpZGVQaWNrZXIsIDUwMCk7XG4gIH07XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIuY3VycmVudCk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29sb3JQcmV2aWV3LCB7XG4gICAgcmVmOiBwb3BpblJlZixcbiAgICBhY3RpdmU6IHNob3duLFxuICAgIG9uQ2xpY2s6ICgpID0+IHNob3dQaWNrZXIoKSxcbiAgICBzdHlsZToge1xuICAgICAgY29sb3I6IGRpc3BsYXlWYWx1ZVxuICAgIH1cbiAgfSksIHNob3duICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9ydGFsLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJsYXksIHtcbiAgICBvblBvaW50ZXJVcDogaGlkZVBpY2tlclxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChQaWNrZXJXcmFwcGVyLCB7XG4gICAgcmVmOiB3cmFwcGVyUmVmLFxuICAgIG9uTW91c2VFbnRlcjogKCkgPT4gd2luZG93LmNsZWFyVGltZW91dCh0aW1lci5jdXJyZW50KSxcbiAgICBvbk1vdXNlTGVhdmU6IGUgPT4gZS5idXR0b25zID09PSAwICYmIGhpZGVBZnRlckRlbGF5KClcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChDb2xvclBpY2tlciwge1xuICAgIGNvbG9yOiBpbml0aWFsUmdiLFxuICAgIG9uQ2hhbmdlOiBvblVwZGF0ZVxuICB9KSkpKTtcbn1cbmZ1bmN0aW9uIENvbG9yQ29tcG9uZW50KCkge1xuICBjb25zdCB7XG4gICAgdmFsdWUsXG4gICAgZGlzcGxheVZhbHVlLFxuICAgIGxhYmVsLFxuICAgIG9uQ2hhbmdlLFxuICAgIG9uVXBkYXRlLFxuICAgIHNldHRpbmdzXG4gIH0gPSB1c2VJbnB1dENvbnRleHQoKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93LCB7XG4gICAgaW5wdXQ6IHRydWVcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChMYWJlbCwgbnVsbCwgbGFiZWwpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFBpY2tlckNvbnRhaW5lciwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChDb2xvciwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBkaXNwbGF5VmFsdWU6IGRpc3BsYXlWYWx1ZSxcbiAgICBvbkNoYW5nZTogb25DaGFuZ2UsXG4gICAgb25VcGRhdGU6IG9uVXBkYXRlLFxuICAgIHNldHRpbmdzOiBzZXR0aW5nc1xuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChWYWx1ZUlucHV0LCB7XG4gICAgdmFsdWU6IGRpc3BsYXlWYWx1ZSxcbiAgICBvbkNoYW5nZTogb25DaGFuZ2UsXG4gICAgb25VcGRhdGU6IG9uVXBkYXRlXG4gIH0pKSk7XG59XG5cbnZhciBjb2xvciA9IGNyZWF0ZUludGVybmFsUGx1Z2luKF9vYmplY3RTcHJlYWQyKHtcbiAgY29tcG9uZW50OiBDb2xvckNvbXBvbmVudFxufSwgcHJvcHMkMikpO1xuXG5mdW5jdGlvbiBWZWN0b3IzZENvbXBvbmVudCgpIHtcbiAgY29uc3Qge1xuICAgIGxhYmVsLFxuICAgIGRpc3BsYXlWYWx1ZSxcbiAgICBvblVwZGF0ZSxcbiAgICBzZXR0aW5nc1xuICB9ID0gdXNlSW5wdXRDb250ZXh0KCk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdywge1xuICAgIGlucHV0OiB0cnVlXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGFiZWwsIG51bGwsIGxhYmVsKSwgUmVhY3QuY3JlYXRlRWxlbWVudChWZWN0b3IsIHtcbiAgICB2YWx1ZTogZGlzcGxheVZhbHVlLFxuICAgIHNldHRpbmdzOiBzZXR0aW5ncyxcbiAgICBvblVwZGF0ZTogb25VcGRhdGVcbiAgfSkpO1xufVxuXG52YXIgdmVjdG9yM2QgPSBjcmVhdGVJbnRlcm5hbFBsdWdpbihfb2JqZWN0U3ByZWFkMih7XG4gIGNvbXBvbmVudDogVmVjdG9yM2RDb21wb25lbnRcbn0sIGdldFZlY3RvclBsdWdpbihbJ3gnLCAneScsICd6J10pKSk7XG5cbmNvbnN0IEpveXN0aWNrVHJpZ2dlciA9IHN0eWxlZCgnZGl2Jywge1xuICAkZmxleENlbnRlcjogJycsXG4gIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICBiYWNrZ3JvdW5kQ29sb3I6ICckZWxldmF0aW9uMycsXG4gIGJvcmRlclJhZGl1czogJyRzbScsXG4gIGN1cnNvcjogJ3BvaW50ZXInLFxuICBoZWlnaHQ6ICckcm93SGVpZ2h0JyxcbiAgd2lkdGg6ICckcm93SGVpZ2h0JyxcbiAgdG91Y2hBY3Rpb246ICdub25lJyxcbiAgJGRyYWdnYWJsZTogJycsXG4gICRob3ZlcjogJycsXG4gICcmOmFjdGl2ZSc6IHtcbiAgICBjdXJzb3I6ICdub25lJ1xuICB9LFxuICAnJjo6YWZ0ZXInOiB7XG4gICAgY29udGVudDogJ1wiXCInLFxuICAgIGJhY2tncm91bmRDb2xvcjogJyRhY2NlbnQyJyxcbiAgICBoZWlnaHQ6IDQsXG4gICAgd2lkdGg6IDQsXG4gICAgYm9yZGVyUmFkaXVzOiAyXG4gIH1cbn0pO1xuY29uc3QgSm95c3RpY2tQbGF5Z3JvdW5kID0gc3R5bGVkKCdkaXYnLCB7XG4gICRmbGV4Q2VudGVyOiAnJyxcbiAgd2lkdGg6ICckam95c3RpY2tXaWR0aCcsXG4gIGhlaWdodDogJyRqb3lzdGlja0hlaWdodCcsXG4gIGJvcmRlclJhZGl1czogJyRzbScsXG4gIGJveFNoYWRvdzogJyRsZXZlbDInLFxuICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgekluZGV4OiAxMDAwMCxcbiAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAkZHJhZ2dhYmxlOiAnJyxcbiAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKC01MCUsIC01MCUpJyxcbiAgdmFyaWFudHM6IHtcbiAgICBpc091dE9mQm91bmRzOiB7XG4gICAgICB0cnVlOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyRlbGV2YXRpb24xJ1xuICAgICAgfSxcbiAgICAgIGZhbHNlOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyRlbGV2YXRpb24zJ1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgJz4gZGl2Jzoge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICRmbGV4Q2VudGVyOiAnJyxcbiAgICBib3JkZXJTdHlsZTogJ3NvbGlkJyxcbiAgICBib3JkZXJXaWR0aDogMSxcbiAgICBib3JkZXJDb2xvcjogJyRoaWdobGlnaHQxJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICckZWxldmF0aW9uMycsXG4gICAgd2lkdGg6ICc4MCUnLFxuICAgIGhlaWdodDogJzgwJScsXG4gICAgJyY6OmFmdGVyLCY6OmJlZm9yZSc6IHtcbiAgICAgIGNvbnRlbnQ6ICdcIlwiJyxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgemluZGV4OiAxMCxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJyRoaWdobGlnaHQxJ1xuICAgIH0sXG4gICAgJyY6OmJlZm9yZSc6IHtcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBoZWlnaHQ6IDFcbiAgICB9LFxuICAgICcmOjphZnRlcic6IHtcbiAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgd2lkdGg6IDFcbiAgICB9XG4gIH0sXG4gICc+IHNwYW4nOiB7XG4gICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgemluZGV4OiAxMDAsXG4gICAgd2lkdGg6IDEwLFxuICAgIGhlaWdodDogMTAsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnJGFjY2VudDInLFxuICAgIGJvcmRlclJhZGl1czogJzUwJSdcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIEpveXN0aWNrKHtcbiAgdmFsdWUsXG4gIHNldHRpbmdzLFxuICBvblVwZGF0ZVxufSkge1xuICBjb25zdCB0aW1lb3V0ID0gdXNlUmVmKCk7XG4gIGNvbnN0IG91dE9mQm91bmRzWCA9IHVzZVJlZigwKTtcbiAgY29uc3Qgb3V0T2ZCb3VuZHNZID0gdXNlUmVmKDApO1xuICBjb25zdCBzdGVwTXVsdGlwbGllciA9IHVzZVJlZigxKTtcbiAgY29uc3QgW2pveXN0aWNrU2hvd24sIHNldFNob3dKb3lzdGlja10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc091dE9mQm91bmRzLCBzZXRJc091dE9mQm91bmRzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NwYW5SZWYsIHNldF0gPSB1c2VUcmFuc2Zvcm0oKTtcbiAgY29uc3Qgam95c3RpY2tlUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBwbGF5Z3JvdW5kUmVmID0gdXNlUmVmKG51bGwpO1xuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChqb3lzdGlja1Nob3duKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHRvcCxcbiAgICAgICAgbGVmdCxcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodFxuICAgICAgfSA9IGpveXN0aWNrZVJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgcGxheWdyb3VuZFJlZi5jdXJyZW50LnN0eWxlLmxlZnQgPSBsZWZ0ICsgd2lkdGggLyAyICsgJ3B4JztcbiAgICAgIHBsYXlncm91bmRSZWYuY3VycmVudC5zdHlsZS50b3AgPSB0b3AgKyBoZWlnaHQgLyAyICsgJ3B4JztcbiAgICB9XG4gIH0sIFtqb3lzdGlja1Nob3duXSk7XG4gIGNvbnN0IHtcbiAgICBrZXlzOiBbdjEsIHYyXSxcbiAgICBqb3lzdGlja1xuICB9ID0gc2V0dGluZ3M7XG4gIGNvbnN0IHlGYWN0b3IgPSBqb3lzdGljayA9PT0gJ2ludmVydFknID8gMSA6IC0xO1xuICBjb25zdCB7XG4gICAgW3YxXToge1xuICAgICAgc3RlcDogc3RlcFYxXG4gICAgfSxcbiAgICBbdjJdOiB7XG4gICAgICBzdGVwOiBzdGVwVjJcbiAgICB9XG4gIH0gPSBzZXR0aW5ncztcbiAgY29uc3Qgd3B4ID0gdXNlVGgoJ3NpemVzJywgJ2pveXN0aWNrV2lkdGgnKTtcbiAgY29uc3QgaHB4ID0gdXNlVGgoJ3NpemVzJywgJ2pveXN0aWNrSGVpZ2h0Jyk7XG4gIGNvbnN0IHcgPSBwYXJzZUZsb2F0KHdweCkgKiAwLjggLyAyO1xuICBjb25zdCBoID0gcGFyc2VGbG9hdChocHgpICogMC44IC8gMjtcbiAgY29uc3Qgc3RhcnRPdXRPZkJvdW5kcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAodGltZW91dC5jdXJyZW50KSByZXR1cm47XG4gICAgc2V0SXNPdXRPZkJvdW5kcyh0cnVlKTtcbiAgICBpZiAob3V0T2ZCb3VuZHNYLmN1cnJlbnQpIHNldCh7XG4gICAgICB4OiBvdXRPZkJvdW5kc1guY3VycmVudCAqIHdcbiAgICB9KTtcbiAgICBpZiAob3V0T2ZCb3VuZHNZLmN1cnJlbnQpIHNldCh7XG4gICAgICB5OiBvdXRPZkJvdW5kc1kuY3VycmVudCAqIC1oXG4gICAgfSk7XG4gICAgdGltZW91dC5jdXJyZW50ID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIG9uVXBkYXRlKHYgPT4ge1xuICAgICAgICBjb25zdCBpbmNYID0gc3RlcFYxICogb3V0T2ZCb3VuZHNYLmN1cnJlbnQgKiBzdGVwTXVsdGlwbGllci5jdXJyZW50O1xuICAgICAgICBjb25zdCBpbmNZID0geUZhY3RvciAqIHN0ZXBWMiAqIG91dE9mQm91bmRzWS5jdXJyZW50ICogc3RlcE11bHRpcGxpZXIuY3VycmVudDtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodikgPyB7XG4gICAgICAgICAgW3YxXTogdlswXSArIGluY1gsXG4gICAgICAgICAgW3YyXTogdlsxXSArIGluY1lcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICBbdjFdOiB2W3YxXSArIGluY1gsXG4gICAgICAgICAgW3YyXTogdlt2Ml0gKyBpbmNZXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9LCAxNik7XG4gIH0sIFt3LCBoLCBvblVwZGF0ZSwgc2V0LCBzdGVwVjEsIHN0ZXBWMiwgdjEsIHYyLCB5RmFjdG9yXSk7XG4gIGNvbnN0IGVuZE91dE9mQm91bmRzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dC5jdXJyZW50KTtcbiAgICB0aW1lb3V0LmN1cnJlbnQgPSB1bmRlZmluZWQ7XG4gICAgc2V0SXNPdXRPZkJvdW5kcyhmYWxzZSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmdW5jdGlvbiBzZXRTdGVwTXVsdGlwbGllcihldmVudCkge1xuICAgICAgc3RlcE11bHRpcGxpZXIuY3VycmVudCA9IG11bHRpcGx5U3RlcChldmVudCk7XG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgc2V0U3RlcE11bHRpcGxpZXIpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHNldFN0ZXBNdWx0aXBsaWVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0LmN1cnJlbnQpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBzZXRTdGVwTXVsdGlwbGllcik7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBzZXRTdGVwTXVsdGlwbGllcik7XG4gICAgfTtcbiAgfSwgW10pO1xuICBjb25zdCBiaW5kID0gdXNlRHJhZygoe1xuICAgIGZpcnN0LFxuICAgIGFjdGl2ZSxcbiAgICBkZWx0YTogW2R4LCBkeV0sXG4gICAgbW92ZW1lbnQ6IFtteCwgbXldXG4gIH0pID0+IHtcbiAgICBpZiAoZmlyc3QpIHNldFNob3dKb3lzdGljayh0cnVlKTtcbiAgICBjb25zdCBfeCA9IGNsYW1wKG14LCAtdywgdyk7XG4gICAgY29uc3QgX3kgPSBjbGFtcChteSwgLWgsIGgpO1xuICAgIG91dE9mQm91bmRzWC5jdXJyZW50ID0gTWF0aC5hYnMobXgpID4gTWF0aC5hYnMoX3gpID8gTWF0aC5zaWduKG14IC0gX3gpIDogMDtcbiAgICBvdXRPZkJvdW5kc1kuY3VycmVudCA9IE1hdGguYWJzKG15KSA+IE1hdGguYWJzKF95KSA/IE1hdGguc2lnbihfeSAtIG15KSA6IDA7XG5cbiAgICBsZXQgbmV3WCA9IHZhbHVlW3YxXTtcbiAgICBsZXQgbmV3WSA9IHZhbHVlW3YyXTtcbiAgICBpZiAoYWN0aXZlKSB7XG4gICAgICBpZiAoIW91dE9mQm91bmRzWC5jdXJyZW50KSB7XG4gICAgICAgIG5ld1ggKz0gZHggKiBzdGVwVjEgKiBzdGVwTXVsdGlwbGllci5jdXJyZW50O1xuICAgICAgICBzZXQoe1xuICAgICAgICAgIHg6IF94XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFvdXRPZkJvdW5kc1kuY3VycmVudCkge1xuICAgICAgICBuZXdZIC09IHlGYWN0b3IgKiBkeSAqIHN0ZXBWMiAqIHN0ZXBNdWx0aXBsaWVyLmN1cnJlbnQ7XG4gICAgICAgIHNldCh7XG4gICAgICAgICAgeTogX3lcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAob3V0T2ZCb3VuZHNYLmN1cnJlbnQgfHwgb3V0T2ZCb3VuZHNZLmN1cnJlbnQpIHN0YXJ0T3V0T2ZCb3VuZHMoKTtlbHNlIGVuZE91dE9mQm91bmRzKCk7XG4gICAgICBvblVwZGF0ZSh7XG4gICAgICAgIFt2MV06IG5ld1gsXG4gICAgICAgIFt2Ml06IG5ld1lcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRTaG93Sm95c3RpY2soZmFsc2UpO1xuICAgICAgb3V0T2ZCb3VuZHNYLmN1cnJlbnQgPSAwO1xuICAgICAgb3V0T2ZCb3VuZHNZLmN1cnJlbnQgPSAwO1xuICAgICAgc2V0KHtcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMFxuICAgICAgfSk7XG4gICAgICBlbmRPdXRPZkJvdW5kcygpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEpveXN0aWNrVHJpZ2dlciwgX2V4dGVuZHMoe1xuICAgIHJlZjogam95c3RpY2tlUmVmXG4gIH0sIGJpbmQoKSksIGpveXN0aWNrU2hvd24gJiYgUmVhY3QuY3JlYXRlRWxlbWVudChQb3J0YWwsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSm95c3RpY2tQbGF5Z3JvdW5kLCB7XG4gICAgcmVmOiBwbGF5Z3JvdW5kUmVmLFxuICAgIGlzT3V0T2ZCb3VuZHM6IGlzT3V0T2ZCb3VuZHNcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgIHJlZjogc3BhblJlZlxuICB9KSkpKTtcbn1cblxuY29uc3QgQ29udGFpbmVyJDEgPSBzdHlsZWQoJ2RpdicsIHtcbiAgZGlzcGxheTogJ2dyaWQnLFxuICBjb2x1bW5HYXA6ICckY29sR2FwJyxcbiAgdmFyaWFudHM6IHtcbiAgICB3aXRoSm95c3RpY2s6IHtcbiAgICAgIHRydWU6IHtcbiAgICAgICAgZ3JpZFRlbXBsYXRlQ29sdW1uczogJyRzaXplcyRyb3dIZWlnaHQgYXV0bydcbiAgICAgIH0sXG4gICAgICBmYWxzZToge1xuICAgICAgICBncmlkVGVtcGxhdGVDb2x1bW5zOiAnYXV0bydcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuZnVuY3Rpb24gVmVjdG9yMmRDb21wb25lbnQoKSB7XG4gIGNvbnN0IHtcbiAgICBsYWJlbCxcbiAgICBkaXNwbGF5VmFsdWUsXG4gICAgb25VcGRhdGUsXG4gICAgc2V0dGluZ3NcbiAgfSA9IHVzZUlucHV0Q29udGV4dCgpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3csIHtcbiAgICBpbnB1dDogdHJ1ZVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KExhYmVsLCBudWxsLCBsYWJlbCksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29udGFpbmVyJDEsIHtcbiAgICB3aXRoSm95c3RpY2s6ICEhc2V0dGluZ3Muam95c3RpY2tcbiAgfSwgc2V0dGluZ3Muam95c3RpY2sgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChKb3lzdGljaywge1xuICAgIHZhbHVlOiBkaXNwbGF5VmFsdWUsXG4gICAgc2V0dGluZ3M6IHNldHRpbmdzLFxuICAgIG9uVXBkYXRlOiBvblVwZGF0ZVxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChWZWN0b3IsIHtcbiAgICB2YWx1ZTogZGlzcGxheVZhbHVlLFxuICAgIHNldHRpbmdzOiBzZXR0aW5ncyxcbiAgICBvblVwZGF0ZTogb25VcGRhdGVcbiAgfSkpKTtcbn1cblxuY29uc3QgX2V4Y2x1ZGVkJDcgPSBbXCJqb3lzdGlja1wiXTtcbmNvbnN0IHBsdWdpbiA9IGdldFZlY3RvclBsdWdpbihbJ3gnLCAneSddKTtcbmNvbnN0IG5vcm1hbGl6ZSQyID0gX3JlZiA9PiB7XG4gIGxldCB7XG4gICAgICBqb3lzdGljayA9IHRydWVcbiAgICB9ID0gX3JlZixcbiAgICBpbnB1dCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQkNyk7XG4gIGNvbnN0IHtcbiAgICB2YWx1ZSxcbiAgICBzZXR0aW5nc1xuICB9ID0gcGx1Z2luLm5vcm1hbGl6ZShpbnB1dCk7XG4gIHJldHVybiB7XG4gICAgdmFsdWUsXG4gICAgc2V0dGluZ3M6IF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBzZXR0aW5ncyksIHt9LCB7XG4gICAgICBqb3lzdGlja1xuICAgIH0pXG4gIH07XG59O1xudmFyIHZlY3RvcjJkID0gY3JlYXRlSW50ZXJuYWxQbHVnaW4oX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe1xuICBjb21wb25lbnQ6IFZlY3RvcjJkQ29tcG9uZW50XG59LCBwbHVnaW4pLCB7fSwge1xuICBub3JtYWxpemU6IG5vcm1hbGl6ZSQyXG59KSk7XG5cbmNvbnN0IHNhbml0aXplJDEgPSB2ID0+IHtcbiAgaWYgKHYgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgaWYgKHYgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKHYpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG4gIGlmICh0eXBlb2YgdiA9PT0gJ3N0cmluZycgJiYgdi5pbmRleE9mKCdibG9iOicpID09PSAwKSByZXR1cm4gdjtcbiAgdGhyb3cgRXJyb3IoYEludmFsaWQgaW1hZ2UgZm9ybWF0IFt1bmRlZmluZWQgfCBibG9iIHzCoEZpbGVdLmApO1xufTtcbmNvbnN0IHNjaGVtYSQxID0gKF9vLCBzKSA9PiB0eXBlb2YgcyA9PT0gJ29iamVjdCcgJiYgJ2ltYWdlJyBpbiBzO1xuY29uc3Qgbm9ybWFsaXplJDEgPSAoe1xuICBpbWFnZVxufSkgPT4ge1xuICByZXR1cm4ge1xuICAgIHZhbHVlOiBpbWFnZVxuICB9O1xufTtcblxudmFyIHByb3BzJDEgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgc2FuaXRpemU6IHNhbml0aXplJDEsXG4gIHNjaGVtYTogc2NoZW1hJDEsXG4gIG5vcm1hbGl6ZTogbm9ybWFsaXplJDFcbn0pO1xuXG5jb25zdCBJbWFnZUNvbnRhaW5lciA9IHN0eWxlZCgnZGl2Jywge1xuICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgZGlzcGxheTogJ2dyaWQnLFxuICBncmlkVGVtcGxhdGVDb2x1bW5zOiAnJHNpemVzJHJvd0hlaWdodCBhdXRvIDIwcHgnLFxuICBjb2x1bW5HYXA6ICckY29sR2FwJyxcbiAgYWxpZ25JdGVtczogJ2NlbnRlcidcbn0pO1xuY29uc3QgRHJvcFpvbmUgPSBzdHlsZWQoJ2RpdicsIHtcbiAgJGZsZXhDZW50ZXI6ICcnLFxuICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gIGhlaWdodDogJyRyb3dIZWlnaHQnLFxuICBiYWNrZ3JvdW5kOiAnJGVsZXZhdGlvbjMnLFxuICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICBjb2xvcjogJ2luaGVyaXQnLFxuICBib3JkZXJSYWRpdXM6ICckc20nLFxuICBvdXRsaW5lOiAnbm9uZScsXG4gIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgY3Vyc29yOiAncG9pbnRlcicsXG4gICRpbnB1dFN0eWxlOiAnJyxcbiAgJGhvdmVyOiAnJyxcbiAgJGZvY3VzV2l0aGluOiAnJyxcbiAgJGFjdGl2ZTogJyRhY2NlbnQxICRlbGV2YXRpb24xJyxcbiAgdmFyaWFudHM6IHtcbiAgICBpc0RyYWdBY2NlcHQ6IHtcbiAgICAgIHRydWU6IHtcbiAgICAgICAgJGlucHV0U3R5bGU6ICckYWNjZW50MScsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyRlbGV2YXRpb24xJ1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5jb25zdCBJbWFnZVByZXZpZXcgPSBzdHlsZWQoJ2RpdicsIHtcbiAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gIGJvcmRlclJhZGl1czogJyRzbScsXG4gIGhlaWdodDogJyRyb3dIZWlnaHQnLFxuICB3aWR0aDogJyRyb3dIZWlnaHQnLFxuICAkaW5wdXRTdHlsZTogJycsXG4gIGJhY2tncm91bmRTaXplOiAnY292ZXInLFxuICBiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXInLFxuICB2YXJpYW50czoge1xuICAgIGhhc0ltYWdlOiB7XG4gICAgICB0cnVlOiB7XG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICAkaG92ZXI6ICcnLFxuICAgICAgICAkYWN0aXZlOiAnJ1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5jb25zdCBJbWFnZUxhcmdlUHJldmlldyA9IHN0eWxlZCgnZGl2Jywge1xuICAkZmxleENlbnRlcjogJycsXG4gIHdpZHRoOiAnJGltYWdlUHJldmlld1dpZHRoJyxcbiAgaGVpZ2h0OiAnJGltYWdlUHJldmlld0hlaWdodCcsXG4gIGJvcmRlclJhZGl1czogJyRzbScsXG4gIGJveFNoYWRvdzogJyRsZXZlbDInLFxuICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICRpbnB1dFN0eWxlOiAnJyxcbiAgYmFja2dyb3VuZFNpemU6ICdjb3ZlcicsXG4gIGJhY2tncm91bmRQb3NpdGlvbjogJ2NlbnRlcidcbn0pO1xuY29uc3QgSW5zdHJ1Y3Rpb25zID0gc3R5bGVkKCdkaXYnLCB7XG4gIGZvbnRTaXplOiAnMC44ZW0nLFxuICBoZWlnaHQ6ICcxMDAlJyxcbiAgcGFkZGluZzogJyRyb3dHYXAgJG1kJ1xufSk7XG5jb25zdCBSZW1vdmUgPSBzdHlsZWQoJ2RpdicsIHtcbiAgJGZsZXhDZW50ZXI6ICcnLFxuICB0b3A6ICcwJyxcbiAgcmlnaHQ6ICcwJyxcbiAgbWFyZ2luUmlnaHQ6ICckc20nLFxuICBoZWlnaHQ6ICcxMDAlJyxcbiAgY3Vyc29yOiAncG9pbnRlcicsXG4gIHZhcmlhbnRzOiB7XG4gICAgZGlzYWJsZWQ6IHtcbiAgICAgIHRydWU6IHtcbiAgICAgICAgY29sb3I6ICckZWxldmF0aW9uMycsXG4gICAgICAgIGN1cnNvcjogJ2RlZmF1bHQnXG4gICAgICB9XG4gICAgfVxuICB9LFxuICAnJjo6YWZ0ZXIsJjo6YmVmb3JlJzoge1xuICAgIGNvbnRlbnQ6ICdcIlwiJyxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBoZWlnaHQ6IDIsXG4gICAgd2lkdGg6IDEwLFxuICAgIGJvcmRlclJhZGl1czogMSxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICdjdXJyZW50Q29sb3InXG4gIH0sXG4gICcmOjphZnRlcic6IHtcbiAgICB0cmFuc2Zvcm06ICdyb3RhdGUoNDVkZWcpJ1xuICB9LFxuICAnJjo6YmVmb3JlJzoge1xuICAgIHRyYW5zZm9ybTogJ3JvdGF0ZSgtNDVkZWcpJ1xuICB9XG59KTtcblxuZnVuY3Rpb24gSW1hZ2VDb21wb25lbnQoKSB7XG4gIGNvbnN0IHtcbiAgICBsYWJlbCxcbiAgICB2YWx1ZSxcbiAgICBvblVwZGF0ZSxcbiAgICBkaXNhYmxlZFxuICB9ID0gdXNlSW5wdXRDb250ZXh0KCk7XG4gIGNvbnN0IHtcbiAgICBwb3BpblJlZixcbiAgICB3cmFwcGVyUmVmLFxuICAgIHNob3duLFxuICAgIHNob3csXG4gICAgaGlkZVxuICB9ID0gdXNlUG9waW4oKTtcbiAgY29uc3Qgb25Ecm9wID0gdXNlQ2FsbGJhY2soYWNjZXB0ZWRGaWxlcyA9PiB7XG4gICAgaWYgKGFjY2VwdGVkRmlsZXMubGVuZ3RoKSBvblVwZGF0ZShhY2NlcHRlZEZpbGVzWzBdKTtcbiAgfSwgW29uVXBkYXRlXSk7XG4gIGNvbnN0IGNsZWFyID0gdXNlQ2FsbGJhY2soZSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBvblVwZGF0ZSh1bmRlZmluZWQpO1xuICB9LCBbb25VcGRhdGVdKTtcbiAgY29uc3Qge1xuICAgIGdldFJvb3RQcm9wcyxcbiAgICBnZXRJbnB1dFByb3BzLFxuICAgIGlzRHJhZ0FjY2VwdFxuICB9ID0gdXNlRHJvcHpvbmUoe1xuICAgIG1heEZpbGVzOiAxLFxuICAgIGFjY2VwdDogJ2ltYWdlLyonLFxuICAgIG9uRHJvcCxcbiAgICBkaXNhYmxlZFxuICB9KTtcblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3csIHtcbiAgICBpbnB1dDogdHJ1ZVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KExhYmVsLCBudWxsLCBsYWJlbCksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW1hZ2VDb250YWluZXIsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW1hZ2VQcmV2aWV3LCB7XG4gICAgcmVmOiBwb3BpblJlZixcbiAgICBoYXNJbWFnZTogISF2YWx1ZSxcbiAgICBvblBvaW50ZXJEb3duOiAoKSA9PiAhIXZhbHVlICYmIHNob3coKSxcbiAgICBvblBvaW50ZXJVcDogaGlkZSxcbiAgICBzdHlsZToge1xuICAgICAgYmFja2dyb3VuZEltYWdlOiB2YWx1ZSA/IGB1cmwoJHt2YWx1ZX0pYCA6ICdub25lJ1xuICAgIH1cbiAgfSksIHNob3duICYmICEhdmFsdWUgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChQb3J0YWwsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcmxheSwge1xuICAgIG9uUG9pbnRlclVwOiBoaWRlLFxuICAgIHN0eWxlOiB7XG4gICAgICBjdXJzb3I6ICdwb2ludGVyJ1xuICAgIH1cbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW1hZ2VMYXJnZVByZXZpZXcsIHtcbiAgICByZWY6IHdyYXBwZXJSZWYsXG4gICAgc3R5bGU6IHtcbiAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybCgke3ZhbHVlfSlgXG4gICAgfVxuICB9KSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcFpvbmUsIGdldFJvb3RQcm9wcyh7XG4gICAgaXNEcmFnQWNjZXB0XG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgZ2V0SW5wdXRQcm9wcygpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChJbnN0cnVjdGlvbnMsIG51bGwsIGlzRHJhZ0FjY2VwdCA/ICdkcm9wIGltYWdlJyA6ICdjbGljayBvciBkcm9wJykpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFJlbW92ZSwge1xuICAgIG9uQ2xpY2s6IGNsZWFyLFxuICAgIGRpc2FibGVkOiAhdmFsdWVcbiAgfSkpKTtcbn1cblxudmFyIGltYWdlID0gY3JlYXRlSW50ZXJuYWxQbHVnaW4oX29iamVjdFNwcmVhZDIoe1xuICBjb21wb25lbnQ6IEltYWdlQ29tcG9uZW50XG59LCBwcm9wcyQxKSk7XG5cbmNvbnN0IG51bWJlciA9IHY4bigpLm51bWJlcigpO1xuY29uc3Qgc2NoZW1hID0gKG8sIHMpID0+IHY4bigpLmFycmF5KCkubGVuZ3RoKDIpLmV2ZXJ5Lm51bWJlcigpLnRlc3QobykgJiYgdjhuKCkuc2NoZW1hKHtcbiAgbWluOiBudW1iZXIsXG4gIG1heDogbnVtYmVyXG59KS50ZXN0KHMpO1xuY29uc3QgZm9ybWF0ID0gdiA9PiAoe1xuICBtaW46IHZbMF0sXG4gIG1heDogdlsxXVxufSk7XG5jb25zdCBzYW5pdGl6ZSA9ICh2YWx1ZSwge1xuICBib3VuZHM6IFtNSU4sIE1BWF1cbn0sIHByZXZWYWx1ZSkgPT4ge1xuICBjb25zdCBfdmFsdWUgPSBBcnJheS5pc0FycmF5KHZhbHVlKSA/IGZvcm1hdCh2YWx1ZSkgOiB2YWx1ZTtcbiAgY29uc3QgX25ld1ZhbHVlID0ge1xuICAgIG1pbjogcHJldlZhbHVlWzBdLFxuICAgIG1heDogcHJldlZhbHVlWzFdXG4gIH07XG4gIGNvbnN0IHtcbiAgICBtaW4sXG4gICAgbWF4XG4gIH0gPSBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgX25ld1ZhbHVlKSwgX3ZhbHVlKTtcbiAgcmV0dXJuIFtjbGFtcChOdW1iZXIobWluKSwgTUlOLCBNYXRoLm1heChNSU4sIG1heCkpLCBjbGFtcChOdW1iZXIobWF4KSwgTWF0aC5taW4oTUFYLCBtaW4pLCBNQVgpXTtcbn07XG5jb25zdCBub3JtYWxpemUgPSAoe1xuICB2YWx1ZSxcbiAgbWluLFxuICBtYXhcbn0pID0+IHtcbiAgY29uc3QgYm91bmRzU2V0dGluZ3MgPSB7XG4gICAgbWluLFxuICAgIG1heFxuICB9O1xuICBjb25zdCBfc2V0dGluZ3MgPSBub3JtYWxpemVLZXllZE51bWJlclNldHRpbmdzKGZvcm1hdCh2YWx1ZSksIHtcbiAgICBtaW46IGJvdW5kc1NldHRpbmdzLFxuICAgIG1heDogYm91bmRzU2V0dGluZ3NcbiAgfSk7XG4gIGNvbnN0IGJvdW5kcyA9IFttaW4sIG1heF07XG4gIGNvbnN0IHNldHRpbmdzID0gX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIF9zZXR0aW5ncyksIHt9LCB7XG4gICAgYm91bmRzXG4gIH0pO1xuXG4gIGNvbnN0IF92YWx1ZSA9IHNhbml0aXplKGZvcm1hdCh2YWx1ZSksIHNldHRpbmdzLCB2YWx1ZSk7XG4gIHJldHVybiB7XG4gICAgdmFsdWU6IF92YWx1ZSxcbiAgICBzZXR0aW5nc1xuICB9O1xufTtcblxudmFyIHByb3BzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIHNjaGVtYTogc2NoZW1hLFxuICBmb3JtYXQ6IGZvcm1hdCxcbiAgc2FuaXRpemU6IHNhbml0aXplLFxuICBub3JtYWxpemU6IG5vcm1hbGl6ZVxufSk7XG5cbmNvbnN0IF9leGNsdWRlZCQ2ID0gW1widmFsdWVcIiwgXCJib3VuZHNcIiwgXCJvbkRyYWdcIl0sXG4gIF9leGNsdWRlZDIkMSA9IFtcImJvdW5kc1wiXTtcbmNvbnN0IENvbnRhaW5lciA9IHN0eWxlZCgnZGl2Jywge1xuICBkaXNwbGF5OiAnZ3JpZCcsXG4gIGNvbHVtbkdhcDogJyRjb2xHYXAnLFxuICBncmlkVGVtcGxhdGVDb2x1bW5zOiAnYXV0byBjYWxjKCRzaXplcyRudW1iZXJJbnB1dE1pbldpZHRoICogMiArICRzcGFjZSRyb3dHYXApJ1xufSk7XG5mdW5jdGlvbiBJbnRlcnZhbFNsaWRlcihfcmVmKSB7XG4gIGxldCB7XG4gICAgICB2YWx1ZSxcbiAgICAgIGJvdW5kczogW21pbiwgbWF4XSxcbiAgICAgIG9uRHJhZ1xuICAgIH0gPSBfcmVmLFxuICAgIHNldHRpbmdzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIF9leGNsdWRlZCQ2KTtcbiAgY29uc3QgcmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBtaW5TY3J1YmJlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgbWF4U2NydWJiZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHJhbmdlV2lkdGggPSB1c2VSZWYoMCk7XG4gIGNvbnN0IHNjcnViYmVyV2lkdGggPSB1c2VUaCgnc2l6ZXMnLCAnc2NydWJiZXJXaWR0aCcpO1xuICBjb25zdCBiaW5kID0gdXNlRHJhZygoe1xuICAgIGV2ZW50LFxuICAgIGZpcnN0LFxuICAgIHh5OiBbeF0sXG4gICAgbW92ZW1lbnQ6IFtteF0sXG4gICAgbWVtbzogX21lbW8gPSB7fVxuICB9KSA9PiB7XG4gICAgaWYgKGZpcnN0KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHdpZHRoLFxuICAgICAgICBsZWZ0XG4gICAgICB9ID0gcmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICByYW5nZVdpZHRoLmN1cnJlbnQgPSB3aWR0aCAtIHBhcnNlRmxvYXQoc2NydWJiZXJXaWR0aCk7XG4gICAgICBjb25zdCB0YXJnZXRJc1NjcnViID0gKGV2ZW50ID09PSBudWxsIHx8IGV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBldmVudC50YXJnZXQpID09PSBtaW5TY3J1YmJlclJlZi5jdXJyZW50IHx8IChldmVudCA9PT0gbnVsbCB8fCBldmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXZlbnQudGFyZ2V0KSA9PT0gbWF4U2NydWJiZXJSZWYuY3VycmVudDtcbiAgICAgIF9tZW1vLnBvcyA9IGludmVydGVkUmFuZ2UoKHggLSBsZWZ0KSAvIHdpZHRoLCBtaW4sIG1heCk7XG4gICAgICBjb25zdCBkZWx0YSA9IE1hdGguYWJzKF9tZW1vLnBvcyAtIHZhbHVlLm1pbikgLSBNYXRoLmFicyhfbWVtby5wb3MgLSB2YWx1ZS5tYXgpO1xuICAgICAgX21lbW8ua2V5ID0gZGVsdGEgPCAwIHx8IGRlbHRhID09PSAwICYmIF9tZW1vLnBvcyA8PSB2YWx1ZS5taW4gPyAnbWluJyA6ICdtYXgnO1xuICAgICAgaWYgKHRhcmdldElzU2NydWIpIF9tZW1vLnBvcyA9IHZhbHVlW19tZW1vLmtleV07XG4gICAgfVxuICAgIGNvbnN0IG5ld1ZhbHVlID0gX21lbW8ucG9zICsgaW52ZXJ0ZWRSYW5nZShteCAvIHJhbmdlV2lkdGguY3VycmVudCwgMCwgbWF4IC0gbWluKTtcbiAgICBvbkRyYWcoe1xuICAgICAgW19tZW1vLmtleV06IHNhbml0aXplU3RlcChuZXdWYWx1ZSwgc2V0dGluZ3NbX21lbW8ua2V5XSlcbiAgICB9KTtcbiAgICByZXR1cm4gX21lbW87XG4gIH0pO1xuICBjb25zdCBtaW5TdHlsZSA9IGBjYWxjKCR7cmFuZ2UodmFsdWUubWluLCBtaW4sIG1heCl9ICogKDEwMCUgLSAke3NjcnViYmVyV2lkdGh9IC0gOHB4KSArIDRweClgO1xuICBjb25zdCBtYXhTdHlsZSA9IGBjYWxjKCR7MSAtIHJhbmdlKHZhbHVlLm1heCwgbWluLCBtYXgpfSAqICgxMDAlIC0gJHtzY3J1YmJlcldpZHRofSAtIDhweCkgKyA0cHgpYDtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmFuZ2VXcmFwcGVyLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiByZWZcbiAgfSwgYmluZCgpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChSYW5nZSwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChJbmRpY2F0b3IsIHtcbiAgICBzdHlsZToge1xuICAgICAgbGVmdDogbWluU3R5bGUsXG4gICAgICByaWdodDogbWF4U3R5bGVcbiAgICB9XG4gIH0pKSwgUmVhY3QuY3JlYXRlRWxlbWVudChTY3J1YmJlciwge1xuICAgIHBvc2l0aW9uOiBcImxlZnRcIixcbiAgICByZWY6IG1pblNjcnViYmVyUmVmLFxuICAgIHN0eWxlOiB7XG4gICAgICBsZWZ0OiBtaW5TdHlsZVxuICAgIH1cbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2NydWJiZXIsIHtcbiAgICBwb3NpdGlvbjogXCJyaWdodFwiLFxuICAgIHJlZjogbWF4U2NydWJiZXJSZWYsXG4gICAgc3R5bGU6IHtcbiAgICAgIHJpZ2h0OiBtYXhTdHlsZVxuICAgIH1cbiAgfSkpO1xufVxuZnVuY3Rpb24gSW50ZXJ2YWxDb21wb25lbnQoKSB7XG4gIGNvbnN0IHtcbiAgICBsYWJlbCxcbiAgICBkaXNwbGF5VmFsdWUsXG4gICAgb25VcGRhdGUsXG4gICAgc2V0dGluZ3NcbiAgfSA9IHVzZUlucHV0Q29udGV4dCgpO1xuICBjb25zdCBfc2V0dGluZ3MgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc2V0dGluZ3MsIF9leGNsdWRlZDIkMSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdywge1xuICAgIGlucHV0OiB0cnVlXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGFiZWwsIG51bGwsIGxhYmVsKSwgUmVhY3QuY3JlYXRlRWxlbWVudChDb250YWluZXIsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW50ZXJ2YWxTbGlkZXIsIF9leHRlbmRzKHtcbiAgICB2YWx1ZTogZGlzcGxheVZhbHVlXG4gIH0sIHNldHRpbmdzLCB7XG4gICAgb25EcmFnOiBvblVwZGF0ZVxuICB9KSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVmVjdG9yLCB7XG4gICAgdmFsdWU6IGRpc3BsYXlWYWx1ZSxcbiAgICBzZXR0aW5nczogX3NldHRpbmdzLFxuICAgIG9uVXBkYXRlOiBvblVwZGF0ZSxcbiAgICBpbm5lckxhYmVsVHJpbTogMFxuICB9KSkpKTtcbn1cblxudmFyIGludGVydmFsID0gY3JlYXRlSW50ZXJuYWxQbHVnaW4oX29iamVjdFNwcmVhZDIoe1xuICBjb21wb25lbnQ6IEludGVydmFsQ29tcG9uZW50XG59LCBwcm9wcykpO1xuXG5jb25zdCBjcmVhdGVFdmVudEVtaXR0ZXIgPSAoKSA9PiB7XG4gIGNvbnN0IGxpc3RlbmVyTWFwcGluZyA9IG5ldyBNYXAoKTtcbiAgcmV0dXJuIHtcbiAgICBvbjogKHRvcGljLCBsaXN0ZW5lcikgPT4ge1xuICAgICAgbGV0IGxpc3RlbmVycyA9IGxpc3RlbmVyTWFwcGluZy5nZXQodG9waWMpO1xuICAgICAgaWYgKGxpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxpc3RlbmVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgbGlzdGVuZXJNYXBwaW5nLnNldCh0b3BpYywgbGlzdGVuZXJzKTtcbiAgICAgIH1cbiAgICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgIH0sXG4gICAgb2ZmOiAodG9waWMsIGxpc3RlbmVyKSA9PiB7XG4gICAgICBjb25zdCBsaXN0ZW5lcnMgPSBsaXN0ZW5lck1hcHBpbmcuZ2V0KHRvcGljKTtcbiAgICAgIGlmIChsaXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICAgIGlmIChsaXN0ZW5lcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICBsaXN0ZW5lck1hcHBpbmcuZGVsZXRlKHRvcGljKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVtaXQ6ICh0b3BpYywgLi4uYXJncykgPT4ge1xuICAgICAgY29uc3QgbGlzdGVuZXJzID0gbGlzdGVuZXJNYXBwaW5nLmdldCh0b3BpYyk7XG4gICAgICBpZiAobGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgbGlzdGVuZXIoLi4uYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuY29uc3QgX2V4Y2x1ZGVkJDUgPSBbXCJ0eXBlXCIsIFwidmFsdWVcIl0sXG4gIF9leGNsdWRlZDIgPSBbXCJvbkNoYW5nZVwiLCBcInRyYW5zaWVudFwiLCBcIm9uRWRpdFN0YXJ0XCIsIFwib25FZGl0RW5kXCJdO1xuY29uc3QgU3RvcmUgPSBmdW5jdGlvbiBTdG9yZSgpIHtcbiAgY29uc3Qgc3RvcmUgPSBjcmVhdGUoc3Vic2NyaWJlV2l0aFNlbGVjdG9yKCgpID0+ICh7XG4gICAgZGF0YToge31cbiAgfSkpKTtcbiAgY29uc3QgZXZlbnRFbWl0dGVyID0gY3JlYXRlRXZlbnRFbWl0dGVyKCk7XG4gIHRoaXMuc3RvcmVJZCA9IGdldFVpZCgpO1xuICB0aGlzLnVzZVN0b3JlID0gc3RvcmU7XG4gIGNvbnN0IGZvbGRlcnMgPSB7fTtcblxuICBjb25zdCBvcmRlcmVkUGF0aHMgPSBuZXcgU2V0KCk7XG5cbiAgdGhpcy5nZXRWaXNpYmxlUGF0aHMgPSAoKSA9PiB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0RGF0YSgpO1xuICAgIGNvbnN0IHBhdGhzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgY29uc3QgaGlkZGVuRm9sZGVycyA9IFtdO1xuICAgIE9iamVjdC5lbnRyaWVzKGZvbGRlcnMpLmZvckVhY2goKFtwYXRoLCBzZXR0aW5nc10pID0+IHtcbiAgICAgIGlmIChcbiAgICAgIHNldHRpbmdzLnJlbmRlciAmJlxuICAgICAgcGF0aHMuc29tZShwID0+IHAuaW5kZXhPZihwYXRoKSA9PT0gMCkgJiZcbiAgICAgICFzZXR0aW5ncy5yZW5kZXIodGhpcy5nZXQpKVxuICAgICAgICBoaWRkZW5Gb2xkZXJzLnB1c2gocGF0aCArICcuJyk7XG4gICAgfSk7XG4gICAgY29uc3QgdmlzaWJsZVBhdGhzID0gW107XG4gICAgb3JkZXJlZFBhdGhzLmZvckVhY2gocGF0aCA9PiB7XG4gICAgICBpZiAocGF0aCBpbiBkYXRhICYmXG4gICAgICBkYXRhW3BhdGhdLl9fcmVmQ291bnQgPiAwICYmXG4gICAgICBoaWRkZW5Gb2xkZXJzLmV2ZXJ5KHAgPT4gcGF0aC5pbmRleE9mKHApID09PSAtMSkgJiYgKFxuICAgICAgIWRhdGFbcGF0aF0ucmVuZGVyIHx8IGRhdGFbcGF0aF0ucmVuZGVyKHRoaXMuZ2V0KSkpIHtcbiAgICAgICAgdmlzaWJsZVBhdGhzLnB1c2gocGF0aCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHZpc2libGVQYXRocztcbiAgfTtcblxuICB0aGlzLnNldE9yZGVyZWRQYXRocyA9IG5ld1BhdGhzID0+IHtcbiAgICBuZXdQYXRocy5mb3JFYWNoKHAgPT4gb3JkZXJlZFBhdGhzLmFkZChwKSk7XG4gIH07XG4gIHRoaXMub3JkZXJQYXRocyA9IHBhdGhzID0+IHtcbiAgICB0aGlzLnNldE9yZGVyZWRQYXRocyhwYXRocyk7XG4gICAgcmV0dXJuIHBhdGhzO1xuICB9O1xuXG4gIHRoaXMuZGlzcG9zZVBhdGhzID0gcGF0aHMgPT4ge1xuICAgIHN0b3JlLnNldFN0YXRlKHMgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHMuZGF0YTtcbiAgICAgIHBhdGhzLmZvckVhY2gocGF0aCA9PiB7XG4gICAgICAgIGlmIChwYXRoIGluIGRhdGEpIHtcbiAgICAgICAgICBjb25zdCBpbnB1dCA9IGRhdGFbcGF0aF07XG4gICAgICAgICAgaW5wdXQuX19yZWZDb3VudC0tO1xuICAgICAgICAgIGlmIChpbnB1dC5fX3JlZkNvdW50ID09PSAwICYmIGlucHV0LnR5cGUgaW4gU3BlY2lhbElucHV0cykge1xuICAgICAgICAgICAgZGVsZXRlIGRhdGFbcGF0aF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGFcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG4gIHRoaXMuZGlzcG9zZSA9ICgpID0+IHtcbiAgICBzdG9yZS5zZXRTdGF0ZSgoKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiB7fVxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcbiAgdGhpcy5nZXRGb2xkZXJTZXR0aW5ncyA9IHBhdGggPT4ge1xuICAgIHJldHVybiBmb2xkZXJzW3BhdGhdIHx8IHt9O1xuICB9O1xuXG4gIHRoaXMuZ2V0RGF0YSA9ICgpID0+IHtcbiAgICByZXR1cm4gc3RvcmUuZ2V0U3RhdGUoKS5kYXRhO1xuICB9O1xuXG4gIHRoaXMuYWRkRGF0YSA9IChuZXdEYXRhLCBvdmVycmlkZSkgPT4ge1xuICAgIHN0b3JlLnNldFN0YXRlKHMgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHMuZGF0YTtcbiAgICAgIE9iamVjdC5lbnRyaWVzKG5ld0RhdGEpLmZvckVhY2goKFtwYXRoLCBuZXdJbnB1dERhdGFdKSA9PiB7XG4gICAgICAgIGxldCBpbnB1dCA9IGRhdGFbcGF0aF07XG5cbiAgICAgICAgaWYgKCEhaW5wdXQpIHtcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICB9ID0gbmV3SW5wdXREYXRhLFxuICAgICAgICAgICAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhuZXdJbnB1dERhdGEsIF9leGNsdWRlZCQ1KTtcbiAgICAgICAgICBpZiAodHlwZSAhPT0gaW5wdXQudHlwZSkge1xuICAgICAgICAgICAgd2FybihMZXZhRXJyb3JzLklOUFVUX1RZUEVfT1ZFUlJJREUsIHR5cGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuX19yZWZDb3VudCA9PT0gMCB8fCBvdmVycmlkZSkge1xuICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGlucHV0LCByZXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0Ll9fcmVmQ291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF0YVtwYXRoXSA9IF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBuZXdJbnB1dERhdGEpLCB7fSwge1xuICAgICAgICAgICAgX19yZWZDb3VudDogMVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YVxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLnNldFZhbHVlQXRQYXRoID0gKHBhdGgsIHZhbHVlLCBmcm9tUGFuZWwpID0+IHtcbiAgICBzdG9yZS5zZXRTdGF0ZShzID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBzLmRhdGE7XG4gICAgICB1cGRhdGVJbnB1dChkYXRhW3BhdGhdLCB2YWx1ZSwgcGF0aCwgdGhpcywgZnJvbVBhbmVsKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGFcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG4gIHRoaXMuc2V0U2V0dGluZ3NBdFBhdGggPSAocGF0aCwgc2V0dGluZ3MpID0+IHtcbiAgICBzdG9yZS5zZXRTdGF0ZShzID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBzLmRhdGE7XG4gICAgICBkYXRhW3BhdGhdLnNldHRpbmdzID0gX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIGRhdGFbcGF0aF0uc2V0dGluZ3MpLCBzZXR0aW5ncyk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhXG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuICB0aGlzLmRpc2FibGVJbnB1dEF0UGF0aCA9IChwYXRoLCBmbGFnKSA9PiB7XG4gICAgc3RvcmUuc2V0U3RhdGUocyA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gcy5kYXRhO1xuICAgICAgZGF0YVtwYXRoXS5kaXNhYmxlZCA9IGZsYWc7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhXG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuICB0aGlzLnNldCA9ICh2YWx1ZXMsIGZyb21QYW5lbCkgPT4ge1xuICAgIHN0b3JlLnNldFN0YXRlKHMgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHMuZGF0YTtcbiAgICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlcykuZm9yRWFjaCgoW3BhdGgsIHZhbHVlXSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHVwZGF0ZUlucHV0KGRhdGFbcGF0aF0sIHZhbHVlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZnJvbVBhbmVsKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbVGhpcyBtZXNzYWdlIHdpbGwgb25seSBzaG93IGluIGRldmVsb3BtZW50XTogXFxgc2V0XFxgIGZvciBwYXRoICR7cGF0aH0gaGFzIGZhaWxlZC5gLCBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YVxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcbiAgdGhpcy5nZXRJbnB1dCA9IHBhdGggPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXREYXRhKClbcGF0aF07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgd2FybihMZXZhRXJyb3JzLlBBVEhfRE9FU05UX0VYSVNULCBwYXRoKTtcbiAgICB9XG4gIH07XG4gIHRoaXMuZ2V0ID0gcGF0aCA9PiB7XG4gICAgdmFyIF90aGlzJGdldElucHV0O1xuICAgIHJldHVybiAoX3RoaXMkZ2V0SW5wdXQgPSB0aGlzLmdldElucHV0KHBhdGgpKSA9PT0gbnVsbCB8fCBfdGhpcyRnZXRJbnB1dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkZ2V0SW5wdXQudmFsdWU7XG4gIH07XG4gIHRoaXMuZW1pdE9uRWRpdFN0YXJ0ID0gcGF0aCA9PiB7XG4gICAgZXZlbnRFbWl0dGVyLmVtaXQoYG9uRWRpdFN0YXJ0OiR7cGF0aH1gLCB0aGlzLmdldChwYXRoKSwgcGF0aCwgX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIHRoaXMuZ2V0SW5wdXQocGF0aCkpLCB7fSwge1xuICAgICAgZ2V0OiB0aGlzLmdldFxuICAgIH0pKTtcbiAgfTtcbiAgdGhpcy5lbWl0T25FZGl0RW5kID0gcGF0aCA9PiB7XG4gICAgZXZlbnRFbWl0dGVyLmVtaXQoYG9uRWRpdEVuZDoke3BhdGh9YCwgdGhpcy5nZXQocGF0aCksIHBhdGgsIF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCB0aGlzLmdldElucHV0KHBhdGgpKSwge30sIHtcbiAgICAgIGdldDogdGhpcy5nZXRcbiAgICB9KSk7XG4gIH07XG4gIHRoaXMuc3Vic2NyaWJlVG9FZGl0U3RhcnQgPSAocGF0aCwgbGlzdGVuZXIpID0+IHtcbiAgICBjb25zdCBfcGF0aCA9IGBvbkVkaXRTdGFydDoke3BhdGh9YDtcbiAgICBldmVudEVtaXR0ZXIub24oX3BhdGgsIGxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4gZXZlbnRFbWl0dGVyLm9mZihfcGF0aCwgbGlzdGVuZXIpO1xuICB9O1xuICB0aGlzLnN1YnNjcmliZVRvRWRpdEVuZCA9IChwYXRoLCBsaXN0ZW5lcikgPT4ge1xuICAgIGNvbnN0IF9wYXRoID0gYG9uRWRpdEVuZDoke3BhdGh9YDtcbiAgICBldmVudEVtaXR0ZXIub24oX3BhdGgsIGxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4gZXZlbnRFbWl0dGVyLm9mZihfcGF0aCwgbGlzdGVuZXIpO1xuICB9O1xuXG4gIGNvbnN0IF9nZXREYXRhRnJvbVNjaGVtYSA9IChzY2hlbWEsIHJvb3RQYXRoLCBtYXBwZWRQYXRocykgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSB7fTtcbiAgICBPYmplY3QuZW50cmllcyhzY2hlbWEpLmZvckVhY2goKFtrZXksIHJhd0lucHV0XSkgPT4ge1xuICAgICAgaWYgKGtleSA9PT0gJycpIHJldHVybiB3YXJuKExldmFFcnJvcnMuRU1QVFlfS0VZKTtcbiAgICAgIGxldCBuZXdQYXRoID0gam9pbihyb290UGF0aCwga2V5KTtcblxuICAgICAgaWYgKHJhd0lucHV0LnR5cGUgPT09IFNwZWNpYWxJbnB1dHMuRk9MREVSKSB7XG4gICAgICAgIGNvbnN0IG5ld0RhdGEgPSBfZ2V0RGF0YUZyb21TY2hlbWEocmF3SW5wdXQuc2NoZW1hLCBuZXdQYXRoLCBtYXBwZWRQYXRocyk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oZGF0YSwgbmV3RGF0YSk7XG5cbiAgICAgICAgaWYgKCEobmV3UGF0aCBpbiBmb2xkZXJzKSkgZm9sZGVyc1tuZXdQYXRoXSA9IHJhd0lucHV0LnNldHRpbmdzO1xuICAgICAgfSBlbHNlIGlmIChrZXkgaW4gbWFwcGVkUGF0aHMpIHtcbiAgICAgICAgd2FybihMZXZhRXJyb3JzLkRVUExJQ0FURV9LRVlTLCBrZXksIG5ld1BhdGgsIG1hcHBlZFBhdGhzW2tleV0ucGF0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkSW5wdXQgPSBub3JtYWxpemVJbnB1dChyYXdJbnB1dCwga2V5LCBuZXdQYXRoLCBkYXRhKTtcbiAgICAgICAgaWYgKG5vcm1hbGl6ZWRJbnB1dCkge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgaW5wdXRcbiAgICAgICAgICB9ID0gbm9ybWFsaXplZElucHV0O1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgb25DaGFuZ2UsXG4gICAgICAgICAgICAgIHRyYW5zaWVudCxcbiAgICAgICAgICAgICAgb25FZGl0U3RhcnQsXG4gICAgICAgICAgICAgIG9uRWRpdEVuZFxuICAgICAgICAgICAgfSA9IG9wdGlvbnMsXG4gICAgICAgICAgICBfb3B0aW9ucyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvcHRpb25zLCBfZXhjbHVkZWQyKTtcbiAgICAgICAgICBkYXRhW25ld1BhdGhdID0gX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe1xuICAgICAgICAgICAgdHlwZVxuICAgICAgICAgIH0sIF9vcHRpb25zKSwgaW5wdXQpLCB7fSwge1xuICAgICAgICAgICAgZnJvbVBhbmVsOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbWFwcGVkUGF0aHNba2V5XSA9IHtcbiAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsXG4gICAgICAgICAgICBvbkNoYW5nZSxcbiAgICAgICAgICAgIHRyYW5zaWVudCxcbiAgICAgICAgICAgIG9uRWRpdFN0YXJ0LFxuICAgICAgICAgICAgb25FZGl0RW5kXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3YXJuKExldmFFcnJvcnMuVU5LTk9XTl9JTlBVVCwgbmV3UGF0aCwgcmF3SW5wdXQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG4gIHRoaXMuZ2V0RGF0YUZyb21TY2hlbWEgPSBzY2hlbWEgPT4ge1xuICAgIGNvbnN0IG1hcHBlZFBhdGhzID0ge307XG4gICAgY29uc3QgZGF0YSA9IF9nZXREYXRhRnJvbVNjaGVtYShzY2hlbWEsICcnLCBtYXBwZWRQYXRocyk7XG4gICAgcmV0dXJuIFtkYXRhLCBtYXBwZWRQYXRoc107XG4gIH07XG59O1xuY29uc3QgbGV2YVN0b3JlID0gbmV3IFN0b3JlKCk7XG5mdW5jdGlvbiB1c2VDcmVhdGVTdG9yZSgpIHtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gbmV3IFN0b3JlKCksIFtdKTtcbn1cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cuX19TVE9SRSA9IGxldmFTdG9yZTtcbn1cblxuY29uc3QgZGVmYXVsdFNldHRpbmdzJDIgPSB7XG4gIGNvbGxhcHNlZDogZmFsc2Vcbn07XG5mdW5jdGlvbiBmb2xkZXIoc2NoZW1hLCBzZXR0aW5ncykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFNwZWNpYWxJbnB1dHMuRk9MREVSLFxuICAgIHNjaGVtYSxcbiAgICBzZXR0aW5nczogX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRTZXR0aW5ncyQyKSwgc2V0dGluZ3MpXG4gIH07XG59XG5cbmNvbnN0IGRlZmF1bHRTZXR0aW5ncyQxID0ge1xuICBkaXNhYmxlZDogZmFsc2Vcbn07XG5cbmZ1bmN0aW9uIGJ1dHRvbihvbkNsaWNrLCBzZXR0aW5ncykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFNwZWNpYWxJbnB1dHMuQlVUVE9OLFxuICAgIG9uQ2xpY2ssXG4gICAgc2V0dGluZ3M6IF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBkZWZhdWx0U2V0dGluZ3MkMSksIHNldHRpbmdzKVxuICB9O1xufVxuXG5mdW5jdGlvbiBidXR0b25Hcm91cChvcHRzKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogU3BlY2lhbElucHV0cy5CVVRUT05fR1JPVVAsXG4gICAgb3B0c1xuICB9O1xufVxuXG5jb25zdCBkZWZhdWx0U2V0dGluZ3MgPSB7XG4gIGdyYXBoOiBmYWxzZSxcbiAgaW50ZXJ2YWw6IDEwMFxufTtcbmZ1bmN0aW9uIG1vbml0b3Iob2JqZWN0T3JGbiwgc2V0dGluZ3MpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBTcGVjaWFsSW5wdXRzLk1PTklUT1IsXG4gICAgb2JqZWN0T3JGbixcbiAgICBzZXR0aW5nczogX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRTZXR0aW5ncyksIHNldHRpbmdzKVxuICB9O1xufVxuXG5jb25zdCBpc0lucHV0ID0gdiA9PiAnX19sZXZhSW5wdXQnIGluIHY7XG5jb25zdCBidWlsZFRyZWUgPSAocGF0aHMsIGZpbHRlcikgPT4ge1xuICBjb25zdCB0cmVlID0ge307XG4gIGNvbnN0IF9maWx0ZXIgPSBmaWx0ZXIgPyBmaWx0ZXIudG9Mb3dlckNhc2UoKSA6IG51bGw7XG4gIHBhdGhzLmZvckVhY2gocGF0aCA9PiB7XG4gICAgY29uc3QgW3ZhbHVlS2V5LCBmb2xkZXJQYXRoXSA9IGdldEtleVBhdGgocGF0aCk7XG4gICAgaWYgKCFfZmlsdGVyIHx8IHZhbHVlS2V5LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihfZmlsdGVyKSA+IC0xKSB7XG4gICAgICBtZXJnZSh0cmVlLCBmb2xkZXJQYXRoLCB7XG4gICAgICAgIFt2YWx1ZUtleV06IHtcbiAgICAgICAgICBfX2xldmFJbnB1dDogdHJ1ZSxcbiAgICAgICAgICBwYXRoXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB0cmVlO1xufTtcblxuY29uc3QgX2V4Y2x1ZGVkJDQgPSBbXCJ0eXBlXCIsIFwibGFiZWxcIiwgXCJwYXRoXCIsIFwidmFsdWVLZXlcIiwgXCJ2YWx1ZVwiLCBcInNldHRpbmdzXCIsIFwic2V0VmFsdWVcIiwgXCJkaXNhYmxlZFwiXTtcbmZ1bmN0aW9uIENvbnRyb2xJbnB1dChfcmVmKSB7XG4gIGxldCB7XG4gICAgICB0eXBlLFxuICAgICAgbGFiZWwsXG4gICAgICBwYXRoLFxuICAgICAgdmFsdWVLZXksXG4gICAgICB2YWx1ZSxcbiAgICAgIHNldHRpbmdzLFxuICAgICAgc2V0VmFsdWUsXG4gICAgICBkaXNhYmxlZFxuICAgIH0gPSBfcmVmLFxuICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgX2V4Y2x1ZGVkJDQpO1xuICBjb25zdCB7XG4gICAgZGlzcGxheVZhbHVlLFxuICAgIG9uQ2hhbmdlLFxuICAgIG9uVXBkYXRlXG4gIH0gPSB1c2VJbnB1dFNldHRlcnMoe1xuICAgIHR5cGUsXG4gICAgdmFsdWUsXG4gICAgc2V0dGluZ3MsXG4gICAgc2V0VmFsdWVcbiAgfSk7XG4gIGNvbnN0IElucHV0ID0gUGx1Z2luc1t0eXBlXS5jb21wb25lbnQ7XG4gIGlmICghSW5wdXQpIHtcbiAgICB3YXJuKExldmFFcnJvcnMuTk9fQ09NUE9ORU5UX0ZPUl9UWVBFLCB0eXBlLCBwYXRoKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogX29iamVjdFNwcmVhZDIoe1xuICAgICAga2V5OiB2YWx1ZUtleSxcbiAgICAgIHBhdGgsXG4gICAgICBpZDogJycgKyBwYXRoLFxuICAgICAgbGFiZWwsXG4gICAgICBkaXNwbGF5VmFsdWUsXG4gICAgICB2YWx1ZSxcbiAgICAgIG9uQ2hhbmdlLFxuICAgICAgb25VcGRhdGUsXG4gICAgICBzZXR0aW5ncyxcbiAgICAgIHNldFZhbHVlLFxuICAgICAgZGlzYWJsZWRcbiAgICB9LCByZXN0KVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZElucHV0V3JhcHBlciwge1xuICAgIGRpc2FibGVkOiBkaXNhYmxlZFxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0LCBudWxsKSkpO1xufVxuXG5jb25zdCBTdHlsZWRCdXR0b24gPSBzdHlsZWQoJ2J1dHRvbicsIHtcbiAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgJHJlc2V0OiAnJyxcbiAgZm9udFdlaWdodDogJyRidXR0b24nLFxuICBoZWlnaHQ6ICckcm93SGVpZ2h0JyxcbiAgYm9yZGVyU3R5bGU6ICdub25lJyxcbiAgYm9yZGVyUmFkaXVzOiAnJHNtJyxcbiAgYmFja2dyb3VuZENvbG9yOiAnJGVsZXZhdGlvbjEnLFxuICBjb2xvcjogJyRoaWdobGlnaHQxJyxcbiAgJyY6bm90KDpkaXNhYmxlZCknOiB7XG4gICAgY29sb3I6ICckaGlnaGxpZ2h0MycsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnJGFjY2VudDInLFxuICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICRob3ZlcjogJyRhY2NlbnQzJyxcbiAgICAkYWN0aXZlOiAnJGFjY2VudDMgJGFjY2VudDEnLFxuICAgICRmb2N1czogJydcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIEJ1dHRvbih7XG4gIG9uQ2xpY2ssXG4gIHNldHRpbmdzLFxuICBsYWJlbFxufSkge1xuICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlQ29udGV4dCgpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3csIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkQnV0dG9uLCB7XG4gICAgZGlzYWJsZWQ6IHNldHRpbmdzLmRpc2FibGVkLFxuICAgIG9uQ2xpY2s6ICgpID0+IG9uQ2xpY2soc3RvcmUuZ2V0KVxuICB9LCBsYWJlbCkpO1xufVxuXG5jb25zdCBTdHlsZWRCdXR0b25Hcm91cCA9IHN0eWxlZCgnZGl2Jywge1xuICAkZmxleDogJycsXG4gIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuICBnYXA6ICckY29sR2FwJ1xufSk7XG5cbmNvbnN0IFN0eWxlZEJ1dHRvbkdyb3VwQnV0dG9uID0gc3R5bGVkKCdidXR0b24nLCB7XG4gICRyZXNldDogJycsXG4gIGN1cnNvcjogJ3BvaW50ZXInLFxuICBib3JkZXJSYWRpdXM6ICckeHMnLFxuICAnJjpob3Zlcic6IHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICckZWxldmF0aW9uMydcbiAgfVxufSk7XG5cbmNvbnN0IGdldE9wdHMgPSAoe1xuICBsYWJlbDogX2xhYmVsLFxuICBvcHRzOiBfb3B0c1xufSkgPT4ge1xuICBsZXQgbGFiZWwgPSB0eXBlb2YgX2xhYmVsID09PSAnc3RyaW5nJyA/IF9sYWJlbC50cmltKCkgPT09ICcnID8gbnVsbCA6IF9sYWJlbCA6IF9sYWJlbDtcbiAgbGV0IG9wdHMgPSBfb3B0cztcbiAgaWYgKHR5cGVvZiBfb3B0cy5vcHRzID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChvcHRzLmxhYmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGxhYmVsID0gX29wdHMubGFiZWw7XG4gICAgfVxuICAgIG9wdHMgPSBfb3B0cy5vcHRzO1xuICB9XG4gIHJldHVybiB7XG4gICAgbGFiZWwsXG4gICAgb3B0czogb3B0c1xuICB9O1xufTtcbmZ1bmN0aW9uIEJ1dHRvbkdyb3VwKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBsYWJlbCxcbiAgICBvcHRzXG4gIH0gPSBnZXRPcHRzKHByb3BzKTtcbiAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZUNvbnRleHQoKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93LCB7XG4gICAgaW5wdXQ6ICEhbGFiZWxcbiAgfSwgbGFiZWwgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChMYWJlbCwgbnVsbCwgbGFiZWwpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEJ1dHRvbkdyb3VwLCBudWxsLCBPYmplY3QuZW50cmllcyhvcHRzKS5tYXAoKFtsYWJlbCwgb25DbGlja10pID0+IFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkQnV0dG9uR3JvdXBCdXR0b24sIHtcbiAgICBrZXk6IGxhYmVsLFxuICAgIG9uQ2xpY2s6ICgpID0+IG9uQ2xpY2soc3RvcmUuZ2V0KVxuICB9LCBsYWJlbCkpKSk7XG59XG5cbmNvbnN0IENhbnZhcyA9IHN0eWxlZCgnY2FudmFzJywge1xuICBoZWlnaHQ6ICckbW9uaXRvckhlaWdodCcsXG4gIHdpZHRoOiAnMTAwJScsXG4gIGRpc3BsYXk6ICdibG9jaycsXG4gIGJvcmRlclJhZGl1czogJyRzbSdcbn0pO1xuXG5jb25zdCBQT0lOVFMgPSAxMDA7XG5mdW5jdGlvbiBwdXNoKGFyciwgdmFsKSB7XG4gIGFyci5wdXNoKHZhbCk7XG4gIGlmIChhcnIubGVuZ3RoID4gUE9JTlRTKSBhcnIuc2hpZnQoKTtcbn1cbmNvbnN0IE1vbml0b3JDYW52YXMgPSBmb3J3YXJkUmVmKGZ1bmN0aW9uICh7XG4gIGluaXRpYWxWYWx1ZVxufSwgcmVmKSB7XG4gIGNvbnN0IGFjY2VudENvbG9yID0gdXNlVGgoJ2NvbG9ycycsICdoaWdobGlnaHQzJyk7XG4gIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IHVzZVRoKCdjb2xvcnMnLCAnZWxldmF0aW9uMicpO1xuICBjb25zdCBmaWxsQ29sb3IgPSB1c2VUaCgnY29sb3JzJywgJ2hpZ2hsaWdodDEnKTtcbiAgY29uc3QgW2dyYWRpZW50VG9wLCBncmFkaWVudEJvdHRvbV0gPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gW2NvbG9yZChmaWxsQ29sb3IpLmFscGhhKDAuNCkudG9SZ2JTdHJpbmcoKSwgY29sb3JkKGZpbGxDb2xvcikuYWxwaGEoMC4xKS50b1JnYlN0cmluZygpXTtcbiAgfSwgW2ZpbGxDb2xvcl0pO1xuICBjb25zdCBwb2ludHMgPSB1c2VSZWYoW2luaXRpYWxWYWx1ZV0pO1xuICBjb25zdCBtaW4gPSB1c2VSZWYoaW5pdGlhbFZhbHVlKTtcbiAgY29uc3QgbWF4ID0gdXNlUmVmKGluaXRpYWxWYWx1ZSk7XG4gIGNvbnN0IHJhZiA9IHVzZVJlZigpO1xuICBjb25zdCBkcmF3UGxvdCA9IHVzZUNhbGxiYWNrKChfY2FudmFzLCBfY3R4KSA9PiB7XG4gICAgaWYgKCFfY2FudmFzKSByZXR1cm47XG4gICAgY29uc3Qge1xuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHRcbiAgICB9ID0gX2NhbnZhcztcblxuICAgIGNvbnN0IHBhdGggPSBuZXcgUGF0aDJEKCk7XG4gICAgY29uc3QgaW50ZXJ2YWwgPSB3aWR0aCAvIFBPSU5UUztcbiAgICBjb25zdCB2ZXJ0aWNhbFBhZGRpbmcgPSBoZWlnaHQgKiAwLjA1O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmN1cnJlbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHAgPSByYW5nZShwb2ludHMuY3VycmVudFtpXSwgbWluLmN1cnJlbnQsIG1heC5jdXJyZW50KTtcbiAgICAgIGNvbnN0IHggPSBpbnRlcnZhbCAqIGk7XG4gICAgICBjb25zdCB5ID0gaGVpZ2h0IC0gcCAqIChoZWlnaHQgLSB2ZXJ0aWNhbFBhZGRpbmcgKiAyKSAtIHZlcnRpY2FsUGFkZGluZztcbiAgICAgIHBhdGgubGluZVRvKHgsIHkpO1xuICAgIH1cblxuICAgIF9jdHguY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgY29uc3QgZ3JhZGllbnRQYXRoID0gbmV3IFBhdGgyRChwYXRoKTtcbiAgICBncmFkaWVudFBhdGgubGluZVRvKGludGVydmFsICogKHBvaW50cy5jdXJyZW50Lmxlbmd0aCArIDEpLCBoZWlnaHQpO1xuICAgIGdyYWRpZW50UGF0aC5saW5lVG8oMCwgaGVpZ2h0KTtcbiAgICBncmFkaWVudFBhdGgubGluZVRvKDAsIDApO1xuICAgIGNvbnN0IGdyYWRpZW50ID0gX2N0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCAwLCBoZWlnaHQpO1xuICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjAsIGdyYWRpZW50VG9wKTtcbiAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMS4wLCBncmFkaWVudEJvdHRvbSk7XG4gICAgX2N0eC5maWxsU3R5bGUgPSBncmFkaWVudDtcbiAgICBfY3R4LmZpbGwoZ3JhZGllbnRQYXRoKTtcblxuICAgIF9jdHguc3Ryb2tlU3R5bGUgPSBiYWNrZ3JvdW5kQ29sb3I7XG4gICAgX2N0eC5saW5lSm9pbiA9ICdyb3VuZCc7XG4gICAgX2N0eC5saW5lV2lkdGggPSAxNDtcbiAgICBfY3R4LnN0cm9rZShwYXRoKTtcblxuICAgIF9jdHguc3Ryb2tlU3R5bGUgPSBhY2NlbnRDb2xvcjtcbiAgICBfY3R4LmxpbmVXaWR0aCA9IDI7XG4gICAgX2N0eC5zdHJva2UocGF0aCk7XG4gIH0sIFthY2NlbnRDb2xvciwgYmFja2dyb3VuZENvbG9yLCBncmFkaWVudFRvcCwgZ3JhZGllbnRCb3R0b21dKTtcbiAgY29uc3QgW2NhbnZhcywgY3R4XSA9IHVzZUNhbnZhczJkKGRyYXdQbG90KTtcbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsICgpID0+ICh7XG4gICAgZnJhbWU6IHZhbCA9PiB7XG4gICAgICBpZiAobWluLmN1cnJlbnQgPT09IHVuZGVmaW5lZCB8fCB2YWwgPCBtaW4uY3VycmVudCkgbWluLmN1cnJlbnQgPSB2YWw7XG4gICAgICBpZiAobWF4LmN1cnJlbnQgPT09IHVuZGVmaW5lZCB8fCB2YWwgPiBtYXguY3VycmVudCkgbWF4LmN1cnJlbnQgPSB2YWw7XG4gICAgICBwdXNoKHBvaW50cy5jdXJyZW50LCB2YWwpO1xuICAgICAgcmFmLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gZHJhd1Bsb3QoY2FudmFzLmN1cnJlbnQsIGN0eC5jdXJyZW50KSk7XG4gICAgfVxuICB9KSwgW2NhbnZhcywgY3R4LCBkcmF3UGxvdF0pO1xuICB1c2VFZmZlY3QoKCkgPT4gKCkgPT4gY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmLmN1cnJlbnQpLCBbXSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywge1xuICAgIHJlZjogY2FudmFzXG4gIH0pO1xufSk7XG5jb25zdCBwYXJzZSA9IHZhbCA9PiBOdW1iZXIuaXNGaW5pdGUodmFsKSA/IHZhbC50b1ByZWNpc2lvbigyKSA6IHZhbC50b1N0cmluZygpO1xuY29uc3QgTW9uaXRvckxvZyA9IGZvcndhcmRSZWYoZnVuY3Rpb24gKHtcbiAgaW5pdGlhbFZhbHVlXG59LCByZWYpIHtcbiAgY29uc3QgW3ZhbCwgc2V0XSA9IHVzZVN0YXRlKHBhcnNlKGluaXRpYWxWYWx1ZSkpO1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4gKHtcbiAgICBmcmFtZTogdiA9PiBzZXQocGFyc2UodikpXG4gIH0pLCBbXSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIHZhbCk7XG59KTtcbmZ1bmN0aW9uIGdldFZhbHVlKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSAnZnVuY3Rpb24nID8gbygpIDogby5jdXJyZW50O1xufVxuZnVuY3Rpb24gTW9uaXRvcih7XG4gIGxhYmVsLFxuICBvYmplY3RPckZuLFxuICBzZXR0aW5nc1xufSkge1xuICBjb25zdCByZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgaW5pdGlhbFZhbHVlID0gdXNlUmVmKGdldFZhbHVlKG9iamVjdE9yRm4pKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB0aW1lb3V0ID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHZhciBfcmVmJGN1cnJlbnQ7XG4gICAgICBpZiAoZG9jdW1lbnQuaGlkZGVuKSByZXR1cm47XG4gICAgICAoX3JlZiRjdXJyZW50ID0gcmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9yZWYkY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlZiRjdXJyZW50LmZyYW1lKGdldFZhbHVlKG9iamVjdE9yRm4pKTtcbiAgICB9LCBzZXR0aW5ncy5pbnRlcnZhbCk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5jbGVhckludGVydmFsKHRpbWVvdXQpO1xuICB9LCBbb2JqZWN0T3JGbiwgc2V0dGluZ3MuaW50ZXJ2YWxdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93LCB7XG4gICAgaW5wdXQ6IHRydWVcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChMYWJlbCwge1xuICAgIGFsaWduOiBcInRvcFwiXG4gIH0sIGxhYmVsKSwgc2V0dGluZ3MuZ3JhcGggPyBSZWFjdC5jcmVhdGVFbGVtZW50KE1vbml0b3JDYW52YXMsIHtcbiAgICByZWY6IHJlZixcbiAgICBpbml0aWFsVmFsdWU6IGluaXRpYWxWYWx1ZS5jdXJyZW50XG4gIH0pIDogUmVhY3QuY3JlYXRlRWxlbWVudChNb25pdG9yTG9nLCB7XG4gICAgcmVmOiByZWYsXG4gICAgaW5pdGlhbFZhbHVlOiBpbml0aWFsVmFsdWUuY3VycmVudFxuICB9KSk7XG59XG5cbmNvbnN0IF9leGNsdWRlZCQzID0gW1widHlwZVwiLCBcImxhYmVsXCIsIFwia2V5XCJdO1xuY29uc3Qgc3BlY2lhbENvbXBvbmVudHMgPSB7XG4gIFtTcGVjaWFsSW5wdXRzLkJVVFRPTl06IEJ1dHRvbixcbiAgW1NwZWNpYWxJbnB1dHMuQlVUVE9OX0dST1VQXTogQnV0dG9uR3JvdXAsXG4gIFtTcGVjaWFsSW5wdXRzLk1PTklUT1JdOiBNb25pdG9yXG59O1xuY29uc3QgQ29udHJvbCA9IFJlYWN0Lm1lbW8oKHtcbiAgcGF0aFxufSkgPT4ge1xuICBjb25zdCBbaW5wdXQsIHtcbiAgICBzZXQsXG4gICAgc2V0U2V0dGluZ3MsXG4gICAgZGlzYWJsZSxcbiAgICBzdG9yZUlkLFxuICAgIGVtaXRPbkVkaXRTdGFydCxcbiAgICBlbWl0T25FZGl0RW5kXG4gIH1dID0gdXNlSW5wdXQocGF0aCk7XG4gIGlmICghaW5wdXQpIHJldHVybiBudWxsO1xuICBjb25zdCB7XG4gICAgICB0eXBlLFxuICAgICAgbGFiZWwsXG4gICAgICBrZXlcbiAgICB9ID0gaW5wdXQsXG4gICAgaW5wdXRQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhpbnB1dCwgX2V4Y2x1ZGVkJDMpO1xuICBpZiAodHlwZSBpbiBTcGVjaWFsSW5wdXRzKSB7XG4gICAgY29uc3QgU3BlY2lhbElucHV0Rm9yVHlwZSA9IHNwZWNpYWxDb21wb25lbnRzW3R5cGVdO1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFNwZWNpYWxJbnB1dEZvclR5cGUsIF9leHRlbmRzKHtcbiAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgIHBhdGg6IHBhdGhcbiAgICB9LCBpbnB1dFByb3BzKSk7XG4gIH1cbiAgaWYgKCEodHlwZSBpbiBQbHVnaW5zKSkge1xuICAgIGxvZyhMZXZhRXJyb3JzLlVOU1VQUE9SVEVEX0lOUFVULCB0eXBlLCBwYXRoKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb250cm9sSW5wdXQsIF9leHRlbmRzKHtcbiAgICBrZXk6IHN0b3JlSWQgKyBwYXRoLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgbGFiZWw6IGxhYmVsLFxuICAgIHN0b3JlSWQ6IHN0b3JlSWQsXG4gICAgcGF0aDogcGF0aCxcbiAgICB2YWx1ZUtleToga2V5LFxuICAgIHNldFZhbHVlOiBzZXQsXG4gICAgc2V0U2V0dGluZ3M6IHNldFNldHRpbmdzLFxuICAgIGRpc2FibGU6IGRpc2FibGUsXG4gICAgZW1pdE9uRWRpdFN0YXJ0OiBlbWl0T25FZGl0U3RhcnQsXG4gICAgZW1pdE9uRWRpdEVuZDogZW1pdE9uRWRpdEVuZFxuICB9LCBpbnB1dFByb3BzKSk7XG59KTtcblxuZnVuY3Rpb24gRm9sZGVyVGl0bGUoe1xuICB0b2dnbGUsXG4gIHRvZ2dsZWQsXG4gIG5hbWVcbn0pIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkVGl0bGUsIHtcbiAgICBvbkNsaWNrOiAoKSA9PiB0b2dnbGUoKVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KENoZXZyb24sIHtcbiAgICB0b2dnbGVkOiB0b2dnbGVkXG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIG5hbWUpKTtcbn1cblxuY29uc3QgRm9sZGVyID0gKHtcbiAgbmFtZSxcbiAgcGF0aCxcbiAgdHJlZVxufSkgPT4ge1xuICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlQ29udGV4dCgpO1xuICBjb25zdCBuZXdQYXRoID0gam9pbihwYXRoLCBuYW1lKTtcbiAgY29uc3Qge1xuICAgIGNvbGxhcHNlZCxcbiAgICBjb2xvclxuICB9ID0gc3RvcmUuZ2V0Rm9sZGVyU2V0dGluZ3MobmV3UGF0aCk7XG4gIGNvbnN0IFt0b2dnbGVkLCBzZXRUb2dnbGVdID0gdXNlU3RhdGUoIWNvbGxhcHNlZCk7XG4gIGNvbnN0IGZvbGRlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgd2lkZ2V0Q29sb3IgPSB1c2VUaCgnY29sb3JzJywgJ2ZvbGRlcldpZGdldENvbG9yJyk7XG4gIGNvbnN0IHRleHRDb2xvciA9IHVzZVRoKCdjb2xvcnMnLCAnZm9sZGVyVGV4dENvbG9yJyk7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgZm9sZGVyUmVmLmN1cnJlbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tbGV2YS1jb2xvcnMtZm9sZGVyV2lkZ2V0Q29sb3InLCBjb2xvciB8fCB3aWRnZXRDb2xvcik7XG4gICAgZm9sZGVyUmVmLmN1cnJlbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tbGV2YS1jb2xvcnMtZm9sZGVyVGV4dENvbG9yJywgY29sb3IgfHwgdGV4dENvbG9yKTtcbiAgfSwgW2NvbG9yLCB3aWRnZXRDb2xvciwgdGV4dENvbG9yXSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEZvbGRlciwge1xuICAgIHJlZjogZm9sZGVyUmVmXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRm9sZGVyVGl0bGUsIHtcbiAgICBuYW1lOiBuYW1lLFxuICAgIHRvZ2dsZWQ6IHRvZ2dsZWQsXG4gICAgdG9nZ2xlOiAoKSA9PiBzZXRUb2dnbGUodCA9PiAhdClcbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHJlZVdyYXBwZXIsIHtcbiAgICBwYXJlbnQ6IG5ld1BhdGgsXG4gICAgdHJlZTogdHJlZSxcbiAgICB0b2dnbGVkOiB0b2dnbGVkXG4gIH0pKTtcbn07XG5jb25zdCBUcmVlV3JhcHBlciA9IFJlYWN0Lm1lbW8oKHtcbiAgaXNSb290OiBfaXNSb290ID0gZmFsc2UsXG4gIGZpbGw6IF9maWxsID0gZmFsc2UsXG4gIGZsYXQ6IF9mbGF0ID0gZmFsc2UsXG4gIHBhcmVudCxcbiAgdHJlZSxcbiAgdG9nZ2xlZFxufSkgPT4ge1xuICBjb25zdCB7XG4gICAgd3JhcHBlclJlZixcbiAgICBjb250ZW50UmVmXG4gIH0gPSB1c2VUb2dnbGUodG9nZ2xlZCk7XG4gIGNvbnN0IHN0b3JlID0gdXNlU3RvcmVDb250ZXh0KCk7XG4gIGNvbnN0IGdldE9yZGVyID0gKFtrZXksIG9dKSA9PiB7XG4gICAgdmFyIF9zdG9yZSRnZXRJbnB1dDtcbiAgICBjb25zdCBvcmRlciA9IGlzSW5wdXQobykgPyAoX3N0b3JlJGdldElucHV0ID0gc3RvcmUuZ2V0SW5wdXQoby5wYXRoKSkgPT09IG51bGwgfHwgX3N0b3JlJGdldElucHV0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RvcmUkZ2V0SW5wdXQub3JkZXIgOiBzdG9yZS5nZXRGb2xkZXJTZXR0aW5ncyhqb2luKHBhcmVudCwga2V5KSkub3JkZXI7XG4gICAgcmV0dXJuIG9yZGVyIHx8IDA7XG4gIH07XG4gIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyh0cmVlKS5zb3J0KChhLCBiKSA9PiBnZXRPcmRlcihhKSAtIGdldE9yZGVyKGIpKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkV3JhcHBlciwge1xuICAgIHJlZjogd3JhcHBlclJlZixcbiAgICBpc1Jvb3Q6IF9pc1Jvb3QsXG4gICAgZmlsbDogX2ZpbGwsXG4gICAgZmxhdDogX2ZsYXRcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRDb250ZW50LCB7XG4gICAgcmVmOiBjb250ZW50UmVmLFxuICAgIGlzUm9vdDogX2lzUm9vdCxcbiAgICB0b2dnbGVkOiB0b2dnbGVkXG4gIH0sIGVudHJpZXMubWFwKChba2V5LCB2YWx1ZV0pID0+IGlzSW5wdXQodmFsdWUpID8gUmVhY3QuY3JlYXRlRWxlbWVudChDb250cm9sLCB7XG4gICAga2V5OiB2YWx1ZS5wYXRoLFxuICAgIHZhbHVlS2V5OiB2YWx1ZS52YWx1ZUtleSxcbiAgICBwYXRoOiB2YWx1ZS5wYXRoXG4gIH0pIDogUmVhY3QuY3JlYXRlRWxlbWVudChGb2xkZXIsIHtcbiAgICBrZXk6IGtleSxcbiAgICBuYW1lOiBrZXksXG4gICAgcGF0aDogcGFyZW50LFxuICAgIHRyZWU6IHZhbHVlXG4gIH0pKSkpO1xufSk7XG5cbmNvbnN0IFN0eWxlZFJvb3QgPSBzdHlsZWQoJ2RpdicsIHtcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gIGZvbnRGYW1pbHk6ICckbW9ubycsXG4gIGZvbnRTaXplOiAnJHJvb3QnLFxuICBjb2xvcjogJyRyb290VGV4dCcsXG4gIGJhY2tncm91bmRDb2xvcjogJyRlbGV2YXRpb24xJyxcbiAgdmFyaWFudHM6IHtcbiAgICBmaWxsOiB7XG4gICAgICBmYWxzZToge1xuICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgICAgdG9wOiAnMTBweCcsXG4gICAgICAgIHJpZ2h0OiAnMTBweCcsXG4gICAgICAgIHpJbmRleDogMTAwMCxcbiAgICAgICAgd2lkdGg6ICckcm9vdFdpZHRoJ1xuICAgICAgfSxcbiAgICAgIHRydWU6IHtcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgIHdpZHRoOiAnMTAwJSdcbiAgICAgIH1cbiAgICB9LFxuICAgIGZsYXQ6IHtcbiAgICAgIGZhbHNlOiB7XG4gICAgICAgIGJvcmRlclJhZGl1czogJyRsZycsXG4gICAgICAgIGJveFNoYWRvdzogJyRsZXZlbDEnXG4gICAgICB9XG4gICAgfSxcbiAgICBvbmVMaW5lTGFiZWxzOiB7XG4gICAgICB0cnVlOiB7XG4gICAgICAgIFtgJHtTdHlsZWRJbnB1dFJvd31gXToge1xuICAgICAgICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICdhdXRvJyxcbiAgICAgICAgICBncmlkQXV0b0NvbHVtbnM6ICdtaW5tYXgobWF4LWNvbnRlbnQsIDFmciknLFxuICAgICAgICAgIGdyaWRBdXRvUm93czogJ21pbm1heCgkc2l6ZXMkcm93SGVpZ2h0KSwgYXV0byknLFxuICAgICAgICAgIHJvd0dhcDogMCxcbiAgICAgICAgICBjb2x1bW5HYXA6IDAsXG4gICAgICAgICAgbWFyZ2luVG9wOiAnJHJvd0dhcCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgaGlkZVRpdGxlQmFyOiB7XG4gICAgICB0cnVlOiB7XG4gICAgICAgICQkdGl0bGVCYXJIZWlnaHQ6ICcwcHgnXG4gICAgICB9LFxuICAgICAgZmFsc2U6IHtcbiAgICAgICAgJCR0aXRsZUJhckhlaWdodDogJyRzaXplcyR0aXRsZUJhckhlaWdodCdcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gICcmLCosKjphZnRlciwqOmJlZm9yZSc6IHtcbiAgICBib3hTaXppbmc6ICdib3JkZXItYm94J1xuICB9LFxuICAnKjo6c2VsZWN0aW9uJzoge1xuICAgIGJhY2tncm91bmRDb2xvcjogJyRhY2NlbnQyJ1xuICB9XG59KTtcblxuY29uc3QgaWNvbldpZHRoID0gNDA7XG5jb25zdCBJY29uID0gc3R5bGVkKCdpJywge1xuICAkZmxleENlbnRlcjogJycsXG4gIHdpZHRoOiBpY29uV2lkdGgsXG4gIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgY3Vyc29yOiAncG9pbnRlcicsXG4gICc+IHN2Zyc6IHtcbiAgICBmaWxsOiAnJGhpZ2hsaWdodDEnLFxuICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMzUwbXMgZWFzZSwgZmlsbCAyNTBtcyBlYXNlJ1xuICB9LFxuICAnJjpob3ZlciA+IHN2Zyc6IHtcbiAgICBmaWxsOiAnJGhpZ2hsaWdodDMnXG4gIH0sXG4gIHZhcmlhbnRzOiB7XG4gICAgYWN0aXZlOiB7XG4gICAgICB0cnVlOiB7XG4gICAgICAgICc+IHN2Zyc6IHtcbiAgICAgICAgICBmaWxsOiAnJGhpZ2hsaWdodDInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuY29uc3QgU3R5bGVkVGl0bGVXaXRoRmlsdGVyID0gc3R5bGVkKCdkaXYnLCB7XG4gIGRpc3BsYXk6ICdmbGV4JyxcbiAgYWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuICBoZWlnaHQ6ICckdGl0bGVCYXJIZWlnaHQnLFxuICB2YXJpYW50czoge1xuICAgIG1vZGU6IHtcbiAgICAgIGRyYWc6IHtcbiAgICAgICAgY3Vyc29yOiAnZ3JhYidcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuY29uc3QgRmlsdGVyV3JhcHBlciA9IHN0eWxlZCgnZGl2Jywge1xuICAkZmxleDogJycsXG4gIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICB3aWR0aDogJzEwMCUnLFxuICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gIHRyYW5zaXRpb246ICdoZWlnaHQgMjUwbXMgZWFzZScsXG4gIGNvbG9yOiAnJGhpZ2hsaWdodDMnLFxuICBwYWRkaW5nTGVmdDogJyRtZCcsXG4gIFtgPiAke0ljb259YF06IHtcbiAgICBoZWlnaHQ6IDMwXG4gIH0sXG4gIHZhcmlhbnRzOiB7XG4gICAgdG9nZ2xlZDoge1xuICAgICAgdHJ1ZToge1xuICAgICAgICBoZWlnaHQ6IDMwXG4gICAgICB9LFxuICAgICAgZmFsc2U6IHtcbiAgICAgICAgaGVpZ2h0OiAwXG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcbmNvbnN0IFN0eWxlZEZpbHRlcklucHV0ID0gc3R5bGVkKCdpbnB1dCcsIHtcbiAgJHJlc2V0OiAnJyxcbiAgZmxleDogMSxcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gIGhlaWdodDogMzAsXG4gIHdpZHRoOiAnMTAwJScsXG4gIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgZm9udFNpemU6ICcxMHB4JyxcbiAgYm9yZGVyUmFkaXVzOiAnJHJvb3QnLFxuICAnJjpmb2N1cyc6IHt9LFxuICAnJjo6cGxhY2Vob2xkZXInOiB7XG4gICAgY29sb3I6ICckaGlnaGxpZ2h0MidcbiAgfVxufSk7XG5jb25zdCBUaXRsZUNvbnRhaW5lciA9IHN0eWxlZCgnZGl2Jywge1xuICB0b3VjaEFjdGlvbjogJ25vbmUnLFxuICAkZmxleENlbnRlcjogJycsXG4gIGZsZXg6IDEsXG4gICc+IHN2Zyc6IHtcbiAgICBmaWxsOiAnJGhpZ2hsaWdodDEnXG4gIH0sXG4gIGNvbG9yOiAnJGhpZ2hsaWdodDEnLFxuICB2YXJpYW50czoge1xuICAgIGRyYWc6IHtcbiAgICAgIHRydWU6IHtcbiAgICAgICAgJGRyYWdnYWJsZTogJycsXG4gICAgICAgICc+IHN2Zyc6IHtcbiAgICAgICAgICB0cmFuc2l0aW9uOiAnZmlsbCAyNTBtcyBlYXNlJ1xuICAgICAgICB9LFxuICAgICAgICAnJjpob3Zlcic6IHtcbiAgICAgICAgICBjb2xvcjogJyRoaWdobGlnaHQzJ1xuICAgICAgICB9LFxuICAgICAgICAnJjpob3ZlciA+IHN2Zyc6IHtcbiAgICAgICAgICBmaWxsOiAnJGhpZ2hsaWdodDMnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGZpbHRlckVuYWJsZWQ6IHtcbiAgICAgIGZhbHNlOiB7XG4gICAgICAgIHBhZGRpbmdSaWdodDogaWNvbldpZHRoXG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuY29uc3QgRmlsdGVySW5wdXQgPSBSZWFjdC5mb3J3YXJkUmVmKCh7XG4gIHNldEZpbHRlcixcbiAgdG9nZ2xlXG59LCByZWYpID0+IHtcbiAgY29uc3QgW3ZhbHVlLCBzZXRdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBkZWJvdW5jZWRPbkNoYW5nZSA9IHVzZU1lbW8oKCkgPT4gZGVib3VuY2Uoc2V0RmlsdGVyLCAyNTApLCBbc2V0RmlsdGVyXSk7XG4gIGNvbnN0IGNsZWFyID0gKCkgPT4ge1xuICAgIHNldEZpbHRlcignJyk7XG4gICAgc2V0KCcnKTtcbiAgfTtcbiAgY29uc3QgX29uQ2hhbmdlID0gZSA9PiB7XG4gICAgY29uc3QgdiA9IGUuY3VycmVudFRhcmdldC52YWx1ZTtcbiAgICB0b2dnbGUodHJ1ZSk7XG4gICAgc2V0KHYpO1xuICB9O1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYm91bmNlZE9uQ2hhbmdlKHZhbHVlKTtcbiAgfSwgW3ZhbHVlLCBkZWJvdW5jZWRPbkNoYW5nZV0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRGaWx0ZXJJbnB1dCwge1xuICAgIHJlZjogcmVmLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBwbGFjZWhvbGRlcjogXCJbT3BlbiBmaWx0ZXIgd2l0aCBDTUQrU0hJRlQrTF1cIixcbiAgICBvblBvaW50ZXJEb3duOiBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXG4gICAgb25DaGFuZ2U6IF9vbkNoYW5nZVxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChJY29uLCB7XG4gICAgb25DbGljazogKCkgPT4gY2xlYXIoKSxcbiAgICBzdHlsZToge1xuICAgICAgdmlzaWJpbGl0eTogdmFsdWUgPyAndmlzaWJsZScgOiAnaGlkZGVuJ1xuICAgIH1cbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7XG4gICAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgICBoZWlnaHQ6IFwiMTRcIixcbiAgICB3aWR0aDogXCIxNFwiLFxuICAgIHZpZXdCb3g6IFwiMCAwIDIwIDIwXCIsXG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIlxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTEwIDE4YTggOCAwIDEwMC0xNiA4IDggMCAwMDAgMTZ6TTguNzA3IDcuMjkzYTEgMSAwIDAwLTEuNDE0IDEuNDE0TDguNTg2IDEwbC0xLjI5MyAxLjI5M2ExIDEgMCAxMDEuNDE0IDEuNDE0TDEwIDExLjQxNGwxLjI5MyAxLjI5M2ExIDEgMCAwMDEuNDE0LTEuNDE0TDExLjQxNCAxMGwxLjI5My0xLjI5M2ExIDEgMCAwMC0xLjQxNC0xLjQxNEwxMCA4LjU4NiA4LjcwNyA3LjI5M3pcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfSkpKSk7XG59KTtcbmZ1bmN0aW9uIFRpdGxlV2l0aEZpbHRlcih7XG4gIHNldEZpbHRlcixcbiAgb25EcmFnLFxuICBvbkRyYWdTdGFydCxcbiAgb25EcmFnRW5kLFxuICB0b2dnbGUsXG4gIHRvZ2dsZWQsXG4gIHRpdGxlLFxuICBkcmFnLFxuICBmaWx0ZXJFbmFibGVkLFxuICBmcm9tXG59KSB7XG4gIGNvbnN0IFtmaWx0ZXJTaG93biwgc2V0U2hvd0ZpbHRlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmKG51bGwpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBfaW5wdXRSZWYkY3VycmVudCwgX2lucHV0UmVmJGN1cnJlbnQyO1xuICAgIGlmIChmaWx0ZXJTaG93bikgKF9pbnB1dFJlZiRjdXJyZW50ID0gaW5wdXRSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2lucHV0UmVmJGN1cnJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pbnB1dFJlZiRjdXJyZW50LmZvY3VzKCk7ZWxzZSAoX2lucHV0UmVmJGN1cnJlbnQyID0gaW5wdXRSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2lucHV0UmVmJGN1cnJlbnQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW5wdXRSZWYkY3VycmVudDIuYmx1cigpO1xuICB9LCBbZmlsdGVyU2hvd25dKTtcbiAgY29uc3QgYmluZCA9IHVzZURyYWcoKHtcbiAgICBvZmZzZXQ6IFt4LCB5XSxcbiAgICBmaXJzdCxcbiAgICBsYXN0XG4gIH0pID0+IHtcbiAgICBvbkRyYWcoe1xuICAgICAgeCxcbiAgICAgIHlcbiAgICB9KTtcbiAgICBpZiAoZmlyc3QpIHtcbiAgICAgIG9uRHJhZ1N0YXJ0KHtcbiAgICAgICAgeCxcbiAgICAgICAgeVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChsYXN0KSB7XG4gICAgICBvbkRyYWdFbmQoe1xuICAgICAgICB4LFxuICAgICAgICB5XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBmaWx0ZXJUYXBzOiB0cnVlLFxuICAgIGZyb206ICh7XG4gICAgICBvZmZzZXQ6IFt4LCB5XVxuICAgIH0pID0+IFsoZnJvbSA9PT0gbnVsbCB8fCBmcm9tID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmcm9tLngpIHx8IHgsIChmcm9tID09PSBudWxsIHx8IGZyb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZyb20ueSkgfHwgeV1cbiAgfSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlU2hvcnRjdXQgPSBldmVudCA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSAnTCcgJiYgZXZlbnQuc2hpZnRLZXkgJiYgZXZlbnQubWV0YUtleSkge1xuICAgICAgICBzZXRTaG93RmlsdGVyKGYgPT4gIWYpO1xuICAgICAgfVxuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVTaG9ydGN1dCk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlU2hvcnRjdXQpO1xuICB9LCBbXSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZFRpdGxlV2l0aEZpbHRlciwge1xuICAgIG1vZGU6IGRyYWcgPyAnZHJhZycgOiB1bmRlZmluZWRcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChJY29uLCB7XG4gICAgYWN0aXZlOiAhdG9nZ2xlZCxcbiAgICBvbkNsaWNrOiAoKSA9PiB0b2dnbGUoKVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KENoZXZyb24sIHtcbiAgICB0b2dnbGVkOiB0b2dnbGVkLFxuICAgIHdpZHRoOiAxMixcbiAgICBoZWlnaHQ6IDhcbiAgfSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFRpdGxlQ29udGFpbmVyLCBfZXh0ZW5kcyh7fSwgZHJhZyA/IGJpbmQoKSA6IHt9LCB7XG4gICAgZHJhZzogZHJhZyxcbiAgICBmaWx0ZXJFbmFibGVkOiBmaWx0ZXJFbmFibGVkXG4gIH0pLCB0aXRsZSA9PT0gdW5kZWZpbmVkICYmIGRyYWcgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHtcbiAgICB3aWR0aDogXCIyMFwiLFxuICAgIGhlaWdodDogXCIxMFwiLFxuICAgIHZpZXdCb3g6IFwiMCAwIDI4IDE0XCIsXG4gICAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiY2lyY2xlXCIsIHtcbiAgICBjeDogXCIyXCIsXG4gICAgY3k6IFwiMlwiLFxuICAgIHI6IFwiMlwiXG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiY2lyY2xlXCIsIHtcbiAgICBjeDogXCIxNFwiLFxuICAgIGN5OiBcIjJcIixcbiAgICByOiBcIjJcIlxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImNpcmNsZVwiLCB7XG4gICAgY3g6IFwiMjZcIixcbiAgICBjeTogXCIyXCIsXG4gICAgcjogXCIyXCJcbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJjaXJjbGVcIiwge1xuICAgIGN4OiBcIjJcIixcbiAgICBjeTogXCIxMlwiLFxuICAgIHI6IFwiMlwiXG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiY2lyY2xlXCIsIHtcbiAgICBjeDogXCIxNFwiLFxuICAgIGN5OiBcIjEyXCIsXG4gICAgcjogXCIyXCJcbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJjaXJjbGVcIiwge1xuICAgIGN4OiBcIjI2XCIsXG4gICAgY3k6IFwiMTJcIixcbiAgICByOiBcIjJcIlxuICB9KSkgOiB0aXRsZSksIGZpbHRlckVuYWJsZWQgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChJY29uLCB7XG4gICAgYWN0aXZlOiBmaWx0ZXJTaG93bixcbiAgICBvbkNsaWNrOiAoKSA9PiBzZXRTaG93RmlsdGVyKGYgPT4gIWYpXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwge1xuICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgaGVpZ2h0OiBcIjIwXCIsXG4gICAgdmlld0JveDogXCIwIDAgMjAgMjBcIlxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNOSA5YTIgMiAwIDExNCAwIDIgMiAwIDAxLTQgMHpcIlxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0xMCAxOGE4IDggMCAxMDAtMTYgOCA4IDAgMDAwIDE2em0xLTEzYTQgNCAwIDAwLTMuNDQ2IDYuMDMybC0yLjI2MSAyLjI2YTEgMSAwIDEwMS40MTQgMS40MTVsMi4yNjEtMi4yNjFBNCA0IDAgMTAxMSA1elwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9KSkpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChGaWx0ZXJXcmFwcGVyLCB7XG4gICAgdG9nZ2xlZDogZmlsdGVyU2hvd25cbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChGaWx0ZXJJbnB1dCwge1xuICAgIHJlZjogaW5wdXRSZWYsXG4gICAgc2V0RmlsdGVyOiBzZXRGaWx0ZXIsXG4gICAgdG9nZ2xlOiB0b2dnbGVcbiAgfSkpKTtcbn1cblxuY29uc3QgX2V4Y2x1ZGVkJDIgPSBbXCJzdG9yZVwiLCBcImhpZGRlblwiLCBcInRoZW1lXCIsIFwiY29sbGFwc2VkXCJdO1xuZnVuY3Rpb24gTGV2YVJvb3QoX3JlZikge1xuICBsZXQge1xuICAgICAgc3RvcmUsXG4gICAgICBoaWRkZW4gPSBmYWxzZSxcbiAgICAgIHRoZW1lLFxuICAgICAgY29sbGFwc2VkID0gZmFsc2VcbiAgICB9ID0gX3JlZixcbiAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQkMik7XG4gIGNvbnN0IHRoZW1lQ29udGV4dCA9IHVzZURlZXBNZW1vKCgpID0+IG1lcmdlVGhlbWUodGhlbWUpLCBbdGhlbWVdKTtcbiAgY29uc3QgW3RvZ2dsZWQsIHNldFRvZ2dsZV0gPSB1c2VTdGF0ZSghY29sbGFwc2VkKTtcbiAgY29uc3QgY29tcHV0ZWRUb2dnbGVkID0gdHlwZW9mIGNvbGxhcHNlZCA9PT0gJ29iamVjdCcgPyAhY29sbGFwc2VkLmNvbGxhcHNlZCA6IHRvZ2dsZWQ7XG4gIGNvbnN0IGNvbXB1dGVkU2V0VG9nZ2xlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBjb2xsYXBzZWQgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY29sbGFwc2VkLm9uQ2hhbmdlKCF2YWx1ZSghY29sbGFwc2VkLmNvbGxhcHNlZCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbGxhcHNlZC5vbkNoYW5nZSghdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gc2V0VG9nZ2xlO1xuICB9LCBbY29sbGFwc2VkXSk7XG4gIGlmICghc3RvcmUgfHwgaGlkZGVuKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGhlbWVDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHRoZW1lQ29udGV4dFxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KExldmFDb3JlLCBfZXh0ZW5kcyh7XG4gICAgc3RvcmU6IHN0b3JlXG4gIH0sIHByb3BzLCB7XG4gICAgdG9nZ2xlZDogY29tcHV0ZWRUb2dnbGVkLFxuICAgIHNldFRvZ2dsZTogY29tcHV0ZWRTZXRUb2dnbGUsXG4gICAgcm9vdENsYXNzOiB0aGVtZUNvbnRleHQuY2xhc3NOYW1lXG4gIH0pKSk7XG59XG5jb25zdCBMZXZhQ29yZSA9IFJlYWN0Lm1lbW8oKHtcbiAgc3RvcmUsXG4gIHJvb3RDbGFzcyxcbiAgZmlsbDogX2ZpbGwgPSBmYWxzZSxcbiAgZmxhdDogX2ZsYXQgPSBmYWxzZSxcbiAgbmV2ZXJIaWRlOiBfbmV2ZXJIaWRlID0gZmFsc2UsXG4gIG9uZUxpbmVMYWJlbHM6IF9vbmVMaW5lTGFiZWxzID0gZmFsc2UsXG4gIHRpdGxlQmFyOiBfdGl0bGVCYXIgPSB7XG4gICAgdGl0bGU6IHVuZGVmaW5lZCxcbiAgICBkcmFnOiB0cnVlLFxuICAgIGZpbHRlcjogdHJ1ZSxcbiAgICBwb3NpdGlvbjogdW5kZWZpbmVkLFxuICAgIG9uRHJhZzogdW5kZWZpbmVkLFxuICAgIG9uRHJhZ1N0YXJ0OiB1bmRlZmluZWQsXG4gICAgb25EcmFnRW5kOiB1bmRlZmluZWRcbiAgfSxcbiAgaGlkZUNvcHlCdXR0b246IF9oaWRlQ29weUJ1dHRvbiA9IGZhbHNlLFxuICB0b2dnbGVkLFxuICBzZXRUb2dnbGVcbn0pID0+IHtcbiAgdmFyIF90aXRsZUJhciRkcmFnLCBfdGl0bGVCYXIkZmlsdGVyO1xuICBjb25zdCBwYXRocyA9IHVzZVZpc2libGVQYXRocyhzdG9yZSk7XG4gIGNvbnN0IFtmaWx0ZXIsIHNldEZpbHRlcl0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IHRyZWUgPSB1c2VNZW1vKCgpID0+IGJ1aWxkVHJlZShwYXRocywgZmlsdGVyKSwgW3BhdGhzLCBmaWx0ZXJdKTtcblxuICBjb25zdCBbcm9vdFJlZiwgc2V0XSA9IHVzZVRyYW5zZm9ybSgpO1xuXG4gIGNvbnN0IHNob3VsZFNob3cgPSBfbmV2ZXJIaWRlIHx8IHBhdGhzLmxlbmd0aCA+IDA7XG4gIGNvbnN0IHRpdGxlID0gdHlwZW9mIF90aXRsZUJhciA9PT0gJ29iamVjdCcgPyBfdGl0bGVCYXIudGl0bGUgfHwgdW5kZWZpbmVkIDogdW5kZWZpbmVkO1xuICBjb25zdCBkcmFnID0gdHlwZW9mIF90aXRsZUJhciA9PT0gJ29iamVjdCcgPyAoX3RpdGxlQmFyJGRyYWcgPSBfdGl0bGVCYXIuZHJhZykgIT09IG51bGwgJiYgX3RpdGxlQmFyJGRyYWcgIT09IHZvaWQgMCA/IF90aXRsZUJhciRkcmFnIDogdHJ1ZSA6IHRydWU7XG4gIGNvbnN0IGZpbHRlckVuYWJsZWQgPSB0eXBlb2YgX3RpdGxlQmFyID09PSAnb2JqZWN0JyA/IChfdGl0bGVCYXIkZmlsdGVyID0gX3RpdGxlQmFyLmZpbHRlcikgIT09IG51bGwgJiYgX3RpdGxlQmFyJGZpbHRlciAhPT0gdm9pZCAwID8gX3RpdGxlQmFyJGZpbHRlciA6IHRydWUgOiB0cnVlO1xuICBjb25zdCBwb3NpdGlvbiA9IHR5cGVvZiBfdGl0bGVCYXIgPT09ICdvYmplY3QnID8gX3RpdGxlQmFyLnBvc2l0aW9uIHx8IHVuZGVmaW5lZCA6IHVuZGVmaW5lZDtcbiAgY29uc3Qgb25EcmFnID0gdHlwZW9mIF90aXRsZUJhciA9PT0gJ29iamVjdCcgPyBfdGl0bGVCYXIub25EcmFnIHx8IHVuZGVmaW5lZCA6IHVuZGVmaW5lZDtcbiAgY29uc3Qgb25EcmFnU3RhcnQgPSB0eXBlb2YgX3RpdGxlQmFyID09PSAnb2JqZWN0JyA/IF90aXRsZUJhci5vbkRyYWdTdGFydCB8fCB1bmRlZmluZWQgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IG9uRHJhZ0VuZCA9IHR5cGVvZiBfdGl0bGVCYXIgPT09ICdvYmplY3QnID8gX3RpdGxlQmFyLm9uRHJhZ0VuZCB8fCB1bmRlZmluZWQgOiB1bmRlZmluZWQ7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0KHtcbiAgICAgIHg6IHBvc2l0aW9uID09PSBudWxsIHx8IHBvc2l0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3NpdGlvbi54LFxuICAgICAgeTogcG9zaXRpb24gPT09IG51bGwgfHwgcG9zaXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvc2l0aW9uLnlcbiAgICB9KTtcbiAgfSwgW3Bvc2l0aW9uLCBzZXRdKTtcbiAgZ2xvYmFsU3R5bGVzKCk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFBhbmVsU2V0dGluZ3NDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHtcbiAgICAgIGhpZGVDb3B5QnV0dG9uOiBfaGlkZUNvcHlCdXR0b25cbiAgICB9XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkUm9vdCwge1xuICAgIHJlZjogcm9vdFJlZixcbiAgICBjbGFzc05hbWU6IHJvb3RDbGFzcyxcbiAgICBmaWxsOiBfZmlsbCxcbiAgICBmbGF0OiBfZmxhdCxcbiAgICBvbmVMaW5lTGFiZWxzOiBfb25lTGluZUxhYmVscyxcbiAgICBoaWRlVGl0bGVCYXI6ICFfdGl0bGVCYXIsXG4gICAgc3R5bGU6IHtcbiAgICAgIGRpc3BsYXk6IHNob3VsZFNob3cgPyAnYmxvY2snIDogJ25vbmUnXG4gICAgfVxuICB9LCBfdGl0bGVCYXIgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChUaXRsZVdpdGhGaWx0ZXIsIHtcbiAgICBvbkRyYWc6IHBvaW50ID0+IHtcbiAgICAgIHNldChwb2ludCk7XG4gICAgICBvbkRyYWcgPT09IG51bGwgfHwgb25EcmFnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkRyYWcocG9pbnQpO1xuICAgIH0sXG4gICAgb25EcmFnU3RhcnQ6IHBvaW50ID0+IG9uRHJhZ1N0YXJ0ID09PSBudWxsIHx8IG9uRHJhZ1N0YXJ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkRyYWdTdGFydChwb2ludCksXG4gICAgb25EcmFnRW5kOiBwb2ludCA9PiBvbkRyYWdFbmQgPT09IG51bGwgfHwgb25EcmFnRW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkRyYWdFbmQocG9pbnQpLFxuICAgIHNldEZpbHRlcjogc2V0RmlsdGVyLFxuICAgIHRvZ2dsZTogZmxhZyA9PiBzZXRUb2dnbGUodCA9PiBmbGFnICE9PSBudWxsICYmIGZsYWcgIT09IHZvaWQgMCA/IGZsYWcgOiAhdCksXG4gICAgdG9nZ2xlZDogdG9nZ2xlZCxcbiAgICB0aXRsZTogdGl0bGUsXG4gICAgZHJhZzogZHJhZyxcbiAgICBmaWx0ZXJFbmFibGVkOiBmaWx0ZXJFbmFibGVkLFxuICAgIGZyb206IHBvc2l0aW9uXG4gIH0pLCBzaG91bGRTaG93ICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3RvcmVDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHN0b3JlXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHJlZVdyYXBwZXIsIHtcbiAgICBpc1Jvb3Q6IHRydWUsXG4gICAgZmlsbDogX2ZpbGwsXG4gICAgZmxhdDogX2ZsYXQsXG4gICAgdHJlZTogdHJlZSxcbiAgICB0b2dnbGVkOiB0b2dnbGVkXG4gIH0pKSkpO1xufSk7XG5cbmNvbnN0IF9leGNsdWRlZCQxID0gW1wiaXNSb290XCJdO1xubGV0IHJvb3RJbml0aWFsaXplZCA9IGZhbHNlO1xubGV0IHJvb3RFbCA9IG51bGw7XG5mdW5jdGlvbiBMZXZhKF9yZWYpIHtcbiAgbGV0IHtcbiAgICAgIGlzUm9vdCA9IGZhbHNlXG4gICAgfSA9IF9yZWYsXG4gICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgX2V4Y2x1ZGVkJDEpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJvb3RJbml0aWFsaXplZCA9IHRydWU7XG4gICAgaWYgKCFpc1Jvb3QgJiYgcm9vdEVsKSB7XG4gICAgICByb290RWwucmVtb3ZlKCk7XG4gICAgICByb290RWwgPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKCFpc1Jvb3QpIHJvb3RJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIH07XG4gIH0sIFtpc1Jvb3RdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGV2YVJvb3QsIF9leHRlbmRzKHtcbiAgICBzdG9yZTogbGV2YVN0b3JlXG4gIH0sIHByb3BzKSk7XG59XG5cbmZ1bmN0aW9uIHVzZVJlbmRlclJvb3QoaXNHbG9iYWxQYW5lbCkge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0dsb2JhbFBhbmVsICYmICFyb290SW5pdGlhbGl6ZWQpIHtcbiAgICAgIGlmICghcm9vdEVsKSB7XG4gICAgICAgIHJvb3RFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZXZhX19yb290JykgfHwgT2JqZWN0LmFzc2lnbihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwge1xuICAgICAgICAgIGlkOiAnbGV2YV9fcm9vdCdcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyb290RWwpO1xuICAgICAgICAgIHJlbmRlcihSZWFjdC5jcmVhdGVFbGVtZW50KExldmEsIHtcbiAgICAgICAgICAgIGlzUm9vdDogdHJ1ZVxuICAgICAgICAgIH0pLCByb290RWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByb290SW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH1cbiAgfSwgW2lzR2xvYmFsUGFuZWxdKTtcbn1cblxuY29uc3QgX2V4Y2x1ZGVkID0gW1wic3RvcmVcIl07XG5mdW5jdGlvbiBMZXZhUGFuZWwoX3JlZikge1xuICBsZXQge1xuICAgICAgc3RvcmVcbiAgICB9ID0gX3JlZixcbiAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQpO1xuICBjb25zdCBwYXJlbnRTdG9yZSA9IHVzZVN0b3JlQ29udGV4dCgpO1xuICBjb25zdCBfc3RvcmUgPSBzdG9yZSA9PT0gdW5kZWZpbmVkID8gcGFyZW50U3RvcmUgOiBzdG9yZTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGV2YVJvb3QsIF9leHRlbmRzKHtcbiAgICBzdG9yZTogX3N0b3JlXG4gIH0sIHByb3BzKSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQXJncyhzY2hlbWFPckZvbGRlck5hbWUsIHNldHRpbmdzT3JEZXBzT3JTY2hlbWEsIGRlcHNPclNldHRpbmdzT3JGb2xkZXJTZXR0aW5ncywgZGVwc09yU2V0dGluZ3MsIGRlcHNPclVuZGVmaW5lZCkge1xuICBsZXQgc2NoZW1hO1xuICBsZXQgZm9sZGVyTmFtZSA9IHVuZGVmaW5lZDtcbiAgbGV0IGZvbGRlclNldHRpbmdzO1xuICBsZXQgaG9va1NldHRpbmdzO1xuICBsZXQgZGVwcztcbiAgaWYgKHR5cGVvZiBzY2hlbWFPckZvbGRlck5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgZm9sZGVyTmFtZSA9IHNjaGVtYU9yRm9sZGVyTmFtZTtcbiAgICBzY2hlbWEgPSBzZXR0aW5nc09yRGVwc09yU2NoZW1hO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGRlcHNPclNldHRpbmdzT3JGb2xkZXJTZXR0aW5ncykpIHtcbiAgICAgIGRlcHMgPSBkZXBzT3JTZXR0aW5nc09yRm9sZGVyU2V0dGluZ3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkZXBzT3JTZXR0aW5nc09yRm9sZGVyU2V0dGluZ3MpIHtcbiAgICAgICAgaWYgKCdzdG9yZScgaW4gZGVwc09yU2V0dGluZ3NPckZvbGRlclNldHRpbmdzKSB7XG4gICAgICAgICAgaG9va1NldHRpbmdzID0gZGVwc09yU2V0dGluZ3NPckZvbGRlclNldHRpbmdzO1xuICAgICAgICAgIGRlcHMgPSBkZXBzT3JTZXR0aW5ncztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb2xkZXJTZXR0aW5ncyA9IGRlcHNPclNldHRpbmdzT3JGb2xkZXJTZXR0aW5ncztcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkZXBzT3JTZXR0aW5ncykpIHtcbiAgICAgICAgICAgIGRlcHMgPSBkZXBzT3JTZXR0aW5ncztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaG9va1NldHRpbmdzID0gZGVwc09yU2V0dGluZ3M7XG4gICAgICAgICAgICBkZXBzID0gZGVwc09yVW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzY2hlbWEgPSBzY2hlbWFPckZvbGRlck5hbWU7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc2V0dGluZ3NPckRlcHNPclNjaGVtYSkpIHtcbiAgICAgIGRlcHMgPSBzZXR0aW5nc09yRGVwc09yU2NoZW1hO1xuICAgIH0gZWxzZSB7XG4gICAgICBob29rU2V0dGluZ3MgPSBzZXR0aW5nc09yRGVwc09yU2NoZW1hO1xuICAgICAgZGVwcyA9IGRlcHNPclNldHRpbmdzT3JGb2xkZXJTZXR0aW5ncztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBzY2hlbWEsXG4gICAgZm9sZGVyTmFtZSxcbiAgICBmb2xkZXJTZXR0aW5ncyxcbiAgICBob29rU2V0dGluZ3MsXG4gICAgZGVwczogZGVwcyB8fCBbXVxuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VDb250cm9scyhzY2hlbWFPckZvbGRlck5hbWUsIHNldHRpbmdzT3JEZXBzT3JTY2hlbWEsIGRlcHNPclNldHRpbmdzT3JGb2xkZXJTZXR0aW5ncywgZGVwc09yU2V0dGluZ3MsIGRlcHNPclVuZGVmaW5lZCkge1xuICBjb25zdCB7XG4gICAgZm9sZGVyTmFtZSxcbiAgICBzY2hlbWEsXG4gICAgZm9sZGVyU2V0dGluZ3MsXG4gICAgaG9va1NldHRpbmdzLFxuICAgIGRlcHNcbiAgfSA9IHBhcnNlQXJncyhzY2hlbWFPckZvbGRlck5hbWUsIHNldHRpbmdzT3JEZXBzT3JTY2hlbWEsIGRlcHNPclNldHRpbmdzT3JGb2xkZXJTZXR0aW5ncywgZGVwc09yU2V0dGluZ3MsIGRlcHNPclVuZGVmaW5lZCk7XG4gIGNvbnN0IHNjaGVtYUlzRnVuY3Rpb24gPSB0eXBlb2Ygc2NoZW1hID09PSAnZnVuY3Rpb24nO1xuXG4gIGNvbnN0IGRlcHNDaGFuZ2VkID0gdXNlUmVmKGZhbHNlKTtcbiAgY29uc3QgZmlyc3RSZW5kZXIgPSB1c2VSZWYodHJ1ZSk7XG5cbiAgY29uc3QgX3NjaGVtYSA9IHVzZURlZXBNZW1vKCgpID0+IHtcbiAgICBkZXBzQ2hhbmdlZC5jdXJyZW50ID0gdHJ1ZTtcbiAgICBjb25zdCBzID0gdHlwZW9mIHNjaGVtYSA9PT0gJ2Z1bmN0aW9uJyA/IHNjaGVtYSgpIDogc2NoZW1hO1xuICAgIHJldHVybiBmb2xkZXJOYW1lID8ge1xuICAgICAgW2ZvbGRlck5hbWVdOiBmb2xkZXIocywgZm9sZGVyU2V0dGluZ3MpXG4gICAgfSA6IHM7XG4gIH0sIGRlcHMpO1xuXG4gIGNvbnN0IGlzR2xvYmFsUGFuZWwgPSAhKGhvb2tTZXR0aW5ncyAhPT0gbnVsbCAmJiBob29rU2V0dGluZ3MgIT09IHZvaWQgMCAmJiBob29rU2V0dGluZ3Muc3RvcmUpO1xuICB1c2VSZW5kZXJSb290KGlzR2xvYmFsUGFuZWwpO1xuICBjb25zdCBbc3RvcmVdID0gdXNlU3RhdGUoKCkgPT4gKGhvb2tTZXR0aW5ncyA9PT0gbnVsbCB8fCBob29rU2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGhvb2tTZXR0aW5ncy5zdG9yZSkgfHwgbGV2YVN0b3JlKTtcblxuICBjb25zdCBbaW5pdGlhbERhdGEsIG1hcHBlZFBhdGhzXSA9IHVzZU1lbW8oKCkgPT4gc3RvcmUuZ2V0RGF0YUZyb21TY2hlbWEoX3NjaGVtYSksIFtzdG9yZSwgX3NjaGVtYV0pO1xuICBjb25zdCBbYWxsUGF0aHMsIHJlbmRlclBhdGhzLCBvbkNoYW5nZVBhdGhzLCBvbkVkaXRTdGFydFBhdGhzLCBvbkVkaXRFbmRQYXRoc10gPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBhbGxQYXRocyA9IFtdO1xuICAgIGNvbnN0IHJlbmRlclBhdGhzID0gW107XG4gICAgY29uc3Qgb25DaGFuZ2VQYXRocyA9IHt9O1xuICAgIGNvbnN0IG9uRWRpdFN0YXJ0UGF0aHMgPSB7fTtcbiAgICBjb25zdCBvbkVkaXRFbmRQYXRocyA9IHt9O1xuICAgIE9iamVjdC52YWx1ZXMobWFwcGVkUGF0aHMpLmZvckVhY2goKHtcbiAgICAgIHBhdGgsXG4gICAgICBvbkNoYW5nZSxcbiAgICAgIG9uRWRpdFN0YXJ0LFxuICAgICAgb25FZGl0RW5kLFxuICAgICAgdHJhbnNpZW50XG4gICAgfSkgPT4ge1xuICAgICAgYWxsUGF0aHMucHVzaChwYXRoKTtcbiAgICAgIGlmICghIW9uQ2hhbmdlKSB7XG4gICAgICAgIG9uQ2hhbmdlUGF0aHNbcGF0aF0gPSBvbkNoYW5nZTtcbiAgICAgICAgaWYgKCF0cmFuc2llbnQpIHtcbiAgICAgICAgICByZW5kZXJQYXRocy5wdXNoKHBhdGgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW5kZXJQYXRocy5wdXNoKHBhdGgpO1xuICAgICAgfVxuICAgICAgaWYgKG9uRWRpdFN0YXJ0KSB7XG4gICAgICAgIG9uRWRpdFN0YXJ0UGF0aHNbcGF0aF0gPSBvbkVkaXRTdGFydDtcbiAgICAgIH1cbiAgICAgIGlmIChvbkVkaXRFbmQpIHtcbiAgICAgICAgb25FZGl0RW5kUGF0aHNbcGF0aF0gPSBvbkVkaXRFbmQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFthbGxQYXRocywgcmVuZGVyUGF0aHMsIG9uQ2hhbmdlUGF0aHMsIG9uRWRpdFN0YXJ0UGF0aHMsIG9uRWRpdEVuZFBhdGhzXTtcbiAgfSwgW21hcHBlZFBhdGhzXSk7XG5cbiAgY29uc3QgcGF0aHMgPSB1c2VNZW1vKCgpID0+IHN0b3JlLm9yZGVyUGF0aHMoYWxsUGF0aHMpLCBbYWxsUGF0aHMsIHN0b3JlXSk7XG5cbiAgY29uc3QgdmFsdWVzID0gdXNlVmFsdWVzRm9yUGF0aChzdG9yZSwgcmVuZGVyUGF0aHMsIGluaXRpYWxEYXRhKTtcbiAgY29uc3Qgc2V0ID0gdXNlQ2FsbGJhY2sodmFsdWVzID0+IHtcbiAgICBjb25zdCBfdmFsdWVzID0gT2JqZWN0LmVudHJpZXModmFsdWVzKS5yZWR1Y2UoKGFjYywgW3AsIHZdKSA9PiBPYmplY3QuYXNzaWduKGFjYywge1xuICAgICAgW21hcHBlZFBhdGhzW3BdLnBhdGhdOiB2XG4gICAgfSksIHt9KTtcbiAgICBzdG9yZS5zZXQoX3ZhbHVlcywgZmFsc2UpO1xuICB9LCBbc3RvcmUsIG1hcHBlZFBhdGhzXSk7XG4gIGNvbnN0IGdldCA9IHVzZUNhbGxiYWNrKHBhdGggPT4gc3RvcmUuZ2V0KG1hcHBlZFBhdGhzW3BhdGhdLnBhdGgpLCBbc3RvcmUsIG1hcHBlZFBhdGhzXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG5cbiAgICBjb25zdCBzaG91bGRPdmVycmlkZVNldHRpbmdzID0gIWZpcnN0UmVuZGVyLmN1cnJlbnQgJiYgZGVwc0NoYW5nZWQuY3VycmVudDtcbiAgICBzdG9yZS5hZGREYXRhKGluaXRpYWxEYXRhLCBzaG91bGRPdmVycmlkZVNldHRpbmdzKTtcbiAgICBmaXJzdFJlbmRlci5jdXJyZW50ID0gZmFsc2U7XG4gICAgZGVwc0NoYW5nZWQuY3VycmVudCA9IGZhbHNlO1xuICAgIHJldHVybiAoKSA9PiBzdG9yZS5kaXNwb3NlUGF0aHMocGF0aHMpO1xuICB9LCBbc3RvcmUsIHBhdGhzLCBpbml0aWFsRGF0YV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIE9iamVjdC5lbnRyaWVzKG9uQ2hhbmdlUGF0aHMpLmZvckVhY2goKFtwYXRoLCBvbkNoYW5nZV0pID0+IHtcbiAgICAgIG9uQ2hhbmdlKHN0b3JlLmdldChwYXRoKSwgcGF0aCwgX29iamVjdFNwcmVhZDIoe1xuICAgICAgICBpbml0aWFsOiB0cnVlLFxuICAgICAgICBnZXQ6IHN0b3JlLmdldFxuICAgICAgfSwgc3RvcmUuZ2V0SW5wdXQocGF0aCkpKTtcbiAgICAgIGNvbnN0IHVuc3ViID0gc3RvcmUudXNlU3RvcmUuc3Vic2NyaWJlKHMgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHMuZGF0YVtwYXRoXTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpbnB1dC5kaXNhYmxlZCA/IHVuZGVmaW5lZCA6IGlucHV0LnZhbHVlO1xuICAgICAgICByZXR1cm4gW3ZhbHVlLCBpbnB1dF07XG4gICAgICB9LCAoW3ZhbHVlLCBpbnB1dF0pID0+IG9uQ2hhbmdlKHZhbHVlLCBwYXRoLCBfb2JqZWN0U3ByZWFkMih7XG4gICAgICAgIGluaXRpYWw6IGZhbHNlLFxuICAgICAgICBnZXQ6IHN0b3JlLmdldFxuICAgICAgfSwgaW5wdXQpKSwge1xuICAgICAgICBlcXVhbGl0eUZuOiBzaGFsbG93XG4gICAgICB9KTtcbiAgICAgIHVuc3Vic2NyaXB0aW9ucy5wdXNoKHVuc3ViKTtcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpcHRpb25zLmZvckVhY2godW5zdWIgPT4gdW5zdWIoKSk7XG4gIH0sIFtzdG9yZSwgb25DaGFuZ2VQYXRoc10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIE9iamVjdC5lbnRyaWVzKG9uRWRpdFN0YXJ0UGF0aHMpLmZvckVhY2goKFtwYXRoLCBvbkVkaXRTdGFydF0pID0+IHVuc3Vic2NyaXB0aW9ucy5wdXNoKHN0b3JlLnN1YnNjcmliZVRvRWRpdFN0YXJ0KHBhdGgsIG9uRWRpdFN0YXJ0KSkpO1xuICAgIE9iamVjdC5lbnRyaWVzKG9uRWRpdEVuZFBhdGhzKS5mb3JFYWNoKChbcGF0aCwgb25FZGl0RW5kXSkgPT4gdW5zdWJzY3JpcHRpb25zLnB1c2goc3RvcmUuc3Vic2NyaWJlVG9FZGl0RW5kKHBhdGgsIG9uRWRpdEVuZCkpKTtcbiAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpcHRpb25zLmZvckVhY2godW5zdWIgPT4gdW5zdWIoKSk7XG4gIH0sIFtvbkVkaXRTdGFydFBhdGhzLCBvbkVkaXRFbmRQYXRocywgc3RvcmVdKTtcbiAgaWYgKHNjaGVtYUlzRnVuY3Rpb24pIHJldHVybiBbdmFsdWVzLCBzZXQsIGdldF07XG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbnJlZ2lzdGVyKExldmFJbnB1dHMuU0VMRUNULCBzZWxlY3QpO1xucmVnaXN0ZXIoTGV2YUlucHV0cy5JTUFHRSwgaW1hZ2UpO1xucmVnaXN0ZXIoTGV2YUlucHV0cy5OVU1CRVIsIG51bWJlciQxKTtcbnJlZ2lzdGVyKExldmFJbnB1dHMuQ09MT1IsIGNvbG9yKTtcbnJlZ2lzdGVyKExldmFJbnB1dHMuU1RSSU5HLCBzdHJpbmcpO1xucmVnaXN0ZXIoTGV2YUlucHV0cy5CT09MRUFOLCBib29sZWFuKTtcbnJlZ2lzdGVyKExldmFJbnB1dHMuSU5URVJWQUwsIGludGVydmFsKTtcbnJlZ2lzdGVyKExldmFJbnB1dHMuVkVDVE9SM0QsIHZlY3RvcjNkKTtcbnJlZ2lzdGVyKExldmFJbnB1dHMuVkVDVE9SMkQsIHZlY3RvcjJkKTtcblxuZXhwb3J0IHsgTGV2YSwgTGV2YVBhbmVsLCBidXR0b24sIGJ1dHRvbkdyb3VwLCBmb2xkZXIsIGxldmFTdG9yZSwgbW9uaXRvciwgdXNlQ29udHJvbHMsIHVzZUNyZWF0ZVN0b3JlIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/leva/dist/leva.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/leva/dist/vector-plugin-6f82aee9.esm.js":
/*!**************************************************************!*\
  !*** ./node_modules/leva/dist/vector-plugin-6f82aee9.esm.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ ThemeContext),\n/* harmony export */   A: () => (/* binding */ useInputSetters),\n/* harmony export */   B: () => (/* binding */ Plugins),\n/* harmony export */   C: () => (/* binding */ InputContext),\n/* harmony export */   D: () => (/* binding */ StyledInputWrapper$1),\n/* harmony export */   E: () => (/* binding */ useStoreContext),\n/* harmony export */   F: () => (/* binding */ useCanvas2d),\n/* harmony export */   G: () => (/* binding */ useInput),\n/* harmony export */   H: () => (/* binding */ log),\n/* harmony export */   I: () => (/* binding */ Indicator),\n/* harmony export */   J: () => (/* binding */ StyledTitle),\n/* harmony export */   K: () => (/* binding */ Chevron),\n/* harmony export */   L: () => (/* binding */ Label),\n/* harmony export */   M: () => (/* binding */ StyledWrapper),\n/* harmony export */   N: () => (/* binding */ StyledContent),\n/* harmony export */   O: () => (/* binding */ Overlay),\n/* harmony export */   P: () => (/* binding */ Portal),\n/* harmony export */   Q: () => (/* binding */ StyledFolder),\n/* harmony export */   R: () => (/* binding */ Row),\n/* harmony export */   S: () => (/* binding */ Scrubber),\n/* harmony export */   T: () => (/* binding */ StyledInputRow),\n/* harmony export */   U: () => (/* binding */ debounce),\n/* harmony export */   V: () => (/* binding */ ValueInput),\n/* harmony export */   W: () => (/* binding */ globalStyles),\n/* harmony export */   X: () => (/* binding */ PanelSettingsContext),\n/* harmony export */   Y: () => (/* binding */ StoreContext),\n/* harmony export */   Z: () => (/* binding */ mergeTheme),\n/* harmony export */   _: () => (/* binding */ _objectSpread2),\n/* harmony export */   a: () => (/* binding */ Vector),\n/* harmony export */   a0: () => (/* binding */ render),\n/* harmony export */   a1: () => (/* binding */ register),\n/* harmony export */   a2: () => (/* binding */ LevaInputs),\n/* harmony export */   a3: () => (/* binding */ select),\n/* harmony export */   a4: () => (/* binding */ number),\n/* harmony export */   a5: () => (/* binding */ string),\n/* harmony export */   a6: () => (/* binding */ boolean),\n/* harmony export */   a7: () => (/* binding */ LevaStoreProvider),\n/* harmony export */   a8: () => (/* binding */ String$1),\n/* harmony export */   a9: () => (/* binding */ Number$1),\n/* harmony export */   aa: () => (/* binding */ Boolean),\n/* harmony export */   ab: () => (/* binding */ Select),\n/* harmony export */   ac: () => (/* binding */ InnerLabel),\n/* harmony export */   ad: () => (/* binding */ pad),\n/* harmony export */   ae: () => (/* binding */ evaluate),\n/* harmony export */   af: () => (/* binding */ mergeRefs),\n/* harmony export */   ag: () => (/* binding */ createPlugin),\n/* harmony export */   ah: () => (/* binding */ keyframes),\n/* harmony export */   ai: () => (/* binding */ getVectorSchema),\n/* harmony export */   aj: () => (/* binding */ getVectorType),\n/* harmony export */   ak: () => (/* binding */ sanitizeVector),\n/* harmony export */   al: () => (/* binding */ formatVector),\n/* harmony export */   am: () => (/* binding */ normalizeVector),\n/* harmony export */   b: () => (/* binding */ useTransform),\n/* harmony export */   c: () => (/* binding */ createInternalPlugin),\n/* harmony export */   d: () => (/* binding */ useTh),\n/* harmony export */   e: () => (/* binding */ useDrag),\n/* harmony export */   f: () => (/* binding */ _extends),\n/* harmony export */   g: () => (/* binding */ getVectorPlugin),\n/* harmony export */   h: () => (/* binding */ clamp),\n/* harmony export */   i: () => (/* binding */ _objectWithoutProperties),\n/* harmony export */   j: () => (/* binding */ invertedRange),\n/* harmony export */   k: () => (/* binding */ sanitizeStep),\n/* harmony export */   l: () => (/* binding */ RangeWrapper),\n/* harmony export */   m: () => (/* binding */ multiplyStep),\n/* harmony export */   n: () => (/* binding */ normalizeKeyedNumberSettings),\n/* harmony export */   o: () => (/* binding */ omit),\n/* harmony export */   p: () => (/* binding */ pick),\n/* harmony export */   q: () => (/* binding */ Range),\n/* harmony export */   r: () => (/* binding */ range),\n/* harmony export */   s: () => (/* binding */ styled),\n/* harmony export */   t: () => (/* binding */ getUid),\n/* harmony export */   u: () => (/* binding */ useInputContext),\n/* harmony export */   v: () => (/* binding */ SpecialInputs),\n/* harmony export */   w: () => (/* binding */ warn),\n/* harmony export */   x: () => (/* binding */ LevaErrors),\n/* harmony export */   y: () => (/* binding */ updateInput),\n/* harmony export */   z: () => (/* binding */ normalizeInput)\n/* harmony export */ });\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _radix_ui_react_portal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @radix-ui/react-portal */ \"(ssr)/./node_modules/@radix-ui/react-portal/dist/index.mjs\");\n/* harmony import */ var dequal_lite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dequal/lite */ \"(ssr)/./node_modules/dequal/lite/index.mjs\");\n/* harmony import */ var zustand_shallow__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zustand/shallow */ \"(ssr)/./node_modules/leva/node_modules/zustand/esm/shallow.js\");\n/* harmony import */ var v8n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! v8n */ \"(ssr)/./node_modules/v8n/dist/v8n.esm.js\");\n/* harmony import */ var _stitches_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stitches/react */ \"(ssr)/./node_modules/@stitches/react/dist/index.mjs\");\n/* harmony import */ var _use_gesture_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @use-gesture/react */ \"(ssr)/./node_modules/@use-gesture/react/dist/use-gesture-react.esm.js\");\n/* harmony import */ var _radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @radix-ui/react-tooltip */ \"(ssr)/./node_modules/@radix-ui/react-tooltip/dist/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n\nlet LevaErrors;\n(function (LevaErrors) {\n  LevaErrors[LevaErrors[\"UNSUPPORTED_INPUT\"] = 0] = \"UNSUPPORTED_INPUT\";\n  LevaErrors[LevaErrors[\"NO_COMPONENT_FOR_TYPE\"] = 1] = \"NO_COMPONENT_FOR_TYPE\";\n  LevaErrors[LevaErrors[\"UNKNOWN_INPUT\"] = 2] = \"UNKNOWN_INPUT\";\n  LevaErrors[LevaErrors[\"DUPLICATE_KEYS\"] = 3] = \"DUPLICATE_KEYS\";\n  LevaErrors[LevaErrors[\"ALREADY_REGISTERED_TYPE\"] = 4] = \"ALREADY_REGISTERED_TYPE\";\n  LevaErrors[LevaErrors[\"CLIPBOARD_ERROR\"] = 5] = \"CLIPBOARD_ERROR\";\n  LevaErrors[LevaErrors[\"THEME_ERROR\"] = 6] = \"THEME_ERROR\";\n  LevaErrors[LevaErrors[\"PATH_DOESNT_EXIST\"] = 7] = \"PATH_DOESNT_EXIST\";\n  LevaErrors[LevaErrors[\"INPUT_TYPE_OVERRIDE\"] = 8] = \"INPUT_TYPE_OVERRIDE\";\n  LevaErrors[LevaErrors[\"EMPTY_KEY\"] = 9] = \"EMPTY_KEY\";\n})(LevaErrors || (LevaErrors = {}));\nconst ErrorList = {\n  [LevaErrors.UNSUPPORTED_INPUT]: (type, path) => [`An input with type \\`${type}\\` input was found at path \\`${path}\\` but it's not supported yet.`],\n  [LevaErrors.NO_COMPONENT_FOR_TYPE]: (type, path) => [`Type \\`${type}\\` found at path \\`${path}\\` can't be displayed in panel because no component supports it yet.`],\n  [LevaErrors.UNKNOWN_INPUT]: (path, value) => [`input at path \\`${path}\\` is not recognized.`, value],\n  [LevaErrors.DUPLICATE_KEYS]: (key, path, prevPath) => [`Key \\`${key}\\` of path \\`${path}\\` already exists at path \\`${prevPath}\\`. Even nested keys need to be unique. Rename one of the keys.`],\n  [LevaErrors.ALREADY_REGISTERED_TYPE]: type => [`Type ${type} has already been registered. You can't register a component with the same type.`],\n  [LevaErrors.CLIPBOARD_ERROR]: value => [`Error copying the value`, value],\n  [LevaErrors.THEME_ERROR]: (category, key) => [`Error accessing the theme \\`${category}.${key}\\` value.`],\n  [LevaErrors.PATH_DOESNT_EXIST]: path => [`Error getting the value at path \\`${path}\\`. There is probably an error in your \\`render\\` function.`],\n  [LevaErrors.PATH_DOESNT_EXIST]: path => [`Error accessing the value at path \\`${path}\\``],\n  [LevaErrors.INPUT_TYPE_OVERRIDE]: (path, type, wrongType) => [`Input at path \\`${path}\\` already exists with type: \\`${type}\\`. Its type cannot be overridden with type \\`${wrongType}\\`.`],\n  [LevaErrors.EMPTY_KEY]: () => ['Keys can not be empty, if you want to hide a label use whitespace.']\n};\nfunction _log(fn, errorType, ...args) {\n  const [message, ...rest] = ErrorList[errorType](...args);\n  console[fn]('LEVA: ' + message, ...rest);\n}\n\nconst warn = _log.bind(null, 'warn');\nconst log = _log.bind(null, 'log');\n\nconst _excluded$a = [\"value\"],\n  _excluded2$4 = [\"schema\"],\n  _excluded3$1 = [\"value\"];\nconst Schemas = [];\nconst Plugins = {};\nfunction getValueType(_ref) {\n  let {\n      value\n    } = _ref,\n    settings = _objectWithoutProperties(_ref, _excluded$a);\n  for (let checker of Schemas) {\n    const type = checker(value, settings);\n    if (type) return type;\n  }\n  return undefined;\n}\n\nfunction register(type, _ref2) {\n  let {\n      schema\n    } = _ref2,\n    plugin = _objectWithoutProperties(_ref2, _excluded2$4);\n  if (type in Plugins) {\n    warn(LevaErrors.ALREADY_REGISTERED_TYPE, type);\n    return;\n  }\n  Schemas.push((value, settings) => schema(value, settings) && type);\n  Plugins[type] = plugin;\n}\nconst getUniqueType = () => '__CUSTOM__PLUGIN__' + Math.random().toString(36).substr(2, 9);\n\nfunction createInternalPlugin(plugin) {\n  return plugin;\n}\nfunction createPlugin(plugin) {\n  const type = getUniqueType();\n  Plugins[type] = plugin;\n  return input => {\n    return {\n      type,\n      __customInput: input\n    };\n  };\n}\nfunction normalize$3(type, input, path, data) {\n  const {\n    normalize: _normalize\n  } = Plugins[type];\n  if (_normalize) return _normalize(input, path, data);\n  if (typeof input !== 'object' || !('value' in input)) return {\n    value: input\n  };\n  const {\n      value\n    } = input,\n    settings = _objectWithoutProperties(input, _excluded3$1);\n  return {\n    value,\n    settings\n  };\n}\nfunction sanitize$4(type, value, settings, prevValue, path, store) {\n  const {\n    sanitize\n  } = Plugins[type];\n  if (sanitize) return sanitize(value, settings, prevValue, path, store);\n  return value;\n}\nfunction format$2(type, value, settings) {\n  const {\n    format\n  } = Plugins[type];\n  if (format) return format(value, settings);\n  return value;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n\nconst clamp = (x, min, max) => x > max ? max : x < min ? min : x;\nconst pad = (x, pad) => String(x).padStart(pad, '0');\nconst parseNumber = v => {\n  if (v === '' || typeof v === 'number') return v;\n  try {\n    const _v = evaluate(v);\n    if (!isNaN(_v)) return _v;\n  } catch (_unused) {}\n  return parseFloat(v);\n};\nconst log10 = Math.log(10);\nfunction getStep(number) {\n  let n = Math.abs(+String(number).replace('.', ''));\n  if (n === 0) return 0.01;\n  while (n !== 0 && n % 10 === 0) n /= 10;\n  const significantDigits = Math.floor(Math.log(n) / log10) + 1;\n  const numberLog = Math.floor(Math.log10(Math.abs(number)));\n  const step = Math.pow(10, numberLog - significantDigits);\n  return Math.max(step, 0.001);\n}\nconst range = (v, min, max) => {\n  if (max === min) return 0;\n  const _v = clamp(v, min, max);\n  return (_v - min) / (max - min);\n};\nconst invertedRange = (p, min, max) => p * (max - min) + min;\n\nconst getUid = () => '_' + Math.random().toString(36).substr(2, 9);\nconst parens = /\\(([0-9+\\-*/^ .]+)\\)/;\nconst exp = /(\\d+(?:\\.\\d+)?) ?\\^ ?(\\d+(?:\\.\\d+)?)/;\nconst mul = /(\\d+(?:\\.\\d+)?) ?\\* ?(\\d+(?:\\.\\d+)?)/;\nconst div = /(\\d+(?:\\.\\d+)?) ?\\/ ?(\\d+(?:\\.\\d+)?)/;\nconst add = /(\\d+(?:\\.\\d+)?) ?\\+ ?(\\d+(?:\\.\\d+)?)/;\nconst sub = /(\\d+(?:\\.\\d+)?) ?- ?(\\d+(?:\\.\\d+)?)/;\n\nfunction evaluate(expr) {\n  if (isNaN(Number(expr))) {\n    if (parens.test(expr)) {\n      const newExpr = expr.replace(parens, (match, subExpr) => String(evaluate(subExpr)));\n      return evaluate(newExpr);\n    } else if (exp.test(expr)) {\n      const newExpr = expr.replace(exp, (match, base, pow) => String(Math.pow(Number(base), Number(pow))));\n      return evaluate(newExpr);\n    } else if (mul.test(expr)) {\n      const newExpr = expr.replace(mul, (match, a, b) => String(Number(a) * Number(b)));\n      return evaluate(newExpr);\n    } else if (div.test(expr)) {\n      const newExpr = expr.replace(div, (match, a, b) => {\n        if (b != 0) return String(Number(a) / Number(b));else throw new Error('Division by zero');\n      });\n      return evaluate(newExpr);\n    } else if (add.test(expr)) {\n      const newExpr = expr.replace(add, (match, a, b) => String(Number(a) + Number(b)));\n      return evaluate(newExpr);\n    } else if (sub.test(expr)) {\n      const newExpr = expr.replace(sub, (match, a, b) => String(Number(a) - Number(b)));\n      return evaluate(newExpr);\n    } else {\n      return Number(expr);\n    }\n  }\n  return Number(expr);\n}\n\nfunction pick(object, keys) {\n  return keys.reduce((obj, key) => {\n    if (!!object && object.hasOwnProperty(key)) {\n      obj[key] = object[key];\n    }\n    return obj;\n  }, {});\n}\nfunction omit(object, keys) {\n  const obj = _objectSpread2({}, object);\n  keys.forEach(k => k in object && delete obj[k]);\n  return obj;\n}\nfunction mapArrayToKeys(value, keys) {\n  return value.reduce((acc, v, i) => Object.assign(acc, {\n    [keys[i]]: v\n  }), {});\n}\nfunction isObject(variable) {\n  return Object.prototype.toString.call(variable) === '[object Object]';\n}\nconst isEmptyObject = obj => isObject(obj) && Object.keys(obj).length === 0;\n\nlet SpecialInputs;\n(function (SpecialInputs) {\n  SpecialInputs[\"BUTTON\"] = \"BUTTON\";\n  SpecialInputs[\"BUTTON_GROUP\"] = \"BUTTON_GROUP\";\n  SpecialInputs[\"MONITOR\"] = \"MONITOR\";\n  SpecialInputs[\"FOLDER\"] = \"FOLDER\";\n})(SpecialInputs || (SpecialInputs = {}));\nlet LevaInputs;\n(function (LevaInputs) {\n  LevaInputs[\"SELECT\"] = \"SELECT\";\n  LevaInputs[\"IMAGE\"] = \"IMAGE\";\n  LevaInputs[\"NUMBER\"] = \"NUMBER\";\n  LevaInputs[\"COLOR\"] = \"COLOR\";\n  LevaInputs[\"STRING\"] = \"STRING\";\n  LevaInputs[\"BOOLEAN\"] = \"BOOLEAN\";\n  LevaInputs[\"INTERVAL\"] = \"INTERVAL\";\n  LevaInputs[\"VECTOR3D\"] = \"VECTOR3D\";\n  LevaInputs[\"VECTOR2D\"] = \"VECTOR2D\";\n})(LevaInputs || (LevaInputs = {}));\n\nconst _excluded$9 = [\"type\", \"__customInput\"],\n  _excluded2$3 = [\"render\", \"label\", \"optional\", \"order\", \"disabled\", \"hint\", \"onChange\", \"onEditStart\", \"onEditEnd\", \"transient\"],\n  _excluded3 = [\"type\"];\nfunction parseOptions(_input, key, mergedOptions = {}, customType) {\n  var _commonOptions$option, _commonOptions$disabl;\n  if (typeof _input !== 'object' || Array.isArray(_input)) {\n    return {\n      type: customType,\n      input: _input,\n      options: _objectSpread2({\n        key,\n        label: key,\n        optional: false,\n        disabled: false,\n        order: 0\n      }, mergedOptions)\n    };\n  }\n\n  if ('__customInput' in _input) {\n    const {\n        type: _type,\n        __customInput\n      } = _input,\n      options = _objectWithoutProperties(_input, _excluded$9);\n    return parseOptions(__customInput, key, options, _type);\n  }\n\n  const {\n      render,\n      label,\n      optional,\n      order = 0,\n      disabled,\n      hint,\n      onChange,\n      onEditStart,\n      onEditEnd,\n      transient\n    } = _input,\n    inputWithType = _objectWithoutProperties(_input, _excluded2$3);\n  const commonOptions = _objectSpread2({\n    render,\n    key,\n    label: label !== null && label !== void 0 ? label : key,\n    hint,\n    transient: transient !== null && transient !== void 0 ? transient : !!onChange,\n    onEditStart,\n    onEditEnd,\n    disabled,\n    optional,\n    order\n  }, mergedOptions);\n  let {\n      type\n    } = inputWithType,\n    input = _objectWithoutProperties(inputWithType, _excluded3);\n  type = customType !== null && customType !== void 0 ? customType : type;\n  if (type in SpecialInputs) {\n    return {\n      type,\n      input,\n      options: commonOptions\n    };\n  }\n\n  let computedInput;\n  if (customType && isObject(input) && 'value' in input) computedInput = input.value;else computedInput = isEmptyObject(input) ? undefined : input;\n  return {\n    type,\n    input: computedInput,\n    options: _objectSpread2(_objectSpread2({}, commonOptions), {}, {\n      onChange,\n      optional: (_commonOptions$option = commonOptions.optional) !== null && _commonOptions$option !== void 0 ? _commonOptions$option : false,\n      disabled: (_commonOptions$disabl = commonOptions.disabled) !== null && _commonOptions$disabl !== void 0 ? _commonOptions$disabl : false\n    })\n  };\n}\n\nfunction normalizeInput(_input, key, path, data) {\n  const parsedInputAndOptions = parseOptions(_input, key);\n  const {\n    type,\n    input: parsedInput,\n    options\n  } = parsedInputAndOptions;\n  if (type) {\n    if (type in SpecialInputs)\n      return parsedInputAndOptions;\n\n    return {\n      type,\n      input: normalize$3(type, parsedInput, path, data),\n      options\n    };\n  }\n  let inputType = getValueType(parsedInput);\n  if (inputType) return {\n    type: inputType,\n    input: normalize$3(inputType, parsedInput, path, data),\n    options\n  };\n  inputType = getValueType({\n    value: parsedInput\n  });\n  if (inputType) return {\n    type: inputType,\n    input: normalize$3(inputType, {\n      value: parsedInput\n    }, path, data),\n    options\n  };\n\n  return false;\n}\nfunction updateInput(input, newValue, path, store, fromPanel) {\n  const {\n    value,\n    type,\n    settings\n  } = input;\n  input.value = sanitizeValue({\n    type,\n    value,\n    settings\n  }, newValue, path, store);\n  input.fromPanel = fromPanel;\n}\nconst ValueError = function ValueError(message, value, error) {\n  this.type = 'LEVA_ERROR';\n  this.message = 'LEVA: ' + message;\n  this.previousValue = value;\n  this.error = error;\n};\nfunction sanitizeValue({\n  type,\n  value,\n  settings\n}, newValue, path, store) {\n  const _newValue = type !== 'SELECT' && typeof newValue === 'function' ? newValue(value) : newValue;\n  let sanitizedNewValue;\n  try {\n    sanitizedNewValue = sanitize$4(type, _newValue, settings, value, path, store);\n  } catch (e) {\n    throw new ValueError(`The value \\`${newValue}\\` did not result in a correct value.`, value, e);\n  }\n  if ((0,dequal_lite__WEBPACK_IMPORTED_MODULE_2__.dequal)(sanitizedNewValue, value)) {\n\n    return value;\n\n  }\n\n  return sanitizedNewValue;\n}\n\nconst debounce = (callback, wait, immediate = false) => {\n  let timeout = 0;\n  return function () {\n    const args = arguments;\n    const callNow = immediate && !timeout;\n    const next = () => callback.apply(this, args);\n    window.clearTimeout(timeout);\n    timeout = window.setTimeout(next, wait);\n    if (callNow) next();\n  };\n};\n\nconst multiplyStep = event => event.shiftKey ? 5 : event.altKey ? 1 / 5 : 1;\n\nfunction render(element, container) {\n  const error = console.error;\n  console.error = () => {};\n  react_dom__WEBPACK_IMPORTED_MODULE_0___default().render(element, container);\n  console.error = error;\n}\n\nfunction mergeRefs(refs) {\n  return value => {\n    refs.forEach(ref => {\n      if (typeof ref === 'function') ref(value);else if (ref != null) {\n        ref.current = value;\n      }\n    });\n  };\n}\n\nconst _excluded$8 = [\"value\"],\n  _excluded2$2 = [\"min\", \"max\"];\nconst schema$3 = v => {\n  if (typeof v === 'number') return true;\n  if (typeof v === 'string') {\n    const _v = parseFloat(v);\n    if (isNaN(_v)) return false;\n    const suffix = v.substring(('' + _v).length).trim();\n    return suffix.length < 4;\n  }\n  return false;\n};\nconst sanitize$3 = (v, {\n  min: _min = -Infinity,\n  max: _max = Infinity,\n  suffix\n}) => {\n  const _v = parseFloat(v);\n  if (v === '' || isNaN(_v)) throw Error('Invalid number');\n  const f = clamp(_v, _min, _max);\n  return suffix ? f + suffix : f;\n};\nconst format$1 = (v, {\n  pad: _pad = 0,\n  suffix\n}) => {\n  const f = parseFloat(v).toFixed(_pad);\n  return suffix ? f + suffix : f;\n};\nconst normalize$2 = _ref => {\n  let {\n      value\n    } = _ref,\n    settings = _objectWithoutProperties(_ref, _excluded$8);\n  const {\n      min = -Infinity,\n      max = Infinity\n    } = settings,\n    _settings = _objectWithoutProperties(settings, _excluded2$2);\n  let _value = parseFloat(value);\n  const suffix = typeof value === 'string' ? value.substring(('' + _value).length) : undefined;\n  _value = clamp(_value, min, max);\n\n  let step = settings.step;\n  if (!step) {\n    if (Number.isFinite(min)) {\n      if (Number.isFinite(max)) step = +(Math.abs(max - min) / 100).toPrecision(1);else step = +(Math.abs(_value - min) / 100).toPrecision(1);\n    } else if (Number.isFinite(max)) step = +(Math.abs(max - _value) / 100).toPrecision(1);\n  }\n  const padStep = step ? getStep(step) * 10 : getStep(_value);\n  step = step || padStep / 10;\n  const pad = Math.round(clamp(Math.log10(1 / padStep), 0, 2));\n  return {\n    value: suffix ? _value + suffix : _value,\n    settings: _objectSpread2({\n      initialValue: _value,\n      step,\n      pad,\n      min,\n      max,\n      suffix\n    }, _settings)\n  };\n};\n\nconst sanitizeStep$1 = (v, {\n  step,\n  initialValue\n}) => {\n  const steps = Math.round((v - initialValue) / step);\n  return initialValue + steps * step;\n};\n\nvar props$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema$3,\n  sanitize: sanitize$3,\n  format: format$1,\n  normalize: normalize$2,\n  sanitizeStep: sanitizeStep$1\n});\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nconst InputContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({});\nfunction useInputContext() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(InputContext);\n}\nconst ThemeContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nconst StoreContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nconst PanelSettingsContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nfunction useStoreContext() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(StoreContext);\n}\nfunction usePanelSettingsContext() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(PanelSettingsContext);\n}\nfunction LevaStoreProvider({\n  children,\n  store\n}) {\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(StoreContext.Provider, {\n    value: store\n  }, children);\n}\n\nconst getDefaultTheme = () => ({\n  colors: {\n    elevation1: '#292d39',\n    elevation2: '#181c20',\n    elevation3: '#373c4b',\n    accent1: '#0066dc',\n    accent2: '#007bff',\n    accent3: '#3c93ff',\n    highlight1: '#535760',\n    highlight2: '#8c92a4',\n    highlight3: '#fefefe',\n    vivid1: '#ffcc00',\n    folderWidgetColor: '$highlight2',\n    folderTextColor: '$highlight3',\n    toolTipBackground: '$highlight3',\n    toolTipText: '$elevation2'\n  },\n  radii: {\n    xs: '2px',\n    sm: '3px',\n    lg: '10px'\n  },\n  space: {\n    xs: '3px',\n    sm: '6px',\n    md: '10px',\n    rowGap: '7px',\n    colGap: '7px'\n  },\n  fonts: {\n    mono: `ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace`,\n    sans: `system-ui, sans-serif`\n  },\n  fontSizes: {\n    root: '11px',\n    toolTip: '$root'\n  },\n  sizes: {\n    rootWidth: '280px',\n    controlWidth: '160px',\n    numberInputMinWidth: '38px',\n    scrubberWidth: '8px',\n    scrubberHeight: '16px',\n    rowHeight: '24px',\n    folderTitleHeight: '20px',\n    checkboxSize: '16px',\n    joystickWidth: '100px',\n    joystickHeight: '100px',\n    colorPickerWidth: '$controlWidth',\n    colorPickerHeight: '100px',\n    imagePreviewWidth: '$controlWidth',\n    imagePreviewHeight: '100px',\n    monitorHeight: '60px',\n    titleBarHeight: '39px'\n  },\n  shadows: {\n    level1: '0 0 9px 0 #00000088',\n    level2: '0 4px 14px #00000033'\n  },\n  borderWidths: {\n    root: '0px',\n    input: '1px',\n    focus: '1px',\n    hover: '1px',\n    active: '1px',\n    folder: '1px'\n  },\n  fontWeights: {\n    label: 'normal',\n    folder: 'normal',\n    button: 'normal'\n  }\n});\nfunction createStateClass(value, options) {\n  const [borderColor, bgColor] = value.split(' ');\n  const css = {};\n  if (borderColor !== 'none') {\n    css.boxShadow = `${options.inset ? 'inset ' : ''}0 0 0 $borderWidths${[options.key]} $colors${borderColor !== 'default' && borderColor || options.borderColor}`;\n  }\n  if (bgColor) {\n    css.backgroundColor = bgColor;\n  }\n  return css;\n}\nconst utils = {\n  $inputStyle: () => value => createStateClass(value, {\n    key: '$input',\n    borderColor: '$highlight1',\n    inset: true\n  }),\n  $focusStyle: () => value => createStateClass(value, {\n    key: '$focus',\n    borderColor: '$accent2'\n  }),\n  $hoverStyle: () => value => createStateClass(value, {\n    key: '$hover',\n    borderColor: '$accent1',\n    inset: true\n  }),\n  $activeStyle: () => value => createStateClass(value, {\n    key: '$active',\n    borderColor: '$accent1',\n    inset: true\n  })\n};\nconst {\n  styled,\n  css,\n  createTheme,\n  globalCss,\n  keyframes\n} = (0,_stitches_react__WEBPACK_IMPORTED_MODULE_4__.createStitches)({\n  prefix: 'leva',\n  theme: getDefaultTheme(),\n  utils: _objectSpread2(_objectSpread2({}, utils), {}, {\n    $flex: () => ({\n      display: 'flex',\n      alignItems: 'center'\n    }),\n    $flexCenter: () => ({\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }),\n    $reset: () => ({\n      outline: 'none',\n      fontSize: 'inherit',\n      fontWeight: 'inherit',\n      color: 'inherit',\n      fontFamily: 'inherit',\n      border: 'none',\n      backgroundColor: 'transparent',\n      appearance: 'none'\n    }),\n    $draggable: () => ({\n      touchAction: 'none',\n      WebkitUserDrag: 'none',\n      userSelect: 'none'\n    }),\n    $focus: value => ({\n      '&:focus': utils.$focusStyle()(value)\n    }),\n    $focusWithin: value => ({\n      '&:focus-within': utils.$focusStyle()(value)\n    }),\n    $hover: value => ({\n      '&:hover': utils.$hoverStyle()(value)\n    }),\n    $active: value => ({\n      '&:active': utils.$activeStyle()(value)\n    })\n  })\n});\nconst globalStyles = globalCss({\n  '.leva__panel__dragged': {\n    WebkitUserDrag: 'none',\n    userSelect: 'none',\n    input: {\n      userSelect: 'none'\n    },\n    '*': {\n      cursor: 'ew-resize !important'\n    }\n  }\n});\n\nfunction mergeTheme(newTheme) {\n  const defaultTheme = getDefaultTheme();\n  if (!newTheme) return {\n    theme: defaultTheme,\n    className: ''\n  };\n  Object.keys(newTheme).forEach(key => {\n    Object.assign(defaultTheme[key], newTheme[key]);\n  });\n  const customTheme = createTheme(defaultTheme);\n  return {\n    theme: defaultTheme,\n    className: customTheme.className\n  };\n}\nfunction useTh(category, key) {\n  const {\n    theme\n  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ThemeContext);\n  if (!(category in theme) || !(key in theme[category])) {\n    warn(LevaErrors.THEME_ERROR, category, key);\n    return '';\n  }\n  let _key = key;\n  while (true) {\n    let value = theme[category][_key];\n    if (typeof value === 'string' && value.charAt(0) === '$') _key = value.substr(1);else return value;\n  }\n}\n\nconst StyledInput = styled('input', {\n  $reset: '',\n  padding: '0 $sm',\n  width: 0,\n  minWidth: 0,\n  flex: 1,\n  height: '100%',\n  variants: {\n    levaType: {\n      number: {\n        textAlign: 'right'\n      }\n    },\n    as: {\n      textarea: {\n        padding: '$sm'\n      }\n    }\n  }\n});\nconst InnerLabel = styled('div', {\n  $draggable: '',\n  height: '100%',\n  $flexCenter: '',\n  position: 'relative',\n  padding: '0 $xs',\n  fontSize: '0.8em',\n  opacity: 0.8,\n  cursor: 'default',\n  touchAction: 'none',\n  [`& + ${StyledInput}`]: {\n    paddingLeft: 0\n  }\n});\nconst InnerNumberLabel = styled(InnerLabel, {\n  cursor: 'ew-resize',\n  marginRight: '-$xs',\n  textTransform: 'uppercase',\n  opacity: 0.3,\n  '&:hover': {\n    opacity: 1\n  },\n  variants: {\n    dragging: {\n      true: {\n        backgroundColor: '$accent2',\n        opacity: 1\n      }\n    }\n  }\n});\nconst InputContainer = styled('div', {\n  $flex: '',\n  position: 'relative',\n  borderRadius: '$sm',\n  overflow: 'hidden',\n  color: 'inherit',\n  height: '$rowHeight',\n  backgroundColor: '$elevation3',\n  $inputStyle: '$elevation1',\n  $hover: '',\n  $focusWithin: '',\n  variants: {\n    textArea: {\n      true: {\n        height: 'auto'\n      }\n    }\n  }\n});\n\nconst _excluded$7 = [\"innerLabel\", \"value\", \"onUpdate\", \"onChange\", \"onKeyDown\", \"type\", \"id\", \"inputType\", \"rows\"],\n  _excluded2$1 = [\"onUpdate\"];\nfunction ValueInput(_ref) {\n  let {\n      innerLabel,\n      value,\n      onUpdate,\n      onChange,\n      onKeyDown,\n      type,\n      id,\n      inputType = 'text',\n      rows = 0\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded$7);\n  const {\n    id: _id,\n    emitOnEditStart,\n    emitOnEditEnd,\n    disabled\n  } = useInputContext();\n  const inputId = id || _id;\n  const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const isTextArea = rows > 0;\n  const asType = isTextArea ? 'textarea' : 'input';\n  const update = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(fn => event => {\n    const _value = event.currentTarget.value;\n    fn(_value);\n  }, []);\n\n  react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(() => {\n    const ref = inputRef.current;\n    const _onUpdate = update(value => {\n      onUpdate(value);\n      emitOnEditEnd();\n    });\n    ref === null || ref === void 0 ? void 0 : ref.addEventListener('blur', _onUpdate);\n    return () => ref === null || ref === void 0 ? void 0 : ref.removeEventListener('blur', _onUpdate);\n  }, [update, onUpdate, emitOnEditEnd]);\n  const onKeyPress = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    if (event.key === 'Enter') {\n      update(onUpdate)(event);\n    }\n  }, [update, onUpdate]);\n\n  const inputProps = Object.assign({\n    as: asType\n  }, isTextArea ? {\n    rows\n  } : {}, props);\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(InputContainer, {\n    textArea: isTextArea\n  }, innerLabel && typeof innerLabel === 'string' ? react__WEBPACK_IMPORTED_MODULE_1___default().createElement(InnerLabel, null, innerLabel) : innerLabel, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(StyledInput, _extends({\n    levaType: type\n    ,\n    ref: inputRef,\n    id: inputId,\n    type: inputType,\n    autoComplete: \"off\",\n    spellCheck: \"false\",\n    value: value,\n    onChange: update(onChange),\n    onFocus: () => emitOnEditStart(),\n    onKeyPress: onKeyPress,\n    onKeyDown: onKeyDown,\n    disabled: disabled\n  }, inputProps)));\n}\nfunction NumberInput(_ref2) {\n  let {\n      onUpdate\n    } = _ref2,\n    props = _objectWithoutProperties(_ref2, _excluded2$1);\n  const _onUpdate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(v => onUpdate(parseNumber(v)), [onUpdate]);\n  const onKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    const dir = event.key === 'ArrowUp' ? 1 : event.key === 'ArrowDown' ? -1 : 0;\n    if (dir) {\n      event.preventDefault();\n      const step = event.altKey ? 0.1 : event.shiftKey ? 10 : 1;\n      onUpdate(v => parseFloat(v) + dir * step);\n    }\n  }, [onUpdate]);\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(ValueInput, _extends({}, props, {\n    onUpdate: _onUpdate,\n    onKeyDown: onKeyDown,\n    type: \"number\"\n  }));\n}\n\nconst StyledFolder = styled('div', {});\nconst StyledWrapper = styled('div', {\n  position: 'relative',\n  background: '$elevation2',\n  transition: 'height 300ms ease',\n  variants: {\n    fill: {\n      true: {},\n      false: {}\n    },\n    flat: {\n      false: {},\n      true: {}\n    },\n    isRoot: {\n      true: {},\n      false: {\n        paddingLeft: '$md',\n        '&::after': {\n          content: '\"\"',\n          position: 'absolute',\n          left: 0,\n          top: 0,\n          width: '$borderWidths$folder',\n          height: '100%',\n          backgroundColor: '$folderWidgetColor',\n          opacity: 0.4,\n          transform: 'translateX(-50%)'\n        }\n      }\n    }\n  },\n  compoundVariants: [{\n    isRoot: true,\n    fill: false,\n    css: {\n      overflowY: 'auto',\n      maxHeight: 'calc(100vh - 20px - $$titleBarHeight)'\n    }\n  }, {\n    isRoot: true,\n    flat: false,\n    css: {\n      borderRadius: '$lg'\n    }\n  }]\n});\nconst StyledTitle = styled('div', {\n  $flex: '',\n  color: '$folderTextColor',\n  userSelect: 'none',\n  cursor: 'pointer',\n  height: '$folderTitleHeight',\n  fontWeight: '$folder',\n  '> svg': {\n    marginLeft: -4,\n    marginRight: 4,\n    cursor: 'pointer',\n    fill: '$folderWidgetColor',\n    opacity: 0.6\n  },\n  '&:hover > svg': {\n    fill: '$folderWidgetColor'\n  },\n  [`&:hover + ${StyledWrapper}::after`]: {\n    opacity: 0.6\n  },\n  [`${StyledFolder}:hover > & + ${StyledWrapper}::after`]: {\n    opacity: 0.6\n  },\n  [`${StyledFolder}:hover > & > svg`]: {\n    opacity: 1\n  }\n});\nconst StyledContent = styled('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '100%',\n  rowGap: '$rowGap',\n  transition: 'opacity 250ms ease',\n  variants: {\n    toggled: {\n      true: {\n        opacity: 1,\n        transitionDelay: '250ms'\n      },\n      false: {\n        opacity: 0,\n        transitionDelay: '0ms',\n        pointerEvents: 'none'\n      }\n    },\n    isRoot: {\n      true: {\n        '& > div': {\n          paddingLeft: '$md',\n          paddingRight: '$md'\n        },\n        '& > div:first-of-type': {\n          paddingTop: '$sm'\n        },\n        '& > div:last-of-type': {\n          paddingBottom: '$sm'\n        },\n\n        [`> ${StyledFolder}:not(:first-of-type)`]: {\n          paddingTop: '$sm',\n          marginTop: '$md',\n          borderTop: '$borderWidths$folder solid $colors$elevation1'\n        }\n      }\n    }\n  }\n});\n\nconst StyledRow = styled('div', {\n  position: 'relative',\n  zIndex: 100,\n  display: 'grid',\n  rowGap: '$rowGap',\n  gridTemplateRows: 'minmax($sizes$rowHeight, max-content)',\n  alignItems: 'center',\n  color: '$highlight2',\n  [`${StyledContent} > &`]: {\n    '&:first-of-type': {\n      marginTop: '$rowGap'\n    },\n    '&:last-of-type': {\n      marginBottom: '$rowGap'\n    }\n  },\n  variants: {\n    disabled: {\n      true: {\n        pointerEvents: 'none'\n      },\n      false: {\n        '&:hover,&:focus-within': {\n          color: '$highlight3'\n        }\n      }\n    }\n  }\n});\nconst StyledInputRow = styled(StyledRow, {\n  gridTemplateColumns: 'auto $sizes$controlWidth',\n  columnGap: '$colGap'\n});\nconst CopyLabelContainer = styled('div', {\n  $flex: '',\n  height: '100%',\n  position: 'relative',\n  overflow: 'hidden',\n  '& > div': {\n    marginLeft: '$colGap',\n    padding: '0 $xs',\n    opacity: 0.4\n  },\n  '& > div:hover': {\n    opacity: 0.8\n  },\n  '& > div > svg': {\n    display: 'none',\n    cursor: 'pointer',\n    width: 13,\n    minWidth: 13,\n    height: 13,\n    backgroundColor: '$elevation2'\n  },\n  '&:hover > div > svg': {\n    display: 'block'\n  },\n  variants: {\n    align: {\n      top: {\n        height: '100%',\n        alignItems: 'flex-start',\n        paddingTop: '$sm'\n      }\n    }\n  }\n});\nconst StyledOptionalToggle = styled('input', {\n  $reset: '',\n  height: 0,\n  width: 0,\n  opacity: 0,\n  margin: 0,\n  '& + label': {\n    position: 'relative',\n    $flexCenter: '',\n    height: '100%',\n    userSelect: 'none',\n    cursor: 'pointer',\n    paddingLeft: 2,\n    paddingRight: '$sm',\n    pointerEvents: 'auto'\n  },\n  '& + label:after': {\n    content: '\"\"',\n    width: 6,\n    height: 6,\n    backgroundColor: '$elevation3',\n    borderRadius: '50%',\n    $activeStyle: ''\n  },\n  '&:focus + label:after': {\n    $focusStyle: ''\n  },\n  '& + label:active:after': {\n    backgroundColor: '$accent1',\n    $focusStyle: ''\n  },\n  '&:checked + label:after': {\n    backgroundColor: '$accent1'\n  }\n});\nconst StyledLabel = styled('label', {\n  fontWeight: '$label',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  whiteSpace: 'nowrap',\n  '& > svg': {\n    display: 'block'\n  }\n});\n\nconst StyledInputWrapper$1 = styled('div', {\n  opacity: 1,\n  variants: {\n    disabled: {\n      true: {\n        opacity: 0.6,\n        pointerEvents: 'none',\n        [`& ${StyledLabel}`]: {\n          pointerEvents: 'auto'\n        }\n      }\n    }\n  }\n});\nconst Overlay = styled('div', {\n  position: 'fixed',\n  top: 0,\n  bottom: 0,\n  right: 0,\n  left: 0,\n  zIndex: 1000,\n  userSelect: 'none'\n});\nconst StyledToolTipContent = styled('div', {\n  background: '$toolTipBackground',\n  fontFamily: '$sans',\n  fontSize: '$toolTip',\n  padding: '$xs $sm',\n  color: '$toolTipText',\n  borderRadius: '$xs',\n  boxShadow: '$level2',\n  maxWidth: 260\n});\nconst ToolTipArrow = styled(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_5__.Arrow, {\n  fill: '$toolTipBackground'\n});\n\nfunction Portal({\n  children\n}) {\n  const {\n    className\n  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ThemeContext);\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_radix_ui_react_portal__WEBPACK_IMPORTED_MODULE_6__.Root, {\n    className: className\n  }, children);\n}\n\nconst _excluded$6 = [\"align\"];\nfunction OptionalToggle() {\n  const {\n    id,\n    disable,\n    disabled\n  } = useInputContext();\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(StyledOptionalToggle, {\n    id: id + '__disable',\n    type: \"checkbox\",\n    checked: !disabled,\n    onChange: () => disable(!disabled)\n  }), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", {\n    htmlFor: id + '__disable'\n  }));\n}\nfunction RawLabel(props) {\n  const {\n    id,\n    optional,\n    hint\n  } = useInputContext();\n  const htmlFor = props.htmlFor || (id ? {\n    htmlFor: id\n  } : null);\n\n  const title = !hint && typeof props.children === 'string' ? {\n    title: props.children\n  } : null;\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, optional && react__WEBPACK_IMPORTED_MODULE_1___default().createElement(OptionalToggle, null), hint !== undefined ? react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_5__.Root, null, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_5__.Trigger, {\n    asChild: true\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(StyledLabel, _extends({}, htmlFor, props))), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_5__.Content, {\n    side: \"top\",\n    sideOffset: 2\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(StyledToolTipContent, null, hint, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(ToolTipArrow, null)))) : react__WEBPACK_IMPORTED_MODULE_1___default().createElement(StyledLabel, _extends({}, htmlFor, title, props)));\n}\nfunction Label(_ref) {\n  let {\n      align\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded$6);\n  const {\n    value,\n    label,\n    key,\n    disabled\n  } = useInputContext();\n  const {\n    hideCopyButton\n  } = usePanelSettingsContext();\n  const copyEnabled = !hideCopyButton && key !== undefined;\n  const [copied, setCopied] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const handleClick = async () => {\n    try {\n      await navigator.clipboard.writeText(JSON.stringify({\n        [key]: value !== null && value !== void 0 ? value : ''\n      }));\n      setCopied(true);\n    } catch (_unused) {\n      warn(LevaErrors.CLIPBOARD_ERROR, {\n        [key]: value\n      });\n    }\n  };\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(CopyLabelContainer, {\n    align: align,\n    onPointerLeave: () => setCopied(false)\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(RawLabel, props), copyEnabled && !disabled && react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    title: `Click to copy ${typeof label === 'string' ? label : key} value`\n  }, !copied ? react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"svg\", {\n    onClick: handleClick,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\"\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"path\", {\n    d: \"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\"\n  }), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"path\", {\n    d: \"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\"\n  })) : react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\"\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"path\", {\n    d: \"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z\"\n  }), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\",\n    clipRule: \"evenodd\"\n  }))));\n}\n\nconst _excluded$5 = [\"toggled\"];\n\nconst Svg = styled('svg', {\n  fill: 'currentColor',\n  transition: 'transform 350ms ease, fill 250ms ease'\n});\nfunction Chevron(_ref) {\n  let {\n      toggled\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded$5);\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Svg, _extends({\n    width: \"9\",\n    height: \"5\",\n    viewBox: \"0 0 9 5\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    style: {\n      transform: `rotate(${toggled ? 0 : -90}deg)`\n    }\n  }, props), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"path\", {\n    d: \"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z\"\n  }));\n}\n\nconst _excluded$4 = [\"input\"];\nfunction Row(_ref) {\n  let {\n      input\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded$4);\n  if (input) return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(StyledInputRow, props);\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(StyledRow, props);\n}\n\nfunction useInputSetters({\n  value,\n  type,\n  settings,\n  setValue\n}) {\n  const [displayValue, setDisplayValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(format$2(type, value, settings));\n  const previousValueRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(value);\n  const settingsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(settings);\n  settingsRef.current = settings;\n  const setFormat = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(v => setDisplayValue(format$2(type, v, settingsRef.current)), [type]);\n  const onUpdate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(updatedValue => {\n    try {\n      setValue(updatedValue);\n    } catch (error) {\n      const {\n        type,\n        previousValue\n      } = error;\n      if (type !== 'LEVA_ERROR') throw error;\n      setFormat(previousValue);\n    }\n  }, [setFormat, setValue]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!(0,dequal_lite__WEBPACK_IMPORTED_MODULE_2__.dequal)(value, previousValueRef.current)) {\n      setFormat(value);\n    }\n    previousValueRef.current = value;\n  }, [value, setFormat]);\n  return {\n    displayValue,\n    onChange: setDisplayValue,\n    onUpdate\n  };\n}\n\nfunction useDrag(handler, config) {\n  const {\n    emitOnEditStart,\n    emitOnEditEnd\n  } = useInputContext();\n  return (0,_use_gesture_react__WEBPACK_IMPORTED_MODULE_7__.useDrag)(state => {\n    if (state.first) {\n      document.body.classList.add('leva__panel__dragged');\n      emitOnEditStart === null || emitOnEditStart === void 0 ? void 0 : emitOnEditStart();\n    }\n    const result = handler(state);\n    if (state.last) {\n      document.body.classList.remove('leva__panel__dragged');\n      emitOnEditEnd === null || emitOnEditEnd === void 0 ? void 0 : emitOnEditEnd();\n    }\n    return result;\n  }, config);\n}\n\nfunction useCanvas2d(fn) {\n  const canvas = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const hasFired = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const handleCanvas = debounce(() => {\n      canvas.current.width = canvas.current.offsetWidth * window.devicePixelRatio;\n      canvas.current.height = canvas.current.offsetHeight * window.devicePixelRatio;\n      fn(canvas.current, ctx.current);\n    }, 250);\n    window.addEventListener('resize', handleCanvas);\n    if (!hasFired.current) {\n      handleCanvas();\n      hasFired.current = true;\n    }\n    return () => window.removeEventListener('resize', handleCanvas);\n  }, [fn]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    ctx.current = canvas.current.getContext('2d');\n  }, []);\n  return [canvas, ctx];\n}\n\nfunction useTransform() {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const local = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n    x: 0,\n    y: 0\n  });\n  const set = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(point => {\n    Object.assign(local.current, point);\n    if (ref.current) ref.current.style.transform = `translate3d(${local.current.x}px, ${local.current.y}px, 0)`;\n  }, []);\n  return [ref, set];\n}\n\nconst _excluded$3 = [\"__refCount\"];\nconst getInputAtPath = (data, path) => {\n  if (!data[path]) return null;\n  const _data$path = data[path],\n    input = _objectWithoutProperties(_data$path, _excluded$3);\n  return input;\n};\nfunction useInput(path) {\n  const store = useStoreContext();\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(getInputAtPath(store.getData(), path));\n  const set = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(value => store.setValueAtPath(path, value, true), [path, store]);\n  const setSettings = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(settings => store.setSettingsAtPath(path, settings), [path, store]);\n  const disable = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(flag => store.disableInputAtPath(path, flag), [path, store]);\n  const emitOnEditStart = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => store.emitOnEditStart(path), [path, store]);\n  const emitOnEditEnd = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => store.emitOnEditEnd(path), [path, store]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    setState(getInputAtPath(store.getData(), path));\n    const unsub = store.useStore.subscribe(s => getInputAtPath(s.data, path), setState, {\n      equalityFn: zustand_shallow__WEBPACK_IMPORTED_MODULE_8__[\"default\"]\n    });\n    return () => unsub();\n  }, [store, path]);\n  return [state, {\n    set,\n    setSettings,\n    disable,\n    storeId: store.storeId,\n    emitOnEditStart,\n    emitOnEditEnd\n  }];\n}\n\nconst RangeGrid = styled('div', {\n  variants: {\n    hasRange: {\n      true: {\n        position: 'relative',\n        display: 'grid',\n        gridTemplateColumns: 'auto $sizes$numberInputMinWidth',\n        columnGap: '$colGap',\n        alignItems: 'center'\n      }\n    }\n  }\n});\n\nconst Range = styled('div', {\n  position: 'relative',\n  width: '100%',\n  height: 2,\n  borderRadius: '$xs',\n  backgroundColor: '$elevation1'\n});\nconst Scrubber = styled('div', {\n  position: 'absolute',\n  width: '$scrubberWidth',\n  height: '$scrubberHeight',\n  borderRadius: '$xs',\n  boxShadow: '0 0 0 2px $colors$elevation2',\n  backgroundColor: '$accent2',\n  cursor: 'pointer',\n  $active: 'none $accent1',\n  $hover: 'none $accent3',\n  variants: {\n    position: {\n      left: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        transform: 'translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))'\n      },\n      right: {\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        transform: 'translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))'\n      }\n    }\n  }\n});\nconst RangeWrapper = styled('div', {\n  position: 'relative',\n  $flex: '',\n  height: '100%',\n  cursor: 'pointer',\n  touchAction: 'none'\n});\nconst Indicator = styled('div', {\n  position: 'absolute',\n  height: '100%',\n  backgroundColor: '$accent2'\n});\n\nfunction RangeSlider({\n  value,\n  min,\n  max,\n  onDrag,\n  step,\n  initialValue\n}) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const scrubberRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const rangeWidth = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n  const scrubberWidth = useTh('sizes', 'scrubberWidth');\n  const bind = useDrag(({\n    event,\n    first,\n    xy: [x],\n    movement: [mx],\n    memo\n  }) => {\n    if (first) {\n      const {\n        width,\n        left\n      } = ref.current.getBoundingClientRect();\n      rangeWidth.current = width - parseFloat(scrubberWidth);\n      const targetIsScrub = (event === null || event === void 0 ? void 0 : event.target) === scrubberRef.current;\n      memo = targetIsScrub ? value : invertedRange((x - left) / width, min, max);\n    }\n    const newValue = memo + invertedRange(mx / rangeWidth.current, 0, max - min);\n    onDrag(sanitizeStep$1(newValue, {\n      step,\n      initialValue\n    }));\n    return memo;\n  });\n  const pos = range(value, min, max);\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(RangeWrapper, _extends({\n    ref: ref\n  }, bind()), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Range, null, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Indicator, {\n    style: {\n      left: 0,\n      right: `${(1 - pos) * 100}%`\n    }\n  })), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Scrubber, {\n    ref: scrubberRef,\n    style: {\n      left: `calc(${pos} * (100% - ${scrubberWidth}))`\n    }\n  }));\n}\n\nconst DraggableLabel = react__WEBPACK_IMPORTED_MODULE_1___default().memo(({\n  label,\n  onUpdate,\n  step,\n  innerLabelTrim\n}) => {\n  const [dragging, setDragging] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const bind = useDrag(({\n    active,\n    delta: [dx],\n    event,\n    memo: _memo = 0\n  }) => {\n    setDragging(active);\n    _memo += dx / 2;\n    if (Math.abs(_memo) >= 1) {\n      onUpdate(v => parseFloat(v) + Math.floor(_memo) * step * multiplyStep(event));\n      _memo = 0;\n    }\n    return _memo;\n  });\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(InnerNumberLabel, _extends({\n    dragging: dragging,\n    title: label.length > 1 ? label : ''\n  }, bind()), label.slice(0, innerLabelTrim));\n});\nfunction Number$1({\n  label,\n  id,\n  displayValue,\n  onUpdate,\n  onChange,\n  settings,\n  innerLabelTrim = 1\n}) {\n  const InnerLabel = innerLabelTrim > 0 && react__WEBPACK_IMPORTED_MODULE_1___default().createElement(DraggableLabel, {\n    label: label,\n    step: settings.step,\n    onUpdate: onUpdate,\n    innerLabelTrim: innerLabelTrim\n  });\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(NumberInput, {\n    id: id,\n    value: String(displayValue),\n    onUpdate: onUpdate,\n    onChange: onChange,\n    innerLabel: InnerLabel\n  });\n}\nfunction NumberComponent() {\n  const props = useInputContext();\n  const {\n    label,\n    value,\n    onUpdate,\n    settings,\n    id\n  } = props;\n  const {\n    min,\n    max\n  } = settings;\n  const hasRange = max !== Infinity && min !== -Infinity;\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Row, {\n    input: true\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Label, null, label), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(RangeGrid, {\n    hasRange: hasRange\n  }, hasRange && react__WEBPACK_IMPORTED_MODULE_1___default().createElement(RangeSlider, _extends({\n    value: parseFloat(value),\n    onDrag: onUpdate\n  }, settings)), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Number$1, _extends({}, props, {\n    id: id,\n    label: \"value\",\n    innerLabelTrim: hasRange ? 0 : 1\n  }))));\n}\n\nconst {\n    sanitizeStep\n  } = props$3,\n  rest = _objectWithoutProperties(props$3, [\"sanitizeStep\"]);\nvar number = createInternalPlugin(_objectSpread2({\n  component: NumberComponent\n}, rest));\n\nconst schema$2 = (_o, s) => (0,v8n__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().schema({\n  options: (0,v8n__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().passesAnyOf((0,v8n__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().object(), (0,v8n__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().array())\n}).test(s);\nconst sanitize$2 = (value, {\n  values\n}) => {\n  if (values.indexOf(value) < 0) throw Error(`Selected value doesn't match Select options`);\n  return value;\n};\nconst format = (value, {\n  values\n}) => {\n  return values.indexOf(value);\n};\nconst normalize$1 = input => {\n  let {\n    value,\n    options\n  } = input;\n  let keys;\n  let values;\n  if (Array.isArray(options)) {\n    values = options;\n    keys = options.map(o => String(o));\n  } else {\n    values = Object.values(options);\n    keys = Object.keys(options);\n  }\n  if (!('value' in input)) value = values[0];else if (!values.includes(value)) {\n    keys.unshift(String(value));\n    values.unshift(value);\n  }\n  if (!Object.values(options).includes(value)) options[String(value)] = value;\n  return {\n    value,\n    settings: {\n      keys,\n      values\n    }\n  };\n};\n\nvar props$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema$2,\n  sanitize: sanitize$2,\n  format: format,\n  normalize: normalize$1\n});\n\nconst SelectContainer = styled('div', {\n  $flexCenter: '',\n  position: 'relative',\n  '> svg': {\n    pointerEvents: 'none',\n    position: 'absolute',\n    right: '$md'\n  }\n});\nconst NativeSelect = styled('select', {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: '100%',\n  height: '100%',\n  opacity: 0\n});\nconst PresentationalSelect = styled('div', {\n  display: 'flex',\n  alignItems: 'center',\n  width: '100%',\n  height: '$rowHeight',\n  backgroundColor: '$elevation3',\n  borderRadius: '$sm',\n  padding: '0 $sm',\n  cursor: 'pointer',\n  [`${NativeSelect}:focus + &`]: {\n    $focusStyle: ''\n  },\n  [`${NativeSelect}:hover + &`]: {\n    $hoverStyle: ''\n  }\n});\n\nfunction Select({\n  displayValue,\n  value,\n  onUpdate,\n  id,\n  settings,\n  disabled\n}) {\n  const {\n    keys,\n    values\n  } = settings;\n  const lastDisplayedValue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n\n  if (value === values[displayValue]) {\n    lastDisplayedValue.current = keys[displayValue];\n  }\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(SelectContainer, null, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(NativeSelect, {\n    id: id,\n    value: displayValue,\n    onChange: e => onUpdate(values[Number(e.currentTarget.value)]),\n    disabled: disabled\n  }, keys.map((key, index) => react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"option\", {\n    key: key,\n    value: index\n  }, key))), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(PresentationalSelect, null, lastDisplayedValue.current), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Chevron, {\n    toggled: true\n  }));\n}\nfunction SelectComponent() {\n  const {\n    label,\n    value,\n    displayValue,\n    onUpdate,\n    id,\n    disabled,\n    settings\n  } = useInputContext();\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Row, {\n    input: true\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Label, null, label), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Select, {\n    id: id,\n    value: value,\n    displayValue: displayValue,\n    onUpdate: onUpdate,\n    settings: settings,\n    disabled: disabled\n  }));\n}\n\nvar select = createInternalPlugin(_objectSpread2({\n  component: SelectComponent\n}, props$2));\n\nconst schema$1 = o => (0,v8n__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().string().test(o);\nconst sanitize$1 = v => {\n  if (typeof v !== 'string') throw Error(`Invalid string`);\n  return v;\n};\nconst normalize = ({\n  value,\n  editable: _editable = true,\n  rows: _rows = false\n}) => {\n  return {\n    value,\n    settings: {\n      editable: _editable,\n      rows: typeof _rows === 'number' ? _rows : _rows ? 5 : 0\n    }\n  };\n};\n\nvar props$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema$1,\n  sanitize: sanitize$1,\n  normalize: normalize\n});\n\nconst _excluded$2 = [\"displayValue\", \"onUpdate\", \"onChange\", \"editable\"];\nconst NonEditableString = styled('div', {\n  whiteSpace: 'pre-wrap'\n});\nfunction String$1(_ref) {\n  let {\n      displayValue,\n      onUpdate,\n      onChange,\n      editable = true\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded$2);\n  if (editable) return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(ValueInput, _extends({\n    value: displayValue,\n    onUpdate: onUpdate,\n    onChange: onChange\n  }, props));\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(NonEditableString, null, displayValue);\n}\nfunction StringComponent() {\n  const {\n    label,\n    settings,\n    displayValue,\n    onUpdate,\n    onChange\n  } = useInputContext();\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Row, {\n    input: true\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Label, null, label), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(String$1, _extends({\n    displayValue: displayValue,\n    onUpdate: onUpdate,\n    onChange: onChange\n  }, settings)));\n}\n\nvar string = createInternalPlugin(_objectSpread2({\n  component: StringComponent\n}, props$1));\n\nconst schema = o => (0,v8n__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().boolean().test(o);\nconst sanitize = v => {\n  if (typeof v !== 'boolean') throw Error('Invalid boolean');\n  return v;\n};\n\nvar props = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema,\n  sanitize: sanitize\n});\n\nconst StyledInputWrapper = styled('div', {\n  position: 'relative',\n  $flex: '',\n  height: '$rowHeight',\n  input: {\n    $reset: '',\n    height: 0,\n    width: 0,\n    opacity: 0,\n    margin: 0\n  },\n  label: {\n    position: 'relative',\n    $flexCenter: '',\n    userSelect: 'none',\n    cursor: 'pointer',\n    height: '$checkboxSize',\n    width: '$checkboxSize',\n    backgroundColor: '$elevation3',\n    borderRadius: '$sm',\n    $hover: ''\n  },\n  'input:focus + label': {\n    $focusStyle: ''\n  },\n  'input:focus:checked + label, input:checked + label:hover': {\n    $hoverStyle: '$accent3'\n  },\n  'input + label:active': {\n    backgroundColor: '$accent1'\n  },\n  'input:checked + label:active': {\n    backgroundColor: '$accent1'\n  },\n  'label > svg': {\n    display: 'none',\n    width: '90%',\n    height: '90%',\n    stroke: '$highlight3'\n  },\n  'input:checked + label': {\n    backgroundColor: '$accent2'\n  },\n  'input:checked + label > svg': {\n    display: 'block'\n  }\n});\n\nfunction Boolean({\n  value,\n  onUpdate,\n  id,\n  disabled\n}) {\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(StyledInputWrapper, null, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"input\", {\n    id: id,\n    type: \"checkbox\",\n    checked: value,\n    onChange: e => onUpdate(e.currentTarget.checked),\n    disabled: disabled\n  }), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", {\n    htmlFor: id\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\"\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M5 13l4 4L19 7\"\n  }))));\n}\nfunction BooleanComponent() {\n  const {\n    label,\n    value,\n    onUpdate,\n    disabled,\n    id\n  } = useInputContext();\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Row, {\n    input: true\n  }, react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Label, null, label), react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Boolean, {\n    value: value,\n    onUpdate: onUpdate,\n    id: id,\n    disabled: disabled\n  }));\n}\n\nvar boolean = createInternalPlugin(_objectSpread2({\n  component: BooleanComponent\n}, props));\n\nconst _excluded$1 = [\"locked\"];\nfunction Coordinate({\n  value,\n  id,\n  valueKey,\n  settings,\n  onUpdate,\n  innerLabelTrim\n}) {\n\n  const valueRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(value[valueKey]);\n  valueRef.current = value[valueKey];\n  const setValue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(newValue =>\n  onUpdate({\n    [valueKey]: sanitizeValue({\n      type: 'NUMBER',\n      value: valueRef.current,\n      settings\n    }, newValue)\n  }), [onUpdate, settings, valueKey]);\n  const number = useInputSetters({\n    type: 'NUMBER',\n    value: value[valueKey],\n    settings,\n    setValue\n  });\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Number$1, {\n    id: id,\n    label: valueKey,\n    value: value[valueKey],\n    displayValue: number.displayValue,\n    onUpdate: number.onUpdate,\n    onChange: number.onChange,\n    settings: settings,\n    innerLabelTrim: innerLabelTrim\n  });\n}\nconst Container = styled('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  gridAutoFlow: 'column dense',\n  alignItems: 'center',\n  variants: {\n    withLock: {\n      true: {\n        gridTemplateColumns: '10px auto',\n        '> svg': {\n          cursor: 'pointer'\n        }\n      }\n    }\n  }\n});\n\nfunction Lock(_ref) {\n  let {\n      locked\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded$1);\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"svg\", _extends({\n    width: \"10\",\n    height: \"10\",\n    viewBox: \"0 0 15 15\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), locked ? react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"path\", {\n    d: \"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z\",\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\"\n  }) : react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"path\", {\n    d: \"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z\",\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\"\n  }));\n}\nfunction Vector({\n  value,\n  onUpdate,\n  settings,\n  innerLabelTrim\n}) {\n  const {\n    id,\n    setSettings\n  } = useInputContext();\n\n  const {\n    lock,\n    locked\n  } = settings;\n  return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Container, {\n    withLock: lock\n  }, lock && react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Lock, {\n    locked: locked,\n    onClick: () => setSettings({\n      locked: !locked\n    })\n  }), Object.keys(value).map((key, i) => react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Coordinate, {\n    id: i === 0 ? id : `${id}.${key}`,\n    key: key,\n    valueKey: key,\n    value: value,\n    settings: settings[key],\n    onUpdate: onUpdate,\n    innerLabelTrim: innerLabelTrim\n  })));\n}\n\nconst normalizeKeyedNumberSettings = (value, settings) => {\n  const _settings = {};\n  let maxStep = 0;\n  let minPad = Infinity;\n  Object.entries(value).forEach(([key, v]) => {\n    _settings[key] = normalize$2(_objectSpread2({\n      value: v\n    }, settings[key])).settings;\n    maxStep = Math.max(maxStep, _settings[key].step);\n    minPad = Math.min(minPad, _settings[key].pad);\n  });\n\n  for (let key in _settings) {\n    const {\n      step,\n      min,\n      max\n    } = settings[key] || {};\n    if (!isFinite(step) && (!isFinite(min) || !isFinite(max))) {\n      _settings[key].step = maxStep;\n      _settings[key].pad = minPad;\n    }\n  }\n  return _settings;\n};\n\nconst _excluded = [\"lock\"],\n  _excluded2 = [\"value\"];\nfunction getVectorSchema(dimension) {\n  const isVectorArray = (0,v8n__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().array().length(dimension).every.number();\n\n  const isVectorObject = o => {\n    if (!o || typeof o !== 'object') return false;\n    const values = Object.values(o);\n    return values.length === dimension && values.every(v => isFinite(v));\n  };\n  return o => {\n    return isVectorArray.test(o) || isVectorObject(o);\n  };\n}\n\nfunction getVectorType(value) {\n  return Array.isArray(value) ? 'array' : 'object';\n}\n\nfunction convert(value, format, keys) {\n  if (getVectorType(value) === format) return value;\n  return format === 'array' ? Object.values(value) : mapArrayToKeys(value, keys);\n}\n\nconst sanitizeVector = (value, settings, previousValue) => {\n  const _value = convert(value, 'object', settings.keys);\n  for (let key in _value) _value[key] = sanitize$3(_value[key], settings[key]);\n\n  const _valueKeys = Object.keys(_value);\n  let newValue = {};\n\n  if (_valueKeys.length === settings.keys.length) newValue = _value;\n  else {\n    const _previousValue = convert(previousValue, 'object', settings.keys);\n    if (_valueKeys.length === 1 && settings.locked) {\n      const lockedKey = _valueKeys[0];\n      const lockedCoordinate = _value[lockedKey];\n      const previousLockedCoordinate = _previousValue[lockedKey];\n      const ratio = previousLockedCoordinate !== 0 ? lockedCoordinate / previousLockedCoordinate : 1;\n      for (let key in _previousValue) {\n        if (key === lockedKey) newValue[lockedKey] = lockedCoordinate;\n        else newValue[key] = _previousValue[key] * ratio;\n      }\n    } else {\n      newValue = _objectSpread2(_objectSpread2({}, _previousValue), _value);\n    }\n  }\n  return convert(newValue, settings.format, settings.keys);\n};\n\nconst formatVector = (value, settings) => convert(value, 'object', settings.keys);\n\nconst isNumberSettings = o => !!o && ('step' in o || 'min' in o || 'max' in o);\n\nfunction normalizeVector(value, settings, defaultKeys = []) {\n  const {\n      lock = false\n    } = settings,\n    _settings = _objectWithoutProperties(settings, _excluded);\n  const format = Array.isArray(value) ? 'array' : 'object';\n  const keys = format === 'object' ? Object.keys(value) : defaultKeys;\n  const _value = convert(value, 'object', keys);\n\n  const mergedSettings = isNumberSettings(_settings) ? keys.reduce((acc, k) => Object.assign(acc, {\n    [k]: _settings\n  }), {}) : _settings;\n  const numberSettings = normalizeKeyedNumberSettings(_value, mergedSettings);\n  return {\n    value: format === 'array' ? value : _value,\n    settings: _objectSpread2(_objectSpread2({}, numberSettings), {}, {\n      format,\n      keys,\n      lock,\n      locked: false\n    })\n  };\n}\nfunction getVectorPlugin(defaultKeys) {\n  return {\n    schema: getVectorSchema(defaultKeys.length),\n    normalize: _ref => {\n      let {\n          value\n        } = _ref,\n        settings = _objectWithoutProperties(_ref, _excluded2);\n      return normalizeVector(value, settings, defaultKeys);\n    },\n    format: (value, settings) => formatVector(value, settings),\n    sanitize: (value, settings, prevValue) => sanitizeVector(value, settings, prevValue)\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGV2YS9kaXN0L3ZlY3Rvci1wbHVnaW4tNmY4MmFlZTkuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDa0U7QUFDdkQ7QUFDUDtBQUNDO0FBQ2hCO0FBQzJCO0FBQ1M7QUFDRjtBQUNSOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx1QkFBdUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw2QkFBNkI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBLDJFQUEyRSxLQUFLLCtCQUErQixLQUFLO0FBQ3BILGlFQUFpRSxLQUFLLHFCQUFxQixLQUFLO0FBQ2hHLG1FQUFtRSxLQUFLO0FBQ3hFLGtFQUFrRSxJQUFJLGVBQWUsS0FBSyw4QkFBOEIsU0FBUztBQUNqSSx5REFBeUQsTUFBTTtBQUMvRDtBQUNBLCtFQUErRSxTQUFTLEdBQUcsSUFBSTtBQUMvRixnRkFBZ0YsS0FBSztBQUNyRixrRkFBa0YsS0FBSztBQUN2RixtRkFBbUYsS0FBSyxpQ0FBaUMsS0FBSyxnREFBZ0QsVUFBVTtBQUN4TDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNB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QUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksRUFBRSxpREFBVTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRjtBQUNyRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFlBQVk7QUFDdEI7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsbUJBQW1CLDZDQUFNO0FBQ3pCO0FBQ0E7QUFDQSxpQkFBaUIsa0RBQVc7QUFDNUI7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRSxzREFBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNILHFCQUFxQixrREFBVztBQUNoQztBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxJQUFJLElBQUk7QUFDUixTQUFTLDBEQUFtQjtBQUM1QjtBQUNBLEdBQUcsaURBQWlELDBEQUFtQiw2Q0FBNkMsMERBQW1CO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0Esb0JBQW9CLGtEQUFXO0FBQy9CLG9CQUFvQixrREFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsU0FBUywwREFBbUIsd0JBQXdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsS0FBSztBQUNMO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNILGdCQUFnQixjQUFjO0FBQzlCO0FBQ0EsR0FBRztBQUNILE1BQU0sYUFBYSxlQUFlLGNBQWM7QUFDaEQ7QUFDQSxHQUFHO0FBQ0gsTUFBTSxhQUFhO0FBQ25CO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUzs7QUFFVCxjQUFjLGFBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGVBQWU7QUFDckI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFlBQVk7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw0QkFBNEIsMERBQUs7QUFDakM7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLElBQUksRUFBRSxpREFBVTtBQUNoQixTQUFTLDBEQUFtQixDQUFDLHdEQUFNO0FBQ25DO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixTQUFTLDBEQUFtQixDQUFDLHVEQUFjLFFBQVEsMERBQW1CO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxHQUFHLDBEQUFtQjtBQUN6QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSixTQUFTLDBEQUFtQixDQUFDLHVEQUFjLG9CQUFvQiwwREFBbUIsNkNBQTZDLDBEQUFtQixDQUFDLHlEQUFpQixRQUFRLDBEQUFtQixDQUFDLDREQUFvQjtBQUNwTjtBQUNBLEdBQUcsRUFBRSwwREFBbUIseUJBQXlCLHFCQUFxQiwwREFBbUIsQ0FBQyw0REFBb0I7QUFDOUc7QUFDQTtBQUNBLEdBQUcsRUFBRSwwREFBbUIsbUNBQW1DLDBEQUFtQiwwQkFBMEIsMERBQW1CLHlCQUF5QjtBQUNwSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDhCQUE4QiwrQ0FBUTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxTQUFTLDBEQUFtQjtBQUM1QjtBQUNBO0FBQ0EsR0FBRyxFQUFFLDBEQUFtQiwrQ0FBK0MsMERBQW1CO0FBQzFGLDRCQUE0Qix5Q0FBeUM7QUFDckUsR0FBRyxZQUFZLDBEQUFtQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsRUFBRSwwREFBbUI7QUFDeEI7QUFDQSxHQUFHLEdBQUcsMERBQW1CO0FBQ3pCO0FBQ0EsR0FBRyxLQUFLLDBEQUFtQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxHQUFHLEVBQUUsMERBQW1CO0FBQ3hCO0FBQ0EsR0FBRyxHQUFHLDBEQUFtQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0JBQWtCO0FBQzdDO0FBQ0EsR0FBRyxVQUFVLDBEQUFtQjtBQUNoQztBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLG9CQUFvQiwwREFBbUI7QUFDdkMsU0FBUywwREFBbUI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCwwQ0FBMEMsK0NBQVE7QUFDbEQsMkJBQTJCLDZDQUFNO0FBQ2pDLHNCQUFzQiw2Q0FBTTtBQUM1QjtBQUNBLG9CQUFvQixrREFBVztBQUMvQixtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWCxTQUFTLG1EQUFNO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixTQUFTLDJEQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0EsaUJBQWlCLDZDQUFNO0FBQ3ZCLGNBQWMsNkNBQU07QUFDcEIsbUJBQW1CLDZDQUFNOztBQUV6QixFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWDtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsY0FBYyw2Q0FBTTtBQUNwQixnQkFBZ0IsNkNBQU07QUFDdEI7QUFDQTtBQUNBLEdBQUc7QUFDSCxjQUFjLGtEQUFXO0FBQ3pCO0FBQ0Esa0VBQWtFLGdCQUFnQixNQUFNLGdCQUFnQjtBQUN4RyxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0NBQVE7QUFDcEMsY0FBYyxrREFBVztBQUN6QixzQkFBc0Isa0RBQVc7QUFDakMsa0JBQWtCLGtEQUFXO0FBQzdCLDBCQUEwQixrREFBVztBQUNyQyx3QkFBd0Isa0RBQVc7QUFDbkMsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQSxrQkFBa0IsdURBQU87QUFDekIsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsY0FBYyw2Q0FBTTtBQUNwQixzQkFBc0IsNkNBQU07QUFDNUIscUJBQXFCLDZDQUFNO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQSxTQUFTLDBEQUFtQjtBQUM1QjtBQUNBLEdBQUcsV0FBVywwREFBbUIsY0FBYywwREFBbUI7QUFDbEU7QUFDQTtBQUNBLGdCQUFnQixnQkFBZ0I7QUFDaEM7QUFDQSxHQUFHLElBQUksMERBQW1CO0FBQzFCO0FBQ0E7QUFDQSxvQkFBb0IsS0FBSyxZQUFZLGNBQWM7QUFDbkQ7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsdUJBQXVCLGlEQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtDQUFrQywrQ0FBUTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsMkNBQTJDLDBEQUFtQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxTQUFTLDBEQUFtQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxTQUFTLDBEQUFtQjtBQUM1QjtBQUNBLEdBQUcsRUFBRSwwREFBbUIsc0JBQXNCLDBEQUFtQjtBQUNqRTtBQUNBLEdBQUcsY0FBYywwREFBbUI7QUFDcEM7QUFDQTtBQUNBLEdBQUcsY0FBYywwREFBbUIsc0JBQXNCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsNEJBQTRCLCtDQUFHO0FBQy9CLFdBQVcsK0NBQUcsZUFBZSwrQ0FBRyxhQUFhLCtDQUFHO0FBQ2hELENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxhQUFhO0FBQ25CO0FBQ0EsR0FBRztBQUNILE1BQU0sYUFBYTtBQUNuQjtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osNkJBQTZCLDZDQUFNOztBQUVuQztBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUFtQix3QkFBd0IsMERBQW1CO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRywyQkFBMkIsMERBQW1CO0FBQ2pEO0FBQ0E7QUFDQSxHQUFHLFVBQVUsMERBQW1CLDBEQUEwRCwwREFBbUI7QUFDN0c7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osU0FBUywwREFBbUI7QUFDNUI7QUFDQSxHQUFHLEVBQUUsMERBQW1CLHNCQUFzQiwwREFBbUI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELHNCQUFzQiwrQ0FBRztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLHVCQUF1QiwwREFBbUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osU0FBUywwREFBbUI7QUFDNUI7QUFDQSxHQUFHLEVBQUUsMERBQW1CLHNCQUFzQiwwREFBbUI7QUFDakU7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELG9CQUFvQiwrQ0FBRztBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsMERBQW1CLDJCQUEyQiwwREFBbUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsR0FBRywwREFBbUI7QUFDekI7QUFDQSxHQUFHLEVBQUUsMERBQW1CO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLEdBQUcsRUFBRSwwREFBbUI7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixTQUFTLDBEQUFtQjtBQUM1QjtBQUNBLEdBQUcsRUFBRSwwREFBbUIsc0JBQXNCLDBEQUFtQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxtQkFBbUIsNkNBQU07QUFDekI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxTQUFTLDBEQUFtQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxTQUFTLDBEQUFtQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxtQkFBbUIsMERBQW1CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxJQUFJLDBEQUFtQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osU0FBUywwREFBbUI7QUFDNUI7QUFDQSxHQUFHLFVBQVUsMERBQW1CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHLHNDQUFzQywwREFBbUI7QUFDNUQsMEJBQTBCLEdBQUcsR0FBRyxJQUFJO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBRzs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04saURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRyxLQUFLO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHFCQUFxQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRWcxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2R4dy1haS1sYW5ndWFnZS10ZWFjaGVyLy4vbm9kZV9tb2R1bGVzL2xldmEvZGlzdC92ZWN0b3ItcGx1Z2luLTZmODJhZWU5LmVzbS5qcz8wNjY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVJlZiwgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBQIGZyb20gJ0ByYWRpeC11aS9yZWFjdC1wb3J0YWwnO1xuaW1wb3J0IHsgZGVxdWFsIH0gZnJvbSAnZGVxdWFsL2xpdGUnO1xuaW1wb3J0IHNoYWxsb3cgZnJvbSAnenVzdGFuZC9zaGFsbG93JztcbmltcG9ydCB2OG4gZnJvbSAndjhuJztcbmltcG9ydCB7IGNyZWF0ZVN0aXRjaGVzIH0gZnJvbSAnQHN0aXRjaGVzL3JlYWN0JztcbmltcG9ydCB7IHVzZURyYWcgYXMgdXNlRHJhZyQxIH0gZnJvbSAnQHVzZS1nZXN0dXJlL3JlYWN0JztcbmltcG9ydCAqIGFzIFJhZGl4VG9vbHRpcCBmcm9tICdAcmFkaXgtdWkvcmVhY3QtdG9vbHRpcCc7XG5pbXBvcnQgeyBBcnJvdyB9IGZyb20gJ0ByYWRpeC11aS9yZWFjdC10b29sdGlwJztcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciBrZXksIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTtcbiAgdmFyIGtleSwgaTtcbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTtcbiAgICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxubGV0IExldmFFcnJvcnM7XG4oZnVuY3Rpb24gKExldmFFcnJvcnMpIHtcbiAgTGV2YUVycm9yc1tMZXZhRXJyb3JzW1wiVU5TVVBQT1JURURfSU5QVVRcIl0gPSAwXSA9IFwiVU5TVVBQT1JURURfSU5QVVRcIjtcbiAgTGV2YUVycm9yc1tMZXZhRXJyb3JzW1wiTk9fQ09NUE9ORU5UX0ZPUl9UWVBFXCJdID0gMV0gPSBcIk5PX0NPTVBPTkVOVF9GT1JfVFlQRVwiO1xuICBMZXZhRXJyb3JzW0xldmFFcnJvcnNbXCJVTktOT1dOX0lOUFVUXCJdID0gMl0gPSBcIlVOS05PV05fSU5QVVRcIjtcbiAgTGV2YUVycm9yc1tMZXZhRXJyb3JzW1wiRFVQTElDQVRFX0tFWVNcIl0gPSAzXSA9IFwiRFVQTElDQVRFX0tFWVNcIjtcbiAgTGV2YUVycm9yc1tMZXZhRXJyb3JzW1wiQUxSRUFEWV9SRUdJU1RFUkVEX1RZUEVcIl0gPSA0XSA9IFwiQUxSRUFEWV9SRUdJU1RFUkVEX1RZUEVcIjtcbiAgTGV2YUVycm9yc1tMZXZhRXJyb3JzW1wiQ0xJUEJPQVJEX0VSUk9SXCJdID0gNV0gPSBcIkNMSVBCT0FSRF9FUlJPUlwiO1xuICBMZXZhRXJyb3JzW0xldmFFcnJvcnNbXCJUSEVNRV9FUlJPUlwiXSA9IDZdID0gXCJUSEVNRV9FUlJPUlwiO1xuICBMZXZhRXJyb3JzW0xldmFFcnJvcnNbXCJQQVRIX0RPRVNOVF9FWElTVFwiXSA9IDddID0gXCJQQVRIX0RPRVNOVF9FWElTVFwiO1xuICBMZXZhRXJyb3JzW0xldmFFcnJvcnNbXCJJTlBVVF9UWVBFX09WRVJSSURFXCJdID0gOF0gPSBcIklOUFVUX1RZUEVfT1ZFUlJJREVcIjtcbiAgTGV2YUVycm9yc1tMZXZhRXJyb3JzW1wiRU1QVFlfS0VZXCJdID0gOV0gPSBcIkVNUFRZX0tFWVwiO1xufSkoTGV2YUVycm9ycyB8fCAoTGV2YUVycm9ycyA9IHt9KSk7XG5jb25zdCBFcnJvckxpc3QgPSB7XG4gIFtMZXZhRXJyb3JzLlVOU1VQUE9SVEVEX0lOUFVUXTogKHR5cGUsIHBhdGgpID0+IFtgQW4gaW5wdXQgd2l0aCB0eXBlIFxcYCR7dHlwZX1cXGAgaW5wdXQgd2FzIGZvdW5kIGF0IHBhdGggXFxgJHtwYXRofVxcYCBidXQgaXQncyBub3Qgc3VwcG9ydGVkIHlldC5gXSxcbiAgW0xldmFFcnJvcnMuTk9fQ09NUE9ORU5UX0ZPUl9UWVBFXTogKHR5cGUsIHBhdGgpID0+IFtgVHlwZSBcXGAke3R5cGV9XFxgIGZvdW5kIGF0IHBhdGggXFxgJHtwYXRofVxcYCBjYW4ndCBiZSBkaXNwbGF5ZWQgaW4gcGFuZWwgYmVjYXVzZSBubyBjb21wb25lbnQgc3VwcG9ydHMgaXQgeWV0LmBdLFxuICBbTGV2YUVycm9ycy5VTktOT1dOX0lOUFVUXTogKHBhdGgsIHZhbHVlKSA9PiBbYGlucHV0IGF0IHBhdGggXFxgJHtwYXRofVxcYCBpcyBub3QgcmVjb2duaXplZC5gLCB2YWx1ZV0sXG4gIFtMZXZhRXJyb3JzLkRVUExJQ0FURV9LRVlTXTogKGtleSwgcGF0aCwgcHJldlBhdGgpID0+IFtgS2V5IFxcYCR7a2V5fVxcYCBvZiBwYXRoIFxcYCR7cGF0aH1cXGAgYWxyZWFkeSBleGlzdHMgYXQgcGF0aCBcXGAke3ByZXZQYXRofVxcYC4gRXZlbiBuZXN0ZWQga2V5cyBuZWVkIHRvIGJlIHVuaXF1ZS4gUmVuYW1lIG9uZSBvZiB0aGUga2V5cy5gXSxcbiAgW0xldmFFcnJvcnMuQUxSRUFEWV9SRUdJU1RFUkVEX1RZUEVdOiB0eXBlID0+IFtgVHlwZSAke3R5cGV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZC4gWW91IGNhbid0IHJlZ2lzdGVyIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgdHlwZS5gXSxcbiAgW0xldmFFcnJvcnMuQ0xJUEJPQVJEX0VSUk9SXTogdmFsdWUgPT4gW2BFcnJvciBjb3B5aW5nIHRoZSB2YWx1ZWAsIHZhbHVlXSxcbiAgW0xldmFFcnJvcnMuVEhFTUVfRVJST1JdOiAoY2F0ZWdvcnksIGtleSkgPT4gW2BFcnJvciBhY2Nlc3NpbmcgdGhlIHRoZW1lIFxcYCR7Y2F0ZWdvcnl9LiR7a2V5fVxcYCB2YWx1ZS5gXSxcbiAgW0xldmFFcnJvcnMuUEFUSF9ET0VTTlRfRVhJU1RdOiBwYXRoID0+IFtgRXJyb3IgZ2V0dGluZyB0aGUgdmFsdWUgYXQgcGF0aCBcXGAke3BhdGh9XFxgLiBUaGVyZSBpcyBwcm9iYWJseSBhbiBlcnJvciBpbiB5b3VyIFxcYHJlbmRlclxcYCBmdW5jdGlvbi5gXSxcbiAgW0xldmFFcnJvcnMuUEFUSF9ET0VTTlRfRVhJU1RdOiBwYXRoID0+IFtgRXJyb3IgYWNjZXNzaW5nIHRoZSB2YWx1ZSBhdCBwYXRoIFxcYCR7cGF0aH1cXGBgXSxcbiAgW0xldmFFcnJvcnMuSU5QVVRfVFlQRV9PVkVSUklERV06IChwYXRoLCB0eXBlLCB3cm9uZ1R5cGUpID0+IFtgSW5wdXQgYXQgcGF0aCBcXGAke3BhdGh9XFxgIGFscmVhZHkgZXhpc3RzIHdpdGggdHlwZTogXFxgJHt0eXBlfVxcYC4gSXRzIHR5cGUgY2Fubm90IGJlIG92ZXJyaWRkZW4gd2l0aCB0eXBlIFxcYCR7d3JvbmdUeXBlfVxcYC5gXSxcbiAgW0xldmFFcnJvcnMuRU1QVFlfS0VZXTogKCkgPT4gWydLZXlzIGNhbiBub3QgYmUgZW1wdHksIGlmIHlvdSB3YW50IHRvIGhpZGUgYSBsYWJlbCB1c2Ugd2hpdGVzcGFjZS4nXVxufTtcbmZ1bmN0aW9uIF9sb2coZm4sIGVycm9yVHlwZSwgLi4uYXJncykge1xuICBjb25zdCBbbWVzc2FnZSwgLi4ucmVzdF0gPSBFcnJvckxpc3RbZXJyb3JUeXBlXSguLi5hcmdzKTtcbiAgY29uc29sZVtmbl0oJ0xFVkE6ICcgKyBtZXNzYWdlLCAuLi5yZXN0KTtcbn1cblxuY29uc3Qgd2FybiA9IF9sb2cuYmluZChudWxsLCAnd2FybicpO1xuY29uc3QgbG9nID0gX2xvZy5iaW5kKG51bGwsICdsb2cnKTtcblxuY29uc3QgX2V4Y2x1ZGVkJGEgPSBbXCJ2YWx1ZVwiXSxcbiAgX2V4Y2x1ZGVkMiQ0ID0gW1wic2NoZW1hXCJdLFxuICBfZXhjbHVkZWQzJDEgPSBbXCJ2YWx1ZVwiXTtcbmNvbnN0IFNjaGVtYXMgPSBbXTtcbmNvbnN0IFBsdWdpbnMgPSB7fTtcbmZ1bmN0aW9uIGdldFZhbHVlVHlwZShfcmVmKSB7XG4gIGxldCB7XG4gICAgICB2YWx1ZVxuICAgIH0gPSBfcmVmLFxuICAgIHNldHRpbmdzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIF9leGNsdWRlZCRhKTtcbiAgZm9yIChsZXQgY2hlY2tlciBvZiBTY2hlbWFzKSB7XG4gICAgY29uc3QgdHlwZSA9IGNoZWNrZXIodmFsdWUsIHNldHRpbmdzKTtcbiAgICBpZiAodHlwZSkgcmV0dXJuIHR5cGU7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXIodHlwZSwgX3JlZjIpIHtcbiAgbGV0IHtcbiAgICAgIHNjaGVtYVxuICAgIH0gPSBfcmVmMixcbiAgICBwbHVnaW4gPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjIsIF9leGNsdWRlZDIkNCk7XG4gIGlmICh0eXBlIGluIFBsdWdpbnMpIHtcbiAgICB3YXJuKExldmFFcnJvcnMuQUxSRUFEWV9SRUdJU1RFUkVEX1RZUEUsIHR5cGUpO1xuICAgIHJldHVybjtcbiAgfVxuICBTY2hlbWFzLnB1c2goKHZhbHVlLCBzZXR0aW5ncykgPT4gc2NoZW1hKHZhbHVlLCBzZXR0aW5ncykgJiYgdHlwZSk7XG4gIFBsdWdpbnNbdHlwZV0gPSBwbHVnaW47XG59XG5jb25zdCBnZXRVbmlxdWVUeXBlID0gKCkgPT4gJ19fQ1VTVE9NX19QTFVHSU5fXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUludGVybmFsUGx1Z2luKHBsdWdpbikge1xuICByZXR1cm4gcGx1Z2luO1xufVxuZnVuY3Rpb24gY3JlYXRlUGx1Z2luKHBsdWdpbikge1xuICBjb25zdCB0eXBlID0gZ2V0VW5pcXVlVHlwZSgpO1xuICBQbHVnaW5zW3R5cGVdID0gcGx1Z2luO1xuICByZXR1cm4gaW5wdXQgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlLFxuICAgICAgX19jdXN0b21JbnB1dDogaW5wdXRcbiAgICB9O1xuICB9O1xufVxuZnVuY3Rpb24gbm9ybWFsaXplJDModHlwZSwgaW5wdXQsIHBhdGgsIGRhdGEpIHtcbiAgY29uc3Qge1xuICAgIG5vcm1hbGl6ZTogX25vcm1hbGl6ZVxuICB9ID0gUGx1Z2luc1t0eXBlXTtcbiAgaWYgKF9ub3JtYWxpemUpIHJldHVybiBfbm9ybWFsaXplKGlucHV0LCBwYXRoLCBkYXRhKTtcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ29iamVjdCcgfHwgISgndmFsdWUnIGluIGlucHV0KSkgcmV0dXJuIHtcbiAgICB2YWx1ZTogaW5wdXRcbiAgfTtcbiAgY29uc3Qge1xuICAgICAgdmFsdWVcbiAgICB9ID0gaW5wdXQsXG4gICAgc2V0dGluZ3MgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoaW5wdXQsIF9leGNsdWRlZDMkMSk7XG4gIHJldHVybiB7XG4gICAgdmFsdWUsXG4gICAgc2V0dGluZ3NcbiAgfTtcbn1cbmZ1bmN0aW9uIHNhbml0aXplJDQodHlwZSwgdmFsdWUsIHNldHRpbmdzLCBwcmV2VmFsdWUsIHBhdGgsIHN0b3JlKSB7XG4gIGNvbnN0IHtcbiAgICBzYW5pdGl6ZVxuICB9ID0gUGx1Z2luc1t0eXBlXTtcbiAgaWYgKHNhbml0aXplKSByZXR1cm4gc2FuaXRpemUodmFsdWUsIHNldHRpbmdzLCBwcmV2VmFsdWUsIHBhdGgsIHN0b3JlKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gZm9ybWF0JDIodHlwZSwgdmFsdWUsIHNldHRpbmdzKSB7XG4gIGNvbnN0IHtcbiAgICBmb3JtYXRcbiAgfSA9IFBsdWdpbnNbdHlwZV07XG4gIGlmIChmb3JtYXQpIHJldHVybiBmb3JtYXQodmFsdWUsIHNldHRpbmdzKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7XG4gICAgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTtcbiAgICB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTtcbiAgfVxuICByZXR1cm4ga2V5cztcbn1cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9O1xuICAgIGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7XG4gICAgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmNvbnN0IGNsYW1wID0gKHgsIG1pbiwgbWF4KSA9PiB4ID4gbWF4ID8gbWF4IDogeCA8IG1pbiA/IG1pbiA6IHg7XG5jb25zdCBwYWQgPSAoeCwgcGFkKSA9PiBTdHJpbmcoeCkucGFkU3RhcnQocGFkLCAnMCcpO1xuY29uc3QgcGFyc2VOdW1iZXIgPSB2ID0+IHtcbiAgaWYgKHYgPT09ICcnIHx8IHR5cGVvZiB2ID09PSAnbnVtYmVyJykgcmV0dXJuIHY7XG4gIHRyeSB7XG4gICAgY29uc3QgX3YgPSBldmFsdWF0ZSh2KTtcbiAgICBpZiAoIWlzTmFOKF92KSkgcmV0dXJuIF92O1xuICB9IGNhdGNoIChfdW51c2VkKSB7fVxuICByZXR1cm4gcGFyc2VGbG9hdCh2KTtcbn07XG5jb25zdCBsb2cxMCA9IE1hdGgubG9nKDEwKTtcbmZ1bmN0aW9uIGdldFN0ZXAobnVtYmVyKSB7XG4gIGxldCBuID0gTWF0aC5hYnMoK1N0cmluZyhudW1iZXIpLnJlcGxhY2UoJy4nLCAnJykpO1xuICBpZiAobiA9PT0gMCkgcmV0dXJuIDAuMDE7XG4gIHdoaWxlIChuICE9PSAwICYmIG4gJSAxMCA9PT0gMCkgbiAvPSAxMDtcbiAgY29uc3Qgc2lnbmlmaWNhbnREaWdpdHMgPSBNYXRoLmZsb29yKE1hdGgubG9nKG4pIC8gbG9nMTApICsgMTtcbiAgY29uc3QgbnVtYmVyTG9nID0gTWF0aC5mbG9vcihNYXRoLmxvZzEwKE1hdGguYWJzKG51bWJlcikpKTtcbiAgY29uc3Qgc3RlcCA9IE1hdGgucG93KDEwLCBudW1iZXJMb2cgLSBzaWduaWZpY2FudERpZ2l0cyk7XG4gIHJldHVybiBNYXRoLm1heChzdGVwLCAwLjAwMSk7XG59XG5jb25zdCByYW5nZSA9ICh2LCBtaW4sIG1heCkgPT4ge1xuICBpZiAobWF4ID09PSBtaW4pIHJldHVybiAwO1xuICBjb25zdCBfdiA9IGNsYW1wKHYsIG1pbiwgbWF4KTtcbiAgcmV0dXJuIChfdiAtIG1pbikgLyAobWF4IC0gbWluKTtcbn07XG5jb25zdCBpbnZlcnRlZFJhbmdlID0gKHAsIG1pbiwgbWF4KSA9PiBwICogKG1heCAtIG1pbikgKyBtaW47XG5cbmNvbnN0IGdldFVpZCA9ICgpID0+ICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbmNvbnN0IHBhcmVucyA9IC9cXCgoWzAtOStcXC0qL14gLl0rKVxcKS87XG5jb25zdCBleHAgPSAvKFxcZCsoPzpcXC5cXGQrKT8pID9cXF4gPyhcXGQrKD86XFwuXFxkKyk/KS87XG5jb25zdCBtdWwgPSAvKFxcZCsoPzpcXC5cXGQrKT8pID9cXCogPyhcXGQrKD86XFwuXFxkKyk/KS87XG5jb25zdCBkaXYgPSAvKFxcZCsoPzpcXC5cXGQrKT8pID9cXC8gPyhcXGQrKD86XFwuXFxkKyk/KS87XG5jb25zdCBhZGQgPSAvKFxcZCsoPzpcXC5cXGQrKT8pID9cXCsgPyhcXGQrKD86XFwuXFxkKyk/KS87XG5jb25zdCBzdWIgPSAvKFxcZCsoPzpcXC5cXGQrKT8pID8tID8oXFxkKyg/OlxcLlxcZCspPykvO1xuXG5mdW5jdGlvbiBldmFsdWF0ZShleHByKSB7XG4gIGlmIChpc05hTihOdW1iZXIoZXhwcikpKSB7XG4gICAgaWYgKHBhcmVucy50ZXN0KGV4cHIpKSB7XG4gICAgICBjb25zdCBuZXdFeHByID0gZXhwci5yZXBsYWNlKHBhcmVucywgKG1hdGNoLCBzdWJFeHByKSA9PiBTdHJpbmcoZXZhbHVhdGUoc3ViRXhwcikpKTtcbiAgICAgIHJldHVybiBldmFsdWF0ZShuZXdFeHByKTtcbiAgICB9IGVsc2UgaWYgKGV4cC50ZXN0KGV4cHIpKSB7XG4gICAgICBjb25zdCBuZXdFeHByID0gZXhwci5yZXBsYWNlKGV4cCwgKG1hdGNoLCBiYXNlLCBwb3cpID0+IFN0cmluZyhNYXRoLnBvdyhOdW1iZXIoYmFzZSksIE51bWJlcihwb3cpKSkpO1xuICAgICAgcmV0dXJuIGV2YWx1YXRlKG5ld0V4cHIpO1xuICAgIH0gZWxzZSBpZiAobXVsLnRlc3QoZXhwcikpIHtcbiAgICAgIGNvbnN0IG5ld0V4cHIgPSBleHByLnJlcGxhY2UobXVsLCAobWF0Y2gsIGEsIGIpID0+IFN0cmluZyhOdW1iZXIoYSkgKiBOdW1iZXIoYikpKTtcbiAgICAgIHJldHVybiBldmFsdWF0ZShuZXdFeHByKTtcbiAgICB9IGVsc2UgaWYgKGRpdi50ZXN0KGV4cHIpKSB7XG4gICAgICBjb25zdCBuZXdFeHByID0gZXhwci5yZXBsYWNlKGRpdiwgKG1hdGNoLCBhLCBiKSA9PiB7XG4gICAgICAgIGlmIChiICE9IDApIHJldHVybiBTdHJpbmcoTnVtYmVyKGEpIC8gTnVtYmVyKGIpKTtlbHNlIHRocm93IG5ldyBFcnJvcignRGl2aXNpb24gYnkgemVybycpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZXZhbHVhdGUobmV3RXhwcik7XG4gICAgfSBlbHNlIGlmIChhZGQudGVzdChleHByKSkge1xuICAgICAgY29uc3QgbmV3RXhwciA9IGV4cHIucmVwbGFjZShhZGQsIChtYXRjaCwgYSwgYikgPT4gU3RyaW5nKE51bWJlcihhKSArIE51bWJlcihiKSkpO1xuICAgICAgcmV0dXJuIGV2YWx1YXRlKG5ld0V4cHIpO1xuICAgIH0gZWxzZSBpZiAoc3ViLnRlc3QoZXhwcikpIHtcbiAgICAgIGNvbnN0IG5ld0V4cHIgPSBleHByLnJlcGxhY2Uoc3ViLCAobWF0Y2gsIGEsIGIpID0+IFN0cmluZyhOdW1iZXIoYSkgLSBOdW1iZXIoYikpKTtcbiAgICAgIHJldHVybiBldmFsdWF0ZShuZXdFeHByKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE51bWJlcihleHByKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIE51bWJlcihleHByKTtcbn1cblxuZnVuY3Rpb24gcGljayhvYmplY3QsIGtleXMpIHtcbiAgcmV0dXJuIGtleXMucmVkdWNlKChvYmosIGtleSkgPT4ge1xuICAgIGlmICghIW9iamVjdCAmJiBvYmplY3QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgb2JqW2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xufVxuZnVuY3Rpb24gb21pdChvYmplY3QsIGtleXMpIHtcbiAgY29uc3Qgb2JqID0gX29iamVjdFNwcmVhZDIoe30sIG9iamVjdCk7XG4gIGtleXMuZm9yRWFjaChrID0+IGsgaW4gb2JqZWN0ICYmIGRlbGV0ZSBvYmpba10pO1xuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gbWFwQXJyYXlUb0tleXModmFsdWUsIGtleXMpIHtcbiAgcmV0dXJuIHZhbHVlLnJlZHVjZSgoYWNjLCB2LCBpKSA9PiBPYmplY3QuYXNzaWduKGFjYywge1xuICAgIFtrZXlzW2ldXTogdlxuICB9KSwge30pO1xufVxuZnVuY3Rpb24gaXNPYmplY3QodmFyaWFibGUpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YXJpYWJsZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuY29uc3QgaXNFbXB0eU9iamVjdCA9IG9iaiA9PiBpc09iamVjdChvYmopICYmIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwO1xuXG5sZXQgU3BlY2lhbElucHV0cztcbihmdW5jdGlvbiAoU3BlY2lhbElucHV0cykge1xuICBTcGVjaWFsSW5wdXRzW1wiQlVUVE9OXCJdID0gXCJCVVRUT05cIjtcbiAgU3BlY2lhbElucHV0c1tcIkJVVFRPTl9HUk9VUFwiXSA9IFwiQlVUVE9OX0dST1VQXCI7XG4gIFNwZWNpYWxJbnB1dHNbXCJNT05JVE9SXCJdID0gXCJNT05JVE9SXCI7XG4gIFNwZWNpYWxJbnB1dHNbXCJGT0xERVJcIl0gPSBcIkZPTERFUlwiO1xufSkoU3BlY2lhbElucHV0cyB8fCAoU3BlY2lhbElucHV0cyA9IHt9KSk7XG5sZXQgTGV2YUlucHV0cztcbihmdW5jdGlvbiAoTGV2YUlucHV0cykge1xuICBMZXZhSW5wdXRzW1wiU0VMRUNUXCJdID0gXCJTRUxFQ1RcIjtcbiAgTGV2YUlucHV0c1tcIklNQUdFXCJdID0gXCJJTUFHRVwiO1xuICBMZXZhSW5wdXRzW1wiTlVNQkVSXCJdID0gXCJOVU1CRVJcIjtcbiAgTGV2YUlucHV0c1tcIkNPTE9SXCJdID0gXCJDT0xPUlwiO1xuICBMZXZhSW5wdXRzW1wiU1RSSU5HXCJdID0gXCJTVFJJTkdcIjtcbiAgTGV2YUlucHV0c1tcIkJPT0xFQU5cIl0gPSBcIkJPT0xFQU5cIjtcbiAgTGV2YUlucHV0c1tcIklOVEVSVkFMXCJdID0gXCJJTlRFUlZBTFwiO1xuICBMZXZhSW5wdXRzW1wiVkVDVE9SM0RcIl0gPSBcIlZFQ1RPUjNEXCI7XG4gIExldmFJbnB1dHNbXCJWRUNUT1IyRFwiXSA9IFwiVkVDVE9SMkRcIjtcbn0pKExldmFJbnB1dHMgfHwgKExldmFJbnB1dHMgPSB7fSkpO1xuXG5jb25zdCBfZXhjbHVkZWQkOSA9IFtcInR5cGVcIiwgXCJfX2N1c3RvbUlucHV0XCJdLFxuICBfZXhjbHVkZWQyJDMgPSBbXCJyZW5kZXJcIiwgXCJsYWJlbFwiLCBcIm9wdGlvbmFsXCIsIFwib3JkZXJcIiwgXCJkaXNhYmxlZFwiLCBcImhpbnRcIiwgXCJvbkNoYW5nZVwiLCBcIm9uRWRpdFN0YXJ0XCIsIFwib25FZGl0RW5kXCIsIFwidHJhbnNpZW50XCJdLFxuICBfZXhjbHVkZWQzID0gW1widHlwZVwiXTtcbmZ1bmN0aW9uIHBhcnNlT3B0aW9ucyhfaW5wdXQsIGtleSwgbWVyZ2VkT3B0aW9ucyA9IHt9LCBjdXN0b21UeXBlKSB7XG4gIHZhciBfY29tbW9uT3B0aW9ucyRvcHRpb24sIF9jb21tb25PcHRpb25zJGRpc2FibDtcbiAgaWYgKHR5cGVvZiBfaW5wdXQgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkoX2lucHV0KSkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBjdXN0b21UeXBlLFxuICAgICAgaW5wdXQ6IF9pbnB1dCxcbiAgICAgIG9wdGlvbnM6IF9vYmplY3RTcHJlYWQyKHtcbiAgICAgICAga2V5LFxuICAgICAgICBsYWJlbDoga2V5LFxuICAgICAgICBvcHRpb25hbDogZmFsc2UsXG4gICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgb3JkZXI6IDBcbiAgICAgIH0sIG1lcmdlZE9wdGlvbnMpXG4gICAgfTtcbiAgfVxuXG4gIGlmICgnX19jdXN0b21JbnB1dCcgaW4gX2lucHV0KSB7XG4gICAgY29uc3Qge1xuICAgICAgICB0eXBlOiBfdHlwZSxcbiAgICAgICAgX19jdXN0b21JbnB1dFxuICAgICAgfSA9IF9pbnB1dCxcbiAgICAgIG9wdGlvbnMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX2lucHV0LCBfZXhjbHVkZWQkOSk7XG4gICAgcmV0dXJuIHBhcnNlT3B0aW9ucyhfX2N1c3RvbUlucHV0LCBrZXksIG9wdGlvbnMsIF90eXBlKTtcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICAgIHJlbmRlcixcbiAgICAgIGxhYmVsLFxuICAgICAgb3B0aW9uYWwsXG4gICAgICBvcmRlciA9IDAsXG4gICAgICBkaXNhYmxlZCxcbiAgICAgIGhpbnQsXG4gICAgICBvbkNoYW5nZSxcbiAgICAgIG9uRWRpdFN0YXJ0LFxuICAgICAgb25FZGl0RW5kLFxuICAgICAgdHJhbnNpZW50XG4gICAgfSA9IF9pbnB1dCxcbiAgICBpbnB1dFdpdGhUeXBlID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9pbnB1dCwgX2V4Y2x1ZGVkMiQzKTtcbiAgY29uc3QgY29tbW9uT3B0aW9ucyA9IF9vYmplY3RTcHJlYWQyKHtcbiAgICByZW5kZXIsXG4gICAga2V5LFxuICAgIGxhYmVsOiBsYWJlbCAhPT0gbnVsbCAmJiBsYWJlbCAhPT0gdm9pZCAwID8gbGFiZWwgOiBrZXksXG4gICAgaGludCxcbiAgICB0cmFuc2llbnQ6IHRyYW5zaWVudCAhPT0gbnVsbCAmJiB0cmFuc2llbnQgIT09IHZvaWQgMCA/IHRyYW5zaWVudCA6ICEhb25DaGFuZ2UsXG4gICAgb25FZGl0U3RhcnQsXG4gICAgb25FZGl0RW5kLFxuICAgIGRpc2FibGVkLFxuICAgIG9wdGlvbmFsLFxuICAgIG9yZGVyXG4gIH0sIG1lcmdlZE9wdGlvbnMpO1xuICBsZXQge1xuICAgICAgdHlwZVxuICAgIH0gPSBpbnB1dFdpdGhUeXBlLFxuICAgIGlucHV0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKGlucHV0V2l0aFR5cGUsIF9leGNsdWRlZDMpO1xuICB0eXBlID0gY3VzdG9tVHlwZSAhPT0gbnVsbCAmJiBjdXN0b21UeXBlICE9PSB2b2lkIDAgPyBjdXN0b21UeXBlIDogdHlwZTtcbiAgaWYgKHR5cGUgaW4gU3BlY2lhbElucHV0cykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlLFxuICAgICAgaW5wdXQsXG4gICAgICBvcHRpb25zOiBjb21tb25PcHRpb25zXG4gICAgfTtcbiAgfVxuXG4gIGxldCBjb21wdXRlZElucHV0O1xuICBpZiAoY3VzdG9tVHlwZSAmJiBpc09iamVjdChpbnB1dCkgJiYgJ3ZhbHVlJyBpbiBpbnB1dCkgY29tcHV0ZWRJbnB1dCA9IGlucHV0LnZhbHVlO2Vsc2UgY29tcHV0ZWRJbnB1dCA9IGlzRW1wdHlPYmplY3QoaW5wdXQpID8gdW5kZWZpbmVkIDogaW5wdXQ7XG4gIHJldHVybiB7XG4gICAgdHlwZSxcbiAgICBpbnB1dDogY29tcHV0ZWRJbnB1dCxcbiAgICBvcHRpb25zOiBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgY29tbW9uT3B0aW9ucyksIHt9LCB7XG4gICAgICBvbkNoYW5nZSxcbiAgICAgIG9wdGlvbmFsOiAoX2NvbW1vbk9wdGlvbnMkb3B0aW9uID0gY29tbW9uT3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2NvbW1vbk9wdGlvbnMkb3B0aW9uICE9PSB2b2lkIDAgPyBfY29tbW9uT3B0aW9ucyRvcHRpb24gOiBmYWxzZSxcbiAgICAgIGRpc2FibGVkOiAoX2NvbW1vbk9wdGlvbnMkZGlzYWJsID0gY29tbW9uT3B0aW9ucy5kaXNhYmxlZCkgIT09IG51bGwgJiYgX2NvbW1vbk9wdGlvbnMkZGlzYWJsICE9PSB2b2lkIDAgPyBfY29tbW9uT3B0aW9ucyRkaXNhYmwgOiBmYWxzZVxuICAgIH0pXG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUlucHV0KF9pbnB1dCwga2V5LCBwYXRoLCBkYXRhKSB7XG4gIGNvbnN0IHBhcnNlZElucHV0QW5kT3B0aW9ucyA9IHBhcnNlT3B0aW9ucyhfaW5wdXQsIGtleSk7XG4gIGNvbnN0IHtcbiAgICB0eXBlLFxuICAgIGlucHV0OiBwYXJzZWRJbnB1dCxcbiAgICBvcHRpb25zXG4gIH0gPSBwYXJzZWRJbnB1dEFuZE9wdGlvbnM7XG4gIGlmICh0eXBlKSB7XG4gICAgaWYgKHR5cGUgaW4gU3BlY2lhbElucHV0cylcbiAgICAgIHJldHVybiBwYXJzZWRJbnB1dEFuZE9wdGlvbnM7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZSxcbiAgICAgIGlucHV0OiBub3JtYWxpemUkMyh0eXBlLCBwYXJzZWRJbnB1dCwgcGF0aCwgZGF0YSksXG4gICAgICBvcHRpb25zXG4gICAgfTtcbiAgfVxuICBsZXQgaW5wdXRUeXBlID0gZ2V0VmFsdWVUeXBlKHBhcnNlZElucHV0KTtcbiAgaWYgKGlucHV0VHlwZSkgcmV0dXJuIHtcbiAgICB0eXBlOiBpbnB1dFR5cGUsXG4gICAgaW5wdXQ6IG5vcm1hbGl6ZSQzKGlucHV0VHlwZSwgcGFyc2VkSW5wdXQsIHBhdGgsIGRhdGEpLFxuICAgIG9wdGlvbnNcbiAgfTtcbiAgaW5wdXRUeXBlID0gZ2V0VmFsdWVUeXBlKHtcbiAgICB2YWx1ZTogcGFyc2VkSW5wdXRcbiAgfSk7XG4gIGlmIChpbnB1dFR5cGUpIHJldHVybiB7XG4gICAgdHlwZTogaW5wdXRUeXBlLFxuICAgIGlucHV0OiBub3JtYWxpemUkMyhpbnB1dFR5cGUsIHtcbiAgICAgIHZhbHVlOiBwYXJzZWRJbnB1dFxuICAgIH0sIHBhdGgsIGRhdGEpLFxuICAgIG9wdGlvbnNcbiAgfTtcblxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiB1cGRhdGVJbnB1dChpbnB1dCwgbmV3VmFsdWUsIHBhdGgsIHN0b3JlLCBmcm9tUGFuZWwpIHtcbiAgY29uc3Qge1xuICAgIHZhbHVlLFxuICAgIHR5cGUsXG4gICAgc2V0dGluZ3NcbiAgfSA9IGlucHV0O1xuICBpbnB1dC52YWx1ZSA9IHNhbml0aXplVmFsdWUoe1xuICAgIHR5cGUsXG4gICAgdmFsdWUsXG4gICAgc2V0dGluZ3NcbiAgfSwgbmV3VmFsdWUsIHBhdGgsIHN0b3JlKTtcbiAgaW5wdXQuZnJvbVBhbmVsID0gZnJvbVBhbmVsO1xufVxuY29uc3QgVmFsdWVFcnJvciA9IGZ1bmN0aW9uIFZhbHVlRXJyb3IobWVzc2FnZSwgdmFsdWUsIGVycm9yKSB7XG4gIHRoaXMudHlwZSA9ICdMRVZBX0VSUk9SJztcbiAgdGhpcy5tZXNzYWdlID0gJ0xFVkE6ICcgKyBtZXNzYWdlO1xuICB0aGlzLnByZXZpb3VzVmFsdWUgPSB2YWx1ZTtcbiAgdGhpcy5lcnJvciA9IGVycm9yO1xufTtcbmZ1bmN0aW9uIHNhbml0aXplVmFsdWUoe1xuICB0eXBlLFxuICB2YWx1ZSxcbiAgc2V0dGluZ3Ncbn0sIG5ld1ZhbHVlLCBwYXRoLCBzdG9yZSkge1xuICBjb25zdCBfbmV3VmFsdWUgPSB0eXBlICE9PSAnU0VMRUNUJyAmJiB0eXBlb2YgbmV3VmFsdWUgPT09ICdmdW5jdGlvbicgPyBuZXdWYWx1ZSh2YWx1ZSkgOiBuZXdWYWx1ZTtcbiAgbGV0IHNhbml0aXplZE5ld1ZhbHVlO1xuICB0cnkge1xuICAgIHNhbml0aXplZE5ld1ZhbHVlID0gc2FuaXRpemUkNCh0eXBlLCBfbmV3VmFsdWUsIHNldHRpbmdzLCB2YWx1ZSwgcGF0aCwgc3RvcmUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IFZhbHVlRXJyb3IoYFRoZSB2YWx1ZSBcXGAke25ld1ZhbHVlfVxcYCBkaWQgbm90IHJlc3VsdCBpbiBhIGNvcnJlY3QgdmFsdWUuYCwgdmFsdWUsIGUpO1xuICB9XG4gIGlmIChkZXF1YWwoc2FuaXRpemVkTmV3VmFsdWUsIHZhbHVlKSkge1xuXG4gICAgcmV0dXJuIHZhbHVlO1xuXG4gIH1cblxuICByZXR1cm4gc2FuaXRpemVkTmV3VmFsdWU7XG59XG5cbmNvbnN0IGRlYm91bmNlID0gKGNhbGxiYWNrLCB3YWl0LCBpbW1lZGlhdGUgPSBmYWxzZSkgPT4ge1xuICBsZXQgdGltZW91dCA9IDA7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgYXJncyA9IGFyZ3VtZW50cztcbiAgICBjb25zdCBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgIGNvbnN0IG5leHQgPSAoKSA9PiBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChuZXh0LCB3YWl0KTtcbiAgICBpZiAoY2FsbE5vdykgbmV4dCgpO1xuICB9O1xufTtcblxuY29uc3QgbXVsdGlwbHlTdGVwID0gZXZlbnQgPT4gZXZlbnQuc2hpZnRLZXkgPyA1IDogZXZlbnQuYWx0S2V5ID8gMSAvIDUgOiAxO1xuXG5mdW5jdGlvbiByZW5kZXIoZWxlbWVudCwgY29udGFpbmVyKSB7XG4gIGNvbnN0IGVycm9yID0gY29uc29sZS5lcnJvcjtcbiAgY29uc29sZS5lcnJvciA9ICgpID0+IHt9O1xuICBSZWFjdERPTS5yZW5kZXIoZWxlbWVudCwgY29udGFpbmVyKTtcbiAgY29uc29sZS5lcnJvciA9IGVycm9yO1xufVxuXG5mdW5jdGlvbiBtZXJnZVJlZnMocmVmcykge1xuICByZXR1cm4gdmFsdWUgPT4ge1xuICAgIHJlZnMuZm9yRWFjaChyZWYgPT4ge1xuICAgICAgaWYgKHR5cGVvZiByZWYgPT09ICdmdW5jdGlvbicpIHJlZih2YWx1ZSk7ZWxzZSBpZiAocmVmICE9IG51bGwpIHtcbiAgICAgICAgcmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cblxuY29uc3QgX2V4Y2x1ZGVkJDggPSBbXCJ2YWx1ZVwiXSxcbiAgX2V4Y2x1ZGVkMiQyID0gW1wibWluXCIsIFwibWF4XCJdO1xuY29uc3Qgc2NoZW1hJDMgPSB2ID0+IHtcbiAgaWYgKHR5cGVvZiB2ID09PSAnbnVtYmVyJykgcmV0dXJuIHRydWU7XG4gIGlmICh0eXBlb2YgdiA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBfdiA9IHBhcnNlRmxvYXQodik7XG4gICAgaWYgKGlzTmFOKF92KSkgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IHN1ZmZpeCA9IHYuc3Vic3RyaW5nKCgnJyArIF92KS5sZW5ndGgpLnRyaW0oKTtcbiAgICByZXR1cm4gc3VmZml4Lmxlbmd0aCA8IDQ7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcbmNvbnN0IHNhbml0aXplJDMgPSAodiwge1xuICBtaW46IF9taW4gPSAtSW5maW5pdHksXG4gIG1heDogX21heCA9IEluZmluaXR5LFxuICBzdWZmaXhcbn0pID0+IHtcbiAgY29uc3QgX3YgPSBwYXJzZUZsb2F0KHYpO1xuICBpZiAodiA9PT0gJycgfHwgaXNOYU4oX3YpKSB0aHJvdyBFcnJvcignSW52YWxpZCBudW1iZXInKTtcbiAgY29uc3QgZiA9IGNsYW1wKF92LCBfbWluLCBfbWF4KTtcbiAgcmV0dXJuIHN1ZmZpeCA/IGYgKyBzdWZmaXggOiBmO1xufTtcbmNvbnN0IGZvcm1hdCQxID0gKHYsIHtcbiAgcGFkOiBfcGFkID0gMCxcbiAgc3VmZml4XG59KSA9PiB7XG4gIGNvbnN0IGYgPSBwYXJzZUZsb2F0KHYpLnRvRml4ZWQoX3BhZCk7XG4gIHJldHVybiBzdWZmaXggPyBmICsgc3VmZml4IDogZjtcbn07XG5jb25zdCBub3JtYWxpemUkMiA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgICAgdmFsdWVcbiAgICB9ID0gX3JlZixcbiAgICBzZXR0aW5ncyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQkOCk7XG4gIGNvbnN0IHtcbiAgICAgIG1pbiA9IC1JbmZpbml0eSxcbiAgICAgIG1heCA9IEluZmluaXR5XG4gICAgfSA9IHNldHRpbmdzLFxuICAgIF9zZXR0aW5ncyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzZXR0aW5ncywgX2V4Y2x1ZGVkMiQyKTtcbiAgbGV0IF92YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICBjb25zdCBzdWZmaXggPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUuc3Vic3RyaW5nKCgnJyArIF92YWx1ZSkubGVuZ3RoKSA6IHVuZGVmaW5lZDtcbiAgX3ZhbHVlID0gY2xhbXAoX3ZhbHVlLCBtaW4sIG1heCk7XG5cbiAgbGV0IHN0ZXAgPSBzZXR0aW5ncy5zdGVwO1xuICBpZiAoIXN0ZXApIHtcbiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKG1pbikpIHtcbiAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUobWF4KSkgc3RlcCA9ICsoTWF0aC5hYnMobWF4IC0gbWluKSAvIDEwMCkudG9QcmVjaXNpb24oMSk7ZWxzZSBzdGVwID0gKyhNYXRoLmFicyhfdmFsdWUgLSBtaW4pIC8gMTAwKS50b1ByZWNpc2lvbigxKTtcbiAgICB9IGVsc2UgaWYgKE51bWJlci5pc0Zpbml0ZShtYXgpKSBzdGVwID0gKyhNYXRoLmFicyhtYXggLSBfdmFsdWUpIC8gMTAwKS50b1ByZWNpc2lvbigxKTtcbiAgfVxuICBjb25zdCBwYWRTdGVwID0gc3RlcCA/IGdldFN0ZXAoc3RlcCkgKiAxMCA6IGdldFN0ZXAoX3ZhbHVlKTtcbiAgc3RlcCA9IHN0ZXAgfHwgcGFkU3RlcCAvIDEwO1xuICBjb25zdCBwYWQgPSBNYXRoLnJvdW5kKGNsYW1wKE1hdGgubG9nMTAoMSAvIHBhZFN0ZXApLCAwLCAyKSk7XG4gIHJldHVybiB7XG4gICAgdmFsdWU6IHN1ZmZpeCA/IF92YWx1ZSArIHN1ZmZpeCA6IF92YWx1ZSxcbiAgICBzZXR0aW5nczogX29iamVjdFNwcmVhZDIoe1xuICAgICAgaW5pdGlhbFZhbHVlOiBfdmFsdWUsXG4gICAgICBzdGVwLFxuICAgICAgcGFkLFxuICAgICAgbWluLFxuICAgICAgbWF4LFxuICAgICAgc3VmZml4XG4gICAgfSwgX3NldHRpbmdzKVxuICB9O1xufTtcblxuY29uc3Qgc2FuaXRpemVTdGVwJDEgPSAodiwge1xuICBzdGVwLFxuICBpbml0aWFsVmFsdWVcbn0pID0+IHtcbiAgY29uc3Qgc3RlcHMgPSBNYXRoLnJvdW5kKCh2IC0gaW5pdGlhbFZhbHVlKSAvIHN0ZXApO1xuICByZXR1cm4gaW5pdGlhbFZhbHVlICsgc3RlcHMgKiBzdGVwO1xufTtcblxudmFyIHByb3BzJDMgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgc2NoZW1hOiBzY2hlbWEkMyxcbiAgc2FuaXRpemU6IHNhbml0aXplJDMsXG4gIGZvcm1hdDogZm9ybWF0JDEsXG4gIG5vcm1hbGl6ZTogbm9ybWFsaXplJDIsXG4gIHNhbml0aXplU3RlcDogc2FuaXRpemVTdGVwJDFcbn0pO1xuXG5mdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuY29uc3QgSW5wdXRDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh7fSk7XG5mdW5jdGlvbiB1c2VJbnB1dENvbnRleHQoKSB7XG4gIHJldHVybiB1c2VDb250ZXh0KElucHV0Q29udGV4dCk7XG59XG5jb25zdCBUaGVtZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0KG51bGwpO1xuY29uc3QgU3RvcmVDb250ZXh0ID0gY3JlYXRlQ29udGV4dChudWxsKTtcbmNvbnN0IFBhbmVsU2V0dGluZ3NDb250ZXh0ID0gY3JlYXRlQ29udGV4dChudWxsKTtcbmZ1bmN0aW9uIHVzZVN0b3JlQ29udGV4dCgpIHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoU3RvcmVDb250ZXh0KTtcbn1cbmZ1bmN0aW9uIHVzZVBhbmVsU2V0dGluZ3NDb250ZXh0KCkge1xuICByZXR1cm4gdXNlQ29udGV4dChQYW5lbFNldHRpbmdzQ29udGV4dCk7XG59XG5mdW5jdGlvbiBMZXZhU3RvcmVQcm92aWRlcih7XG4gIGNoaWxkcmVuLFxuICBzdG9yZVxufSkge1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChTdG9yZUNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogc3RvcmVcbiAgfSwgY2hpbGRyZW4pO1xufVxuXG5jb25zdCBnZXREZWZhdWx0VGhlbWUgPSAoKSA9PiAoe1xuICBjb2xvcnM6IHtcbiAgICBlbGV2YXRpb24xOiAnIzI5MmQzOScsXG4gICAgZWxldmF0aW9uMjogJyMxODFjMjAnLFxuICAgIGVsZXZhdGlvbjM6ICcjMzczYzRiJyxcbiAgICBhY2NlbnQxOiAnIzAwNjZkYycsXG4gICAgYWNjZW50MjogJyMwMDdiZmYnLFxuICAgIGFjY2VudDM6ICcjM2M5M2ZmJyxcbiAgICBoaWdobGlnaHQxOiAnIzUzNTc2MCcsXG4gICAgaGlnaGxpZ2h0MjogJyM4YzkyYTQnLFxuICAgIGhpZ2hsaWdodDM6ICcjZmVmZWZlJyxcbiAgICB2aXZpZDE6ICcjZmZjYzAwJyxcbiAgICBmb2xkZXJXaWRnZXRDb2xvcjogJyRoaWdobGlnaHQyJyxcbiAgICBmb2xkZXJUZXh0Q29sb3I6ICckaGlnaGxpZ2h0MycsXG4gICAgdG9vbFRpcEJhY2tncm91bmQ6ICckaGlnaGxpZ2h0MycsXG4gICAgdG9vbFRpcFRleHQ6ICckZWxldmF0aW9uMidcbiAgfSxcbiAgcmFkaWk6IHtcbiAgICB4czogJzJweCcsXG4gICAgc206ICczcHgnLFxuICAgIGxnOiAnMTBweCdcbiAgfSxcbiAgc3BhY2U6IHtcbiAgICB4czogJzNweCcsXG4gICAgc206ICc2cHgnLFxuICAgIG1kOiAnMTBweCcsXG4gICAgcm93R2FwOiAnN3B4JyxcbiAgICBjb2xHYXA6ICc3cHgnXG4gIH0sXG4gIGZvbnRzOiB7XG4gICAgbW9ubzogYHVpLW1vbm9zcGFjZSwgU0ZNb25vLVJlZ3VsYXIsIE1lbmxvLCAnUm9ib3RvIE1vbm8nLCBtb25vc3BhY2VgLFxuICAgIHNhbnM6IGBzeXN0ZW0tdWksIHNhbnMtc2VyaWZgXG4gIH0sXG4gIGZvbnRTaXplczoge1xuICAgIHJvb3Q6ICcxMXB4JyxcbiAgICB0b29sVGlwOiAnJHJvb3QnXG4gIH0sXG4gIHNpemVzOiB7XG4gICAgcm9vdFdpZHRoOiAnMjgwcHgnLFxuICAgIGNvbnRyb2xXaWR0aDogJzE2MHB4JyxcbiAgICBudW1iZXJJbnB1dE1pbldpZHRoOiAnMzhweCcsXG4gICAgc2NydWJiZXJXaWR0aDogJzhweCcsXG4gICAgc2NydWJiZXJIZWlnaHQ6ICcxNnB4JyxcbiAgICByb3dIZWlnaHQ6ICcyNHB4JyxcbiAgICBmb2xkZXJUaXRsZUhlaWdodDogJzIwcHgnLFxuICAgIGNoZWNrYm94U2l6ZTogJzE2cHgnLFxuICAgIGpveXN0aWNrV2lkdGg6ICcxMDBweCcsXG4gICAgam95c3RpY2tIZWlnaHQ6ICcxMDBweCcsXG4gICAgY29sb3JQaWNrZXJXaWR0aDogJyRjb250cm9sV2lkdGgnLFxuICAgIGNvbG9yUGlja2VySGVpZ2h0OiAnMTAwcHgnLFxuICAgIGltYWdlUHJldmlld1dpZHRoOiAnJGNvbnRyb2xXaWR0aCcsXG4gICAgaW1hZ2VQcmV2aWV3SGVpZ2h0OiAnMTAwcHgnLFxuICAgIG1vbml0b3JIZWlnaHQ6ICc2MHB4JyxcbiAgICB0aXRsZUJhckhlaWdodDogJzM5cHgnXG4gIH0sXG4gIHNoYWRvd3M6IHtcbiAgICBsZXZlbDE6ICcwIDAgOXB4IDAgIzAwMDAwMDg4JyxcbiAgICBsZXZlbDI6ICcwIDRweCAxNHB4ICMwMDAwMDAzMydcbiAgfSxcbiAgYm9yZGVyV2lkdGhzOiB7XG4gICAgcm9vdDogJzBweCcsXG4gICAgaW5wdXQ6ICcxcHgnLFxuICAgIGZvY3VzOiAnMXB4JyxcbiAgICBob3ZlcjogJzFweCcsXG4gICAgYWN0aXZlOiAnMXB4JyxcbiAgICBmb2xkZXI6ICcxcHgnXG4gIH0sXG4gIGZvbnRXZWlnaHRzOiB7XG4gICAgbGFiZWw6ICdub3JtYWwnLFxuICAgIGZvbGRlcjogJ25vcm1hbCcsXG4gICAgYnV0dG9uOiAnbm9ybWFsJ1xuICB9XG59KTtcbmZ1bmN0aW9uIGNyZWF0ZVN0YXRlQ2xhc3ModmFsdWUsIG9wdGlvbnMpIHtcbiAgY29uc3QgW2JvcmRlckNvbG9yLCBiZ0NvbG9yXSA9IHZhbHVlLnNwbGl0KCcgJyk7XG4gIGNvbnN0IGNzcyA9IHt9O1xuICBpZiAoYm9yZGVyQ29sb3IgIT09ICdub25lJykge1xuICAgIGNzcy5ib3hTaGFkb3cgPSBgJHtvcHRpb25zLmluc2V0ID8gJ2luc2V0ICcgOiAnJ30wIDAgMCAkYm9yZGVyV2lkdGhzJHtbb3B0aW9ucy5rZXldfSAkY29sb3JzJHtib3JkZXJDb2xvciAhPT0gJ2RlZmF1bHQnICYmIGJvcmRlckNvbG9yIHx8IG9wdGlvbnMuYm9yZGVyQ29sb3J9YDtcbiAgfVxuICBpZiAoYmdDb2xvcikge1xuICAgIGNzcy5iYWNrZ3JvdW5kQ29sb3IgPSBiZ0NvbG9yO1xuICB9XG4gIHJldHVybiBjc3M7XG59XG5jb25zdCB1dGlscyA9IHtcbiAgJGlucHV0U3R5bGU6ICgpID0+IHZhbHVlID0+IGNyZWF0ZVN0YXRlQ2xhc3ModmFsdWUsIHtcbiAgICBrZXk6ICckaW5wdXQnLFxuICAgIGJvcmRlckNvbG9yOiAnJGhpZ2hsaWdodDEnLFxuICAgIGluc2V0OiB0cnVlXG4gIH0pLFxuICAkZm9jdXNTdHlsZTogKCkgPT4gdmFsdWUgPT4gY3JlYXRlU3RhdGVDbGFzcyh2YWx1ZSwge1xuICAgIGtleTogJyRmb2N1cycsXG4gICAgYm9yZGVyQ29sb3I6ICckYWNjZW50MidcbiAgfSksXG4gICRob3ZlclN0eWxlOiAoKSA9PiB2YWx1ZSA9PiBjcmVhdGVTdGF0ZUNsYXNzKHZhbHVlLCB7XG4gICAga2V5OiAnJGhvdmVyJyxcbiAgICBib3JkZXJDb2xvcjogJyRhY2NlbnQxJyxcbiAgICBpbnNldDogdHJ1ZVxuICB9KSxcbiAgJGFjdGl2ZVN0eWxlOiAoKSA9PiB2YWx1ZSA9PiBjcmVhdGVTdGF0ZUNsYXNzKHZhbHVlLCB7XG4gICAga2V5OiAnJGFjdGl2ZScsXG4gICAgYm9yZGVyQ29sb3I6ICckYWNjZW50MScsXG4gICAgaW5zZXQ6IHRydWVcbiAgfSlcbn07XG5jb25zdCB7XG4gIHN0eWxlZCxcbiAgY3NzLFxuICBjcmVhdGVUaGVtZSxcbiAgZ2xvYmFsQ3NzLFxuICBrZXlmcmFtZXNcbn0gPSBjcmVhdGVTdGl0Y2hlcyh7XG4gIHByZWZpeDogJ2xldmEnLFxuICB0aGVtZTogZ2V0RGVmYXVsdFRoZW1lKCksXG4gIHV0aWxzOiBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgdXRpbHMpLCB7fSwge1xuICAgICRmbGV4OiAoKSA9PiAoe1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcidcbiAgICB9KSxcbiAgICAkZmxleENlbnRlcjogKCkgPT4gKHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInXG4gICAgfSksXG4gICAgJHJlc2V0OiAoKSA9PiAoe1xuICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgZm9udFNpemU6ICdpbmhlcml0JyxcbiAgICAgIGZvbnRXZWlnaHQ6ICdpbmhlcml0JyxcbiAgICAgIGNvbG9yOiAnaW5oZXJpdCcsXG4gICAgICBmb250RmFtaWx5OiAnaW5oZXJpdCcsXG4gICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgIGFwcGVhcmFuY2U6ICdub25lJ1xuICAgIH0pLFxuICAgICRkcmFnZ2FibGU6ICgpID0+ICh7XG4gICAgICB0b3VjaEFjdGlvbjogJ25vbmUnLFxuICAgICAgV2Via2l0VXNlckRyYWc6ICdub25lJyxcbiAgICAgIHVzZXJTZWxlY3Q6ICdub25lJ1xuICAgIH0pLFxuICAgICRmb2N1czogdmFsdWUgPT4gKHtcbiAgICAgICcmOmZvY3VzJzogdXRpbHMuJGZvY3VzU3R5bGUoKSh2YWx1ZSlcbiAgICB9KSxcbiAgICAkZm9jdXNXaXRoaW46IHZhbHVlID0+ICh7XG4gICAgICAnJjpmb2N1cy13aXRoaW4nOiB1dGlscy4kZm9jdXNTdHlsZSgpKHZhbHVlKVxuICAgIH0pLFxuICAgICRob3ZlcjogdmFsdWUgPT4gKHtcbiAgICAgICcmOmhvdmVyJzogdXRpbHMuJGhvdmVyU3R5bGUoKSh2YWx1ZSlcbiAgICB9KSxcbiAgICAkYWN0aXZlOiB2YWx1ZSA9PiAoe1xuICAgICAgJyY6YWN0aXZlJzogdXRpbHMuJGFjdGl2ZVN0eWxlKCkodmFsdWUpXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgZ2xvYmFsU3R5bGVzID0gZ2xvYmFsQ3NzKHtcbiAgJy5sZXZhX19wYW5lbF9fZHJhZ2dlZCc6IHtcbiAgICBXZWJraXRVc2VyRHJhZzogJ25vbmUnLFxuICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgICBpbnB1dDoge1xuICAgICAgdXNlclNlbGVjdDogJ25vbmUnXG4gICAgfSxcbiAgICAnKic6IHtcbiAgICAgIGN1cnNvcjogJ2V3LXJlc2l6ZSAhaW1wb3J0YW50J1xuICAgIH1cbiAgfVxufSk7XG5cbmZ1bmN0aW9uIG1lcmdlVGhlbWUobmV3VGhlbWUpIHtcbiAgY29uc3QgZGVmYXVsdFRoZW1lID0gZ2V0RGVmYXVsdFRoZW1lKCk7XG4gIGlmICghbmV3VGhlbWUpIHJldHVybiB7XG4gICAgdGhlbWU6IGRlZmF1bHRUaGVtZSxcbiAgICBjbGFzc05hbWU6ICcnXG4gIH07XG4gIE9iamVjdC5rZXlzKG5ld1RoZW1lKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgT2JqZWN0LmFzc2lnbihkZWZhdWx0VGhlbWVba2V5XSwgbmV3VGhlbWVba2V5XSk7XG4gIH0pO1xuICBjb25zdCBjdXN0b21UaGVtZSA9IGNyZWF0ZVRoZW1lKGRlZmF1bHRUaGVtZSk7XG4gIHJldHVybiB7XG4gICAgdGhlbWU6IGRlZmF1bHRUaGVtZSxcbiAgICBjbGFzc05hbWU6IGN1c3RvbVRoZW1lLmNsYXNzTmFtZVxuICB9O1xufVxuZnVuY3Rpb24gdXNlVGgoY2F0ZWdvcnksIGtleSkge1xuICBjb25zdCB7XG4gICAgdGhlbWVcbiAgfSA9IHVzZUNvbnRleHQoVGhlbWVDb250ZXh0KTtcbiAgaWYgKCEoY2F0ZWdvcnkgaW4gdGhlbWUpIHx8ICEoa2V5IGluIHRoZW1lW2NhdGVnb3J5XSkpIHtcbiAgICB3YXJuKExldmFFcnJvcnMuVEhFTUVfRVJST1IsIGNhdGVnb3J5LCBrZXkpO1xuICAgIHJldHVybiAnJztcbiAgfVxuICBsZXQgX2tleSA9IGtleTtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBsZXQgdmFsdWUgPSB0aGVtZVtjYXRlZ29yeV1bX2tleV07XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuY2hhckF0KDApID09PSAnJCcpIF9rZXkgPSB2YWx1ZS5zdWJzdHIoMSk7ZWxzZSByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuY29uc3QgU3R5bGVkSW5wdXQgPSBzdHlsZWQoJ2lucHV0Jywge1xuICAkcmVzZXQ6ICcnLFxuICBwYWRkaW5nOiAnMCAkc20nLFxuICB3aWR0aDogMCxcbiAgbWluV2lkdGg6IDAsXG4gIGZsZXg6IDEsXG4gIGhlaWdodDogJzEwMCUnLFxuICB2YXJpYW50czoge1xuICAgIGxldmFUeXBlOiB7XG4gICAgICBudW1iZXI6IHtcbiAgICAgICAgdGV4dEFsaWduOiAncmlnaHQnXG4gICAgICB9XG4gICAgfSxcbiAgICBhczoge1xuICAgICAgdGV4dGFyZWE6IHtcbiAgICAgICAgcGFkZGluZzogJyRzbSdcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuY29uc3QgSW5uZXJMYWJlbCA9IHN0eWxlZCgnZGl2Jywge1xuICAkZHJhZ2dhYmxlOiAnJyxcbiAgaGVpZ2h0OiAnMTAwJScsXG4gICRmbGV4Q2VudGVyOiAnJyxcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gIHBhZGRpbmc6ICcwICR4cycsXG4gIGZvbnRTaXplOiAnMC44ZW0nLFxuICBvcGFjaXR5OiAwLjgsXG4gIGN1cnNvcjogJ2RlZmF1bHQnLFxuICB0b3VjaEFjdGlvbjogJ25vbmUnLFxuICBbYCYgKyAke1N0eWxlZElucHV0fWBdOiB7XG4gICAgcGFkZGluZ0xlZnQ6IDBcbiAgfVxufSk7XG5jb25zdCBJbm5lck51bWJlckxhYmVsID0gc3R5bGVkKElubmVyTGFiZWwsIHtcbiAgY3Vyc29yOiAnZXctcmVzaXplJyxcbiAgbWFyZ2luUmlnaHQ6ICctJHhzJyxcbiAgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsXG4gIG9wYWNpdHk6IDAuMyxcbiAgJyY6aG92ZXInOiB7XG4gICAgb3BhY2l0eTogMVxuICB9LFxuICB2YXJpYW50czoge1xuICAgIGRyYWdnaW5nOiB7XG4gICAgICB0cnVlOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyRhY2NlbnQyJyxcbiAgICAgICAgb3BhY2l0eTogMVxuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5jb25zdCBJbnB1dENvbnRhaW5lciA9IHN0eWxlZCgnZGl2Jywge1xuICAkZmxleDogJycsXG4gIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICBib3JkZXJSYWRpdXM6ICckc20nLFxuICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gIGNvbG9yOiAnaW5oZXJpdCcsXG4gIGhlaWdodDogJyRyb3dIZWlnaHQnLFxuICBiYWNrZ3JvdW5kQ29sb3I6ICckZWxldmF0aW9uMycsXG4gICRpbnB1dFN0eWxlOiAnJGVsZXZhdGlvbjEnLFxuICAkaG92ZXI6ICcnLFxuICAkZm9jdXNXaXRoaW46ICcnLFxuICB2YXJpYW50czoge1xuICAgIHRleHRBcmVhOiB7XG4gICAgICB0cnVlOiB7XG4gICAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuY29uc3QgX2V4Y2x1ZGVkJDcgPSBbXCJpbm5lckxhYmVsXCIsIFwidmFsdWVcIiwgXCJvblVwZGF0ZVwiLCBcIm9uQ2hhbmdlXCIsIFwib25LZXlEb3duXCIsIFwidHlwZVwiLCBcImlkXCIsIFwiaW5wdXRUeXBlXCIsIFwicm93c1wiXSxcbiAgX2V4Y2x1ZGVkMiQxID0gW1wib25VcGRhdGVcIl07XG5mdW5jdGlvbiBWYWx1ZUlucHV0KF9yZWYpIHtcbiAgbGV0IHtcbiAgICAgIGlubmVyTGFiZWwsXG4gICAgICB2YWx1ZSxcbiAgICAgIG9uVXBkYXRlLFxuICAgICAgb25DaGFuZ2UsXG4gICAgICBvbktleURvd24sXG4gICAgICB0eXBlLFxuICAgICAgaWQsXG4gICAgICBpbnB1dFR5cGUgPSAndGV4dCcsXG4gICAgICByb3dzID0gMFxuICAgIH0gPSBfcmVmLFxuICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIF9leGNsdWRlZCQ3KTtcbiAgY29uc3Qge1xuICAgIGlkOiBfaWQsXG4gICAgZW1pdE9uRWRpdFN0YXJ0LFxuICAgIGVtaXRPbkVkaXRFbmQsXG4gICAgZGlzYWJsZWRcbiAgfSA9IHVzZUlucHV0Q29udGV4dCgpO1xuICBjb25zdCBpbnB1dElkID0gaWQgfHwgX2lkO1xuICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgaXNUZXh0QXJlYSA9IHJvd3MgPiAwO1xuICBjb25zdCBhc1R5cGUgPSBpc1RleHRBcmVhID8gJ3RleHRhcmVhJyA6ICdpbnB1dCc7XG4gIGNvbnN0IHVwZGF0ZSA9IHVzZUNhbGxiYWNrKGZuID0+IGV2ZW50ID0+IHtcbiAgICBjb25zdCBfdmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlO1xuICAgIGZuKF92YWx1ZSk7XG4gIH0sIFtdKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHJlZiA9IGlucHV0UmVmLmN1cnJlbnQ7XG4gICAgY29uc3QgX29uVXBkYXRlID0gdXBkYXRlKHZhbHVlID0+IHtcbiAgICAgIG9uVXBkYXRlKHZhbHVlKTtcbiAgICAgIGVtaXRPbkVkaXRFbmQoKTtcbiAgICB9KTtcbiAgICByZWYgPT09IG51bGwgfHwgcmVmID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZWYuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIF9vblVwZGF0ZSk7XG4gICAgcmV0dXJuICgpID0+IHJlZiA9PT0gbnVsbCB8fCByZWYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlZi5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgX29uVXBkYXRlKTtcbiAgfSwgW3VwZGF0ZSwgb25VcGRhdGUsIGVtaXRPbkVkaXRFbmRdKTtcbiAgY29uc3Qgb25LZXlQcmVzcyA9IHVzZUNhbGxiYWNrKGV2ZW50ID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICB1cGRhdGUob25VcGRhdGUpKGV2ZW50KTtcbiAgICB9XG4gIH0sIFt1cGRhdGUsIG9uVXBkYXRlXSk7XG5cbiAgY29uc3QgaW5wdXRQcm9wcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIGFzOiBhc1R5cGVcbiAgfSwgaXNUZXh0QXJlYSA/IHtcbiAgICByb3dzXG4gIH0gOiB7fSwgcHJvcHMpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dENvbnRhaW5lciwge1xuICAgIHRleHRBcmVhOiBpc1RleHRBcmVhXG4gIH0sIGlubmVyTGFiZWwgJiYgdHlwZW9mIGlubmVyTGFiZWwgPT09ICdzdHJpbmcnID8gUmVhY3QuY3JlYXRlRWxlbWVudChJbm5lckxhYmVsLCBudWxsLCBpbm5lckxhYmVsKSA6IGlubmVyTGFiZWwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSW5wdXQsIF9leHRlbmRzKHtcbiAgICBsZXZhVHlwZTogdHlwZVxuICAgICxcbiAgICByZWY6IGlucHV0UmVmLFxuICAgIGlkOiBpbnB1dElkLFxuICAgIHR5cGU6IGlucHV0VHlwZSxcbiAgICBhdXRvQ29tcGxldGU6IFwib2ZmXCIsXG4gICAgc3BlbGxDaGVjazogXCJmYWxzZVwiLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBvbkNoYW5nZTogdXBkYXRlKG9uQ2hhbmdlKSxcbiAgICBvbkZvY3VzOiAoKSA9PiBlbWl0T25FZGl0U3RhcnQoKSxcbiAgICBvbktleVByZXNzOiBvbktleVByZXNzLFxuICAgIG9uS2V5RG93bjogb25LZXlEb3duLFxuICAgIGRpc2FibGVkOiBkaXNhYmxlZFxuICB9LCBpbnB1dFByb3BzKSkpO1xufVxuZnVuY3Rpb24gTnVtYmVySW5wdXQoX3JlZjIpIHtcbiAgbGV0IHtcbiAgICAgIG9uVXBkYXRlXG4gICAgfSA9IF9yZWYyLFxuICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYyLCBfZXhjbHVkZWQyJDEpO1xuICBjb25zdCBfb25VcGRhdGUgPSB1c2VDYWxsYmFjayh2ID0+IG9uVXBkYXRlKHBhcnNlTnVtYmVyKHYpKSwgW29uVXBkYXRlXSk7XG4gIGNvbnN0IG9uS2V5RG93biA9IHVzZUNhbGxiYWNrKGV2ZW50ID0+IHtcbiAgICBjb25zdCBkaXIgPSBldmVudC5rZXkgPT09ICdBcnJvd1VwJyA/IDEgOiBldmVudC5rZXkgPT09ICdBcnJvd0Rvd24nID8gLTEgOiAwO1xuICAgIGlmIChkaXIpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBzdGVwID0gZXZlbnQuYWx0S2V5ID8gMC4xIDogZXZlbnQuc2hpZnRLZXkgPyAxMCA6IDE7XG4gICAgICBvblVwZGF0ZSh2ID0+IHBhcnNlRmxvYXQodikgKyBkaXIgKiBzdGVwKTtcbiAgICB9XG4gIH0sIFtvblVwZGF0ZV0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChWYWx1ZUlucHV0LCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICBvblVwZGF0ZTogX29uVXBkYXRlLFxuICAgIG9uS2V5RG93bjogb25LZXlEb3duLFxuICAgIHR5cGU6IFwibnVtYmVyXCJcbiAgfSkpO1xufVxuXG5jb25zdCBTdHlsZWRGb2xkZXIgPSBzdHlsZWQoJ2RpdicsIHt9KTtcbmNvbnN0IFN0eWxlZFdyYXBwZXIgPSBzdHlsZWQoJ2RpdicsIHtcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gIGJhY2tncm91bmQ6ICckZWxldmF0aW9uMicsXG4gIHRyYW5zaXRpb246ICdoZWlnaHQgMzAwbXMgZWFzZScsXG4gIHZhcmlhbnRzOiB7XG4gICAgZmlsbDoge1xuICAgICAgdHJ1ZToge30sXG4gICAgICBmYWxzZToge31cbiAgICB9LFxuICAgIGZsYXQ6IHtcbiAgICAgIGZhbHNlOiB7fSxcbiAgICAgIHRydWU6IHt9XG4gICAgfSxcbiAgICBpc1Jvb3Q6IHtcbiAgICAgIHRydWU6IHt9LFxuICAgICAgZmFsc2U6IHtcbiAgICAgICAgcGFkZGluZ0xlZnQ6ICckbWQnLFxuICAgICAgICAnJjo6YWZ0ZXInOiB7XG4gICAgICAgICAgY29udGVudDogJ1wiXCInLFxuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIHdpZHRoOiAnJGJvcmRlcldpZHRocyRmb2xkZXInLFxuICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyRmb2xkZXJXaWRnZXRDb2xvcicsXG4gICAgICAgICAgb3BhY2l0eTogMC40LFxuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSknXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGNvbXBvdW5kVmFyaWFudHM6IFt7XG4gICAgaXNSb290OiB0cnVlLFxuICAgIGZpbGw6IGZhbHNlLFxuICAgIGNzczoge1xuICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICBtYXhIZWlnaHQ6ICdjYWxjKDEwMHZoIC0gMjBweCAtICQkdGl0bGVCYXJIZWlnaHQpJ1xuICAgIH1cbiAgfSwge1xuICAgIGlzUm9vdDogdHJ1ZSxcbiAgICBmbGF0OiBmYWxzZSxcbiAgICBjc3M6IHtcbiAgICAgIGJvcmRlclJhZGl1czogJyRsZydcbiAgICB9XG4gIH1dXG59KTtcbmNvbnN0IFN0eWxlZFRpdGxlID0gc3R5bGVkKCdkaXYnLCB7XG4gICRmbGV4OiAnJyxcbiAgY29sb3I6ICckZm9sZGVyVGV4dENvbG9yJyxcbiAgdXNlclNlbGVjdDogJ25vbmUnLFxuICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgaGVpZ2h0OiAnJGZvbGRlclRpdGxlSGVpZ2h0JyxcbiAgZm9udFdlaWdodDogJyRmb2xkZXInLFxuICAnPiBzdmcnOiB7XG4gICAgbWFyZ2luTGVmdDogLTQsXG4gICAgbWFyZ2luUmlnaHQ6IDQsXG4gICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgZmlsbDogJyRmb2xkZXJXaWRnZXRDb2xvcicsXG4gICAgb3BhY2l0eTogMC42XG4gIH0sXG4gICcmOmhvdmVyID4gc3ZnJzoge1xuICAgIGZpbGw6ICckZm9sZGVyV2lkZ2V0Q29sb3InXG4gIH0sXG4gIFtgJjpob3ZlciArICR7U3R5bGVkV3JhcHBlcn06OmFmdGVyYF06IHtcbiAgICBvcGFjaXR5OiAwLjZcbiAgfSxcbiAgW2Ake1N0eWxlZEZvbGRlcn06aG92ZXIgPiAmICsgJHtTdHlsZWRXcmFwcGVyfTo6YWZ0ZXJgXToge1xuICAgIG9wYWNpdHk6IDAuNlxuICB9LFxuICBbYCR7U3R5bGVkRm9sZGVyfTpob3ZlciA+ICYgPiBzdmdgXToge1xuICAgIG9wYWNpdHk6IDFcbiAgfVxufSk7XG5jb25zdCBTdHlsZWRDb250ZW50ID0gc3R5bGVkKCdkaXYnLCB7XG4gIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICBkaXNwbGF5OiAnZ3JpZCcsXG4gIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICcxMDAlJyxcbiAgcm93R2FwOiAnJHJvd0dhcCcsXG4gIHRyYW5zaXRpb246ICdvcGFjaXR5IDI1MG1zIGVhc2UnLFxuICB2YXJpYW50czoge1xuICAgIHRvZ2dsZWQ6IHtcbiAgICAgIHRydWU6IHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgdHJhbnNpdGlvbkRlbGF5OiAnMjUwbXMnXG4gICAgICB9LFxuICAgICAgZmFsc2U6IHtcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgdHJhbnNpdGlvbkRlbGF5OiAnMG1zJyxcbiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnXG4gICAgICB9XG4gICAgfSxcbiAgICBpc1Jvb3Q6IHtcbiAgICAgIHRydWU6IHtcbiAgICAgICAgJyYgPiBkaXYnOiB7XG4gICAgICAgICAgcGFkZGluZ0xlZnQ6ICckbWQnLFxuICAgICAgICAgIHBhZGRpbmdSaWdodDogJyRtZCdcbiAgICAgICAgfSxcbiAgICAgICAgJyYgPiBkaXY6Zmlyc3Qtb2YtdHlwZSc6IHtcbiAgICAgICAgICBwYWRkaW5nVG9wOiAnJHNtJ1xuICAgICAgICB9LFxuICAgICAgICAnJiA+IGRpdjpsYXN0LW9mLXR5cGUnOiB7XG4gICAgICAgICAgcGFkZGluZ0JvdHRvbTogJyRzbSdcbiAgICAgICAgfSxcblxuICAgICAgICBbYD4gJHtTdHlsZWRGb2xkZXJ9Om5vdCg6Zmlyc3Qtb2YtdHlwZSlgXToge1xuICAgICAgICAgIHBhZGRpbmdUb3A6ICckc20nLFxuICAgICAgICAgIG1hcmdpblRvcDogJyRtZCcsXG4gICAgICAgICAgYm9yZGVyVG9wOiAnJGJvcmRlcldpZHRocyRmb2xkZXIgc29saWQgJGNvbG9ycyRlbGV2YXRpb24xJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuY29uc3QgU3R5bGVkUm93ID0gc3R5bGVkKCdkaXYnLCB7XG4gIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICB6SW5kZXg6IDEwMCxcbiAgZGlzcGxheTogJ2dyaWQnLFxuICByb3dHYXA6ICckcm93R2FwJyxcbiAgZ3JpZFRlbXBsYXRlUm93czogJ21pbm1heCgkc2l6ZXMkcm93SGVpZ2h0LCBtYXgtY29udGVudCknLFxuICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgY29sb3I6ICckaGlnaGxpZ2h0MicsXG4gIFtgJHtTdHlsZWRDb250ZW50fSA+ICZgXToge1xuICAgICcmOmZpcnN0LW9mLXR5cGUnOiB7XG4gICAgICBtYXJnaW5Ub3A6ICckcm93R2FwJ1xuICAgIH0sXG4gICAgJyY6bGFzdC1vZi10eXBlJzoge1xuICAgICAgbWFyZ2luQm90dG9tOiAnJHJvd0dhcCdcbiAgICB9XG4gIH0sXG4gIHZhcmlhbnRzOiB7XG4gICAgZGlzYWJsZWQ6IHtcbiAgICAgIHRydWU6IHtcbiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnXG4gICAgICB9LFxuICAgICAgZmFsc2U6IHtcbiAgICAgICAgJyY6aG92ZXIsJjpmb2N1cy13aXRoaW4nOiB7XG4gICAgICAgICAgY29sb3I6ICckaGlnaGxpZ2h0MydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5jb25zdCBTdHlsZWRJbnB1dFJvdyA9IHN0eWxlZChTdHlsZWRSb3csIHtcbiAgZ3JpZFRlbXBsYXRlQ29sdW1uczogJ2F1dG8gJHNpemVzJGNvbnRyb2xXaWR0aCcsXG4gIGNvbHVtbkdhcDogJyRjb2xHYXAnXG59KTtcbmNvbnN0IENvcHlMYWJlbENvbnRhaW5lciA9IHN0eWxlZCgnZGl2Jywge1xuICAkZmxleDogJycsXG4gIGhlaWdodDogJzEwMCUnLFxuICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAnJiA+IGRpdic6IHtcbiAgICBtYXJnaW5MZWZ0OiAnJGNvbEdhcCcsXG4gICAgcGFkZGluZzogJzAgJHhzJyxcbiAgICBvcGFjaXR5OiAwLjRcbiAgfSxcbiAgJyYgPiBkaXY6aG92ZXInOiB7XG4gICAgb3BhY2l0eTogMC44XG4gIH0sXG4gICcmID4gZGl2ID4gc3ZnJzoge1xuICAgIGRpc3BsYXk6ICdub25lJyxcbiAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICB3aWR0aDogMTMsXG4gICAgbWluV2lkdGg6IDEzLFxuICAgIGhlaWdodDogMTMsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnJGVsZXZhdGlvbjInXG4gIH0sXG4gICcmOmhvdmVyID4gZGl2ID4gc3ZnJzoge1xuICAgIGRpc3BsYXk6ICdibG9jaydcbiAgfSxcbiAgdmFyaWFudHM6IHtcbiAgICBhbGlnbjoge1xuICAgICAgdG9wOiB7XG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG4gICAgICAgIHBhZGRpbmdUb3A6ICckc20nXG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcbmNvbnN0IFN0eWxlZE9wdGlvbmFsVG9nZ2xlID0gc3R5bGVkKCdpbnB1dCcsIHtcbiAgJHJlc2V0OiAnJyxcbiAgaGVpZ2h0OiAwLFxuICB3aWR0aDogMCxcbiAgb3BhY2l0eTogMCxcbiAgbWFyZ2luOiAwLFxuICAnJiArIGxhYmVsJzoge1xuICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICRmbGV4Q2VudGVyOiAnJyxcbiAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgcGFkZGluZ0xlZnQ6IDIsXG4gICAgcGFkZGluZ1JpZ2h0OiAnJHNtJyxcbiAgICBwb2ludGVyRXZlbnRzOiAnYXV0bydcbiAgfSxcbiAgJyYgKyBsYWJlbDphZnRlcic6IHtcbiAgICBjb250ZW50OiAnXCJcIicsXG4gICAgd2lkdGg6IDYsXG4gICAgaGVpZ2h0OiA2LFxuICAgIGJhY2tncm91bmRDb2xvcjogJyRlbGV2YXRpb24zJyxcbiAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICRhY3RpdmVTdHlsZTogJydcbiAgfSxcbiAgJyY6Zm9jdXMgKyBsYWJlbDphZnRlcic6IHtcbiAgICAkZm9jdXNTdHlsZTogJydcbiAgfSxcbiAgJyYgKyBsYWJlbDphY3RpdmU6YWZ0ZXInOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiAnJGFjY2VudDEnLFxuICAgICRmb2N1c1N0eWxlOiAnJ1xuICB9LFxuICAnJjpjaGVja2VkICsgbGFiZWw6YWZ0ZXInOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiAnJGFjY2VudDEnXG4gIH1cbn0pO1xuY29uc3QgU3R5bGVkTGFiZWwgPSBzdHlsZWQoJ2xhYmVsJywge1xuICBmb250V2VpZ2h0OiAnJGxhYmVsJyxcbiAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsXG4gIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxuICAnJiA+IHN2Zyc6IHtcbiAgICBkaXNwbGF5OiAnYmxvY2snXG4gIH1cbn0pO1xuXG5jb25zdCBTdHlsZWRJbnB1dFdyYXBwZXIkMSA9IHN0eWxlZCgnZGl2Jywge1xuICBvcGFjaXR5OiAxLFxuICB2YXJpYW50czoge1xuICAgIGRpc2FibGVkOiB7XG4gICAgICB0cnVlOiB7XG4gICAgICAgIG9wYWNpdHk6IDAuNixcbiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICBbYCYgJHtTdHlsZWRMYWJlbH1gXToge1xuICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdhdXRvJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcbmNvbnN0IE92ZXJsYXkgPSBzdHlsZWQoJ2RpdicsIHtcbiAgcG9zaXRpb246ICdmaXhlZCcsXG4gIHRvcDogMCxcbiAgYm90dG9tOiAwLFxuICByaWdodDogMCxcbiAgbGVmdDogMCxcbiAgekluZGV4OiAxMDAwLFxuICB1c2VyU2VsZWN0OiAnbm9uZSdcbn0pO1xuY29uc3QgU3R5bGVkVG9vbFRpcENvbnRlbnQgPSBzdHlsZWQoJ2RpdicsIHtcbiAgYmFja2dyb3VuZDogJyR0b29sVGlwQmFja2dyb3VuZCcsXG4gIGZvbnRGYW1pbHk6ICckc2FucycsXG4gIGZvbnRTaXplOiAnJHRvb2xUaXAnLFxuICBwYWRkaW5nOiAnJHhzICRzbScsXG4gIGNvbG9yOiAnJHRvb2xUaXBUZXh0JyxcbiAgYm9yZGVyUmFkaXVzOiAnJHhzJyxcbiAgYm94U2hhZG93OiAnJGxldmVsMicsXG4gIG1heFdpZHRoOiAyNjBcbn0pO1xuY29uc3QgVG9vbFRpcEFycm93ID0gc3R5bGVkKEFycm93LCB7XG4gIGZpbGw6ICckdG9vbFRpcEJhY2tncm91bmQnXG59KTtcblxuZnVuY3Rpb24gUG9ydGFsKHtcbiAgY2hpbGRyZW5cbn0pIHtcbiAgY29uc3Qge1xuICAgIGNsYXNzTmFtZVxuICB9ID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChQLlJvb3QsIHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZVxuICB9LCBjaGlsZHJlbik7XG59XG5cbmNvbnN0IF9leGNsdWRlZCQ2ID0gW1wiYWxpZ25cIl07XG5mdW5jdGlvbiBPcHRpb25hbFRvZ2dsZSgpIHtcbiAgY29uc3Qge1xuICAgIGlkLFxuICAgIGRpc2FibGUsXG4gICAgZGlzYWJsZWRcbiAgfSA9IHVzZUlucHV0Q29udGV4dCgpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRPcHRpb25hbFRvZ2dsZSwge1xuICAgIGlkOiBpZCArICdfX2Rpc2FibGUnLFxuICAgIHR5cGU6IFwiY2hlY2tib3hcIixcbiAgICBjaGVja2VkOiAhZGlzYWJsZWQsXG4gICAgb25DaGFuZ2U6ICgpID0+IGRpc2FibGUoIWRpc2FibGVkKVxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcbiAgICBodG1sRm9yOiBpZCArICdfX2Rpc2FibGUnXG4gIH0pKTtcbn1cbmZ1bmN0aW9uIFJhd0xhYmVsKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBvcHRpb25hbCxcbiAgICBoaW50XG4gIH0gPSB1c2VJbnB1dENvbnRleHQoKTtcbiAgY29uc3QgaHRtbEZvciA9IHByb3BzLmh0bWxGb3IgfHwgKGlkID8ge1xuICAgIGh0bWxGb3I6IGlkXG4gIH0gOiBudWxsKTtcblxuICBjb25zdCB0aXRsZSA9ICFoaW50ICYmIHR5cGVvZiBwcm9wcy5jaGlsZHJlbiA9PT0gJ3N0cmluZycgPyB7XG4gICAgdGl0bGU6IHByb3BzLmNoaWxkcmVuXG4gIH0gOiBudWxsO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgb3B0aW9uYWwgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChPcHRpb25hbFRvZ2dsZSwgbnVsbCksIGhpbnQgIT09IHVuZGVmaW5lZCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmFkaXhUb29sdGlwLlJvb3QsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmFkaXhUb29sdGlwLlRyaWdnZXIsIHtcbiAgICBhc0NoaWxkOiB0cnVlXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkTGFiZWwsIF9leHRlbmRzKHt9LCBodG1sRm9yLCBwcm9wcykpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChSYWRpeFRvb2x0aXAuQ29udGVudCwge1xuICAgIHNpZGU6IFwidG9wXCIsXG4gICAgc2lkZU9mZnNldDogMlxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZFRvb2xUaXBDb250ZW50LCBudWxsLCBoaW50LCBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2xUaXBBcnJvdywgbnVsbCkpKSkgOiBSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZExhYmVsLCBfZXh0ZW5kcyh7fSwgaHRtbEZvciwgdGl0bGUsIHByb3BzKSkpO1xufVxuZnVuY3Rpb24gTGFiZWwoX3JlZikge1xuICBsZXQge1xuICAgICAgYWxpZ25cbiAgICB9ID0gX3JlZixcbiAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQkNik7XG4gIGNvbnN0IHtcbiAgICB2YWx1ZSxcbiAgICBsYWJlbCxcbiAgICBrZXksXG4gICAgZGlzYWJsZWRcbiAgfSA9IHVzZUlucHV0Q29udGV4dCgpO1xuICBjb25zdCB7XG4gICAgaGlkZUNvcHlCdXR0b25cbiAgfSA9IHVzZVBhbmVsU2V0dGluZ3NDb250ZXh0KCk7XG4gIGNvbnN0IGNvcHlFbmFibGVkID0gIWhpZGVDb3B5QnV0dG9uICYmIGtleSAhPT0gdW5kZWZpbmVkO1xuICBjb25zdCBbY29waWVkLCBzZXRDb3BpZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBoYW5kbGVDbGljayA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBba2V5XTogdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCA/IHZhbHVlIDogJydcbiAgICAgIH0pKTtcbiAgICAgIHNldENvcGllZCh0cnVlKTtcbiAgICB9IGNhdGNoIChfdW51c2VkKSB7XG4gICAgICB3YXJuKExldmFFcnJvcnMuQ0xJUEJPQVJEX0VSUk9SLCB7XG4gICAgICAgIFtrZXldOiB2YWx1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb3B5TGFiZWxDb250YWluZXIsIHtcbiAgICBhbGlnbjogYWxpZ24sXG4gICAgb25Qb2ludGVyTGVhdmU6ICgpID0+IHNldENvcGllZChmYWxzZSlcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChSYXdMYWJlbCwgcHJvcHMpLCBjb3B5RW5hYmxlZCAmJiAhZGlzYWJsZWQgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgdGl0bGU6IGBDbGljayB0byBjb3B5ICR7dHlwZW9mIGxhYmVsID09PSAnc3RyaW5nJyA/IGxhYmVsIDoga2V5fSB2YWx1ZWBcbiAgfSwgIWNvcGllZCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwge1xuICAgIG9uQ2xpY2s6IGhhbmRsZUNsaWNrLFxuICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgdmlld0JveDogXCIwIDAgMjAgMjBcIixcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk04IDNhMSAxIDAgMDExLTFoMmExIDEgMCAxMTAgMkg5YTEgMSAwIDAxLTEtMXpcIlxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTYgM2EyIDIgMCAwMC0yIDJ2MTFhMiAyIDAgMDAyIDJoOGEyIDIgMCAwMDItMlY1YTIgMiAwIDAwLTItMiAzIDMgMCAwMS0zIDNIOWEzIDMgMCAwMS0zLTN6XCJcbiAgfSkpIDogUmVhY3QuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7XG4gICAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgICB2aWV3Qm94OiBcIjAgMCAyMCAyMFwiLFxuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTkgMmExIDEgMCAwMDAgMmgyYTEgMSAwIDEwMC0ySDl6XCJcbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNNCA1YTIgMiAwIDAxMi0yIDMgMyAwIDAwMyAzaDJhMyAzIDAgMDAzLTMgMiAyIDAgMDEyIDJ2MTFhMiAyIDAgMDEtMiAySDZhMiAyIDAgMDEtMi0yVjV6bTkuNzA3IDUuNzA3YTEgMSAwIDAwLTEuNDE0LTEuNDE0TDkgMTIuNTg2bC0xLjI5My0xLjI5M2ExIDEgMCAwMC0xLjQxNCAxLjQxNGwyIDJhMSAxIDAgMDAxLjQxNCAwbDQtNHpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfSkpKSk7XG59XG5cbmNvbnN0IF9leGNsdWRlZCQ1ID0gW1widG9nZ2xlZFwiXTtcblxuY29uc3QgU3ZnID0gc3R5bGVkKCdzdmcnLCB7XG4gIGZpbGw6ICdjdXJyZW50Q29sb3InLFxuICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDM1MG1zIGVhc2UsIGZpbGwgMjUwbXMgZWFzZSdcbn0pO1xuZnVuY3Rpb24gQ2hldnJvbihfcmVmKSB7XG4gIGxldCB7XG4gICAgICB0b2dnbGVkXG4gICAgfSA9IF9yZWYsXG4gICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgX2V4Y2x1ZGVkJDUpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChTdmcsIF9leHRlbmRzKHtcbiAgICB3aWR0aDogXCI5XCIsXG4gICAgaGVpZ2h0OiBcIjVcIixcbiAgICB2aWV3Qm94OiBcIjAgMCA5IDVcIixcbiAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICAgIHN0eWxlOiB7XG4gICAgICB0cmFuc2Zvcm06IGByb3RhdGUoJHt0b2dnbGVkID8gMCA6IC05MH1kZWcpYFxuICAgIH1cbiAgfSwgcHJvcHMpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMy44IDQuNGMuNC4zIDEgLjMgMS40IDBMOCAxLjdBMSAxIDAgMDA3LjQgMEgxLjZhMSAxIDAgMDAtLjcgMS43bDMgMi43elwiXG4gIH0pKTtcbn1cblxuY29uc3QgX2V4Y2x1ZGVkJDQgPSBbXCJpbnB1dFwiXTtcbmZ1bmN0aW9uIFJvdyhfcmVmKSB7XG4gIGxldCB7XG4gICAgICBpbnB1dFxuICAgIH0gPSBfcmVmLFxuICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIF9leGNsdWRlZCQ0KTtcbiAgaWYgKGlucHV0KSByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJbnB1dFJvdywgcHJvcHMpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRSb3csIHByb3BzKTtcbn1cblxuZnVuY3Rpb24gdXNlSW5wdXRTZXR0ZXJzKHtcbiAgdmFsdWUsXG4gIHR5cGUsXG4gIHNldHRpbmdzLFxuICBzZXRWYWx1ZVxufSkge1xuICBjb25zdCBbZGlzcGxheVZhbHVlLCBzZXREaXNwbGF5VmFsdWVdID0gdXNlU3RhdGUoZm9ybWF0JDIodHlwZSwgdmFsdWUsIHNldHRpbmdzKSk7XG4gIGNvbnN0IHByZXZpb3VzVmFsdWVSZWYgPSB1c2VSZWYodmFsdWUpO1xuICBjb25zdCBzZXR0aW5nc1JlZiA9IHVzZVJlZihzZXR0aW5ncyk7XG4gIHNldHRpbmdzUmVmLmN1cnJlbnQgPSBzZXR0aW5ncztcbiAgY29uc3Qgc2V0Rm9ybWF0ID0gdXNlQ2FsbGJhY2sodiA9PiBzZXREaXNwbGF5VmFsdWUoZm9ybWF0JDIodHlwZSwgdiwgc2V0dGluZ3NSZWYuY3VycmVudCkpLCBbdHlwZV0pO1xuICBjb25zdCBvblVwZGF0ZSA9IHVzZUNhbGxiYWNrKHVwZGF0ZWRWYWx1ZSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldFZhbHVlKHVwZGF0ZWRWYWx1ZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdHlwZSxcbiAgICAgICAgcHJldmlvdXNWYWx1ZVxuICAgICAgfSA9IGVycm9yO1xuICAgICAgaWYgKHR5cGUgIT09ICdMRVZBX0VSUk9SJykgdGhyb3cgZXJyb3I7XG4gICAgICBzZXRGb3JtYXQocHJldmlvdXNWYWx1ZSk7XG4gICAgfVxuICB9LCBbc2V0Rm9ybWF0LCBzZXRWYWx1ZV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZGVxdWFsKHZhbHVlLCBwcmV2aW91c1ZhbHVlUmVmLmN1cnJlbnQpKSB7XG4gICAgICBzZXRGb3JtYXQodmFsdWUpO1xuICAgIH1cbiAgICBwcmV2aW91c1ZhbHVlUmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgfSwgW3ZhbHVlLCBzZXRGb3JtYXRdKTtcbiAgcmV0dXJuIHtcbiAgICBkaXNwbGF5VmFsdWUsXG4gICAgb25DaGFuZ2U6IHNldERpc3BsYXlWYWx1ZSxcbiAgICBvblVwZGF0ZVxuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VEcmFnKGhhbmRsZXIsIGNvbmZpZykge1xuICBjb25zdCB7XG4gICAgZW1pdE9uRWRpdFN0YXJ0LFxuICAgIGVtaXRPbkVkaXRFbmRcbiAgfSA9IHVzZUlucHV0Q29udGV4dCgpO1xuICByZXR1cm4gdXNlRHJhZyQxKHN0YXRlID0+IHtcbiAgICBpZiAoc3RhdGUuZmlyc3QpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbGV2YV9fcGFuZWxfX2RyYWdnZWQnKTtcbiAgICAgIGVtaXRPbkVkaXRTdGFydCA9PT0gbnVsbCB8fCBlbWl0T25FZGl0U3RhcnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVtaXRPbkVkaXRTdGFydCgpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBoYW5kbGVyKHN0YXRlKTtcbiAgICBpZiAoc3RhdGUubGFzdCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdsZXZhX19wYW5lbF9fZHJhZ2dlZCcpO1xuICAgICAgZW1pdE9uRWRpdEVuZCA9PT0gbnVsbCB8fCBlbWl0T25FZGl0RW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbWl0T25FZGl0RW5kKCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sIGNvbmZpZyk7XG59XG5cbmZ1bmN0aW9uIHVzZUNhbnZhczJkKGZuKSB7XG4gIGNvbnN0IGNhbnZhcyA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgY3R4ID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBoYXNGaXJlZCA9IHVzZVJlZihmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVDYW52YXMgPSBkZWJvdW5jZSgoKSA9PiB7XG4gICAgICBjYW52YXMuY3VycmVudC53aWR0aCA9IGNhbnZhcy5jdXJyZW50Lm9mZnNldFdpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICBjYW52YXMuY3VycmVudC5oZWlnaHQgPSBjYW52YXMuY3VycmVudC5vZmZzZXRIZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgIGZuKGNhbnZhcy5jdXJyZW50LCBjdHguY3VycmVudCk7XG4gICAgfSwgMjUwKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlQ2FudmFzKTtcbiAgICBpZiAoIWhhc0ZpcmVkLmN1cnJlbnQpIHtcbiAgICAgIGhhbmRsZUNhbnZhcygpO1xuICAgICAgaGFzRmlyZWQuY3VycmVudCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlQ2FudmFzKTtcbiAgfSwgW2ZuXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY3R4LmN1cnJlbnQgPSBjYW52YXMuY3VycmVudC5nZXRDb250ZXh0KCcyZCcpO1xuICB9LCBbXSk7XG4gIHJldHVybiBbY2FudmFzLCBjdHhdO1xufVxuXG5mdW5jdGlvbiB1c2VUcmFuc2Zvcm0oKSB7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgbG9jYWwgPSB1c2VSZWYoe1xuICAgIHg6IDAsXG4gICAgeTogMFxuICB9KTtcbiAgY29uc3Qgc2V0ID0gdXNlQ2FsbGJhY2socG9pbnQgPT4ge1xuICAgIE9iamVjdC5hc3NpZ24obG9jYWwuY3VycmVudCwgcG9pbnQpO1xuICAgIGlmIChyZWYuY3VycmVudCkgcmVmLmN1cnJlbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7bG9jYWwuY3VycmVudC54fXB4LCAke2xvY2FsLmN1cnJlbnQueX1weCwgMClgO1xuICB9LCBbXSk7XG4gIHJldHVybiBbcmVmLCBzZXRdO1xufVxuXG5jb25zdCBfZXhjbHVkZWQkMyA9IFtcIl9fcmVmQ291bnRcIl07XG5jb25zdCBnZXRJbnB1dEF0UGF0aCA9IChkYXRhLCBwYXRoKSA9PiB7XG4gIGlmICghZGF0YVtwYXRoXSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IF9kYXRhJHBhdGggPSBkYXRhW3BhdGhdLFxuICAgIGlucHV0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9kYXRhJHBhdGgsIF9leGNsdWRlZCQzKTtcbiAgcmV0dXJuIGlucHV0O1xufTtcbmZ1bmN0aW9uIHVzZUlucHV0KHBhdGgpIHtcbiAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZUNvbnRleHQoKTtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZShnZXRJbnB1dEF0UGF0aChzdG9yZS5nZXREYXRhKCksIHBhdGgpKTtcbiAgY29uc3Qgc2V0ID0gdXNlQ2FsbGJhY2sodmFsdWUgPT4gc3RvcmUuc2V0VmFsdWVBdFBhdGgocGF0aCwgdmFsdWUsIHRydWUpLCBbcGF0aCwgc3RvcmVdKTtcbiAgY29uc3Qgc2V0U2V0dGluZ3MgPSB1c2VDYWxsYmFjayhzZXR0aW5ncyA9PiBzdG9yZS5zZXRTZXR0aW5nc0F0UGF0aChwYXRoLCBzZXR0aW5ncyksIFtwYXRoLCBzdG9yZV0pO1xuICBjb25zdCBkaXNhYmxlID0gdXNlQ2FsbGJhY2soZmxhZyA9PiBzdG9yZS5kaXNhYmxlSW5wdXRBdFBhdGgocGF0aCwgZmxhZyksIFtwYXRoLCBzdG9yZV0pO1xuICBjb25zdCBlbWl0T25FZGl0U3RhcnQgPSB1c2VDYWxsYmFjaygoKSA9PiBzdG9yZS5lbWl0T25FZGl0U3RhcnQocGF0aCksIFtwYXRoLCBzdG9yZV0pO1xuICBjb25zdCBlbWl0T25FZGl0RW5kID0gdXNlQ2FsbGJhY2soKCkgPT4gc3RvcmUuZW1pdE9uRWRpdEVuZChwYXRoKSwgW3BhdGgsIHN0b3JlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0U3RhdGUoZ2V0SW5wdXRBdFBhdGgoc3RvcmUuZ2V0RGF0YSgpLCBwYXRoKSk7XG4gICAgY29uc3QgdW5zdWIgPSBzdG9yZS51c2VTdG9yZS5zdWJzY3JpYmUocyA9PiBnZXRJbnB1dEF0UGF0aChzLmRhdGEsIHBhdGgpLCBzZXRTdGF0ZSwge1xuICAgICAgZXF1YWxpdHlGbjogc2hhbGxvd1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB1bnN1YigpO1xuICB9LCBbc3RvcmUsIHBhdGhdKTtcbiAgcmV0dXJuIFtzdGF0ZSwge1xuICAgIHNldCxcbiAgICBzZXRTZXR0aW5ncyxcbiAgICBkaXNhYmxlLFxuICAgIHN0b3JlSWQ6IHN0b3JlLnN0b3JlSWQsXG4gICAgZW1pdE9uRWRpdFN0YXJ0LFxuICAgIGVtaXRPbkVkaXRFbmRcbiAgfV07XG59XG5cbmNvbnN0IFJhbmdlR3JpZCA9IHN0eWxlZCgnZGl2Jywge1xuICB2YXJpYW50czoge1xuICAgIGhhc1JhbmdlOiB7XG4gICAgICB0cnVlOiB7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICBkaXNwbGF5OiAnZ3JpZCcsXG4gICAgICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICdhdXRvICRzaXplcyRudW1iZXJJbnB1dE1pbldpZHRoJyxcbiAgICAgICAgY29sdW1uR2FwOiAnJGNvbEdhcCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInXG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuY29uc3QgUmFuZ2UgPSBzdHlsZWQoJ2RpdicsIHtcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gIHdpZHRoOiAnMTAwJScsXG4gIGhlaWdodDogMixcbiAgYm9yZGVyUmFkaXVzOiAnJHhzJyxcbiAgYmFja2dyb3VuZENvbG9yOiAnJGVsZXZhdGlvbjEnXG59KTtcbmNvbnN0IFNjcnViYmVyID0gc3R5bGVkKCdkaXYnLCB7XG4gIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICB3aWR0aDogJyRzY3J1YmJlcldpZHRoJyxcbiAgaGVpZ2h0OiAnJHNjcnViYmVySGVpZ2h0JyxcbiAgYm9yZGVyUmFkaXVzOiAnJHhzJyxcbiAgYm94U2hhZG93OiAnMCAwIDAgMnB4ICRjb2xvcnMkZWxldmF0aW9uMicsXG4gIGJhY2tncm91bmRDb2xvcjogJyRhY2NlbnQyJyxcbiAgY3Vyc29yOiAncG9pbnRlcicsXG4gICRhY3RpdmU6ICdub25lICRhY2NlbnQxJyxcbiAgJGhvdmVyOiAnbm9uZSAkYWNjZW50MycsXG4gIHZhcmlhbnRzOiB7XG4gICAgcG9zaXRpb246IHtcbiAgICAgIGxlZnQ6IHtcbiAgICAgICAgYm9yZGVyVG9wUmlnaHRSYWRpdXM6IDAsXG4gICAgICAgIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzOiAwLFxuICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKGNhbGMoLTAuNSAqICgkc2l6ZXMkc2NydWJiZXJXaWR0aCArIDRweCkpKSdcbiAgICAgIH0sXG4gICAgICByaWdodDoge1xuICAgICAgICBib3JkZXJUb3BMZWZ0UmFkaXVzOiAwLFxuICAgICAgICBib3JkZXJCb3R0b21MZWZ0UmFkaXVzOiAwLFxuICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKGNhbGMoMC41ICogKCRzaXplcyRzY3J1YmJlcldpZHRoICsgNHB4KSkpJ1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5jb25zdCBSYW5nZVdyYXBwZXIgPSBzdHlsZWQoJ2RpdicsIHtcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICRmbGV4OiAnJyxcbiAgaGVpZ2h0OiAnMTAwJScsXG4gIGN1cnNvcjogJ3BvaW50ZXInLFxuICB0b3VjaEFjdGlvbjogJ25vbmUnXG59KTtcbmNvbnN0IEluZGljYXRvciA9IHN0eWxlZCgnZGl2Jywge1xuICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgaGVpZ2h0OiAnMTAwJScsXG4gIGJhY2tncm91bmRDb2xvcjogJyRhY2NlbnQyJ1xufSk7XG5cbmZ1bmN0aW9uIFJhbmdlU2xpZGVyKHtcbiAgdmFsdWUsXG4gIG1pbixcbiAgbWF4LFxuICBvbkRyYWcsXG4gIHN0ZXAsXG4gIGluaXRpYWxWYWx1ZVxufSkge1xuICBjb25zdCByZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHNjcnViYmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCByYW5nZVdpZHRoID0gdXNlUmVmKDApO1xuICBjb25zdCBzY3J1YmJlcldpZHRoID0gdXNlVGgoJ3NpemVzJywgJ3NjcnViYmVyV2lkdGgnKTtcbiAgY29uc3QgYmluZCA9IHVzZURyYWcoKHtcbiAgICBldmVudCxcbiAgICBmaXJzdCxcbiAgICB4eTogW3hdLFxuICAgIG1vdmVtZW50OiBbbXhdLFxuICAgIG1lbW9cbiAgfSkgPT4ge1xuICAgIGlmIChmaXJzdCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICB3aWR0aCxcbiAgICAgICAgbGVmdFxuICAgICAgfSA9IHJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgcmFuZ2VXaWR0aC5jdXJyZW50ID0gd2lkdGggLSBwYXJzZUZsb2F0KHNjcnViYmVyV2lkdGgpO1xuICAgICAgY29uc3QgdGFyZ2V0SXNTY3J1YiA9IChldmVudCA9PT0gbnVsbCB8fCBldmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXZlbnQudGFyZ2V0KSA9PT0gc2NydWJiZXJSZWYuY3VycmVudDtcbiAgICAgIG1lbW8gPSB0YXJnZXRJc1NjcnViID8gdmFsdWUgOiBpbnZlcnRlZFJhbmdlKCh4IC0gbGVmdCkgLyB3aWR0aCwgbWluLCBtYXgpO1xuICAgIH1cbiAgICBjb25zdCBuZXdWYWx1ZSA9IG1lbW8gKyBpbnZlcnRlZFJhbmdlKG14IC8gcmFuZ2VXaWR0aC5jdXJyZW50LCAwLCBtYXggLSBtaW4pO1xuICAgIG9uRHJhZyhzYW5pdGl6ZVN0ZXAkMShuZXdWYWx1ZSwge1xuICAgICAgc3RlcCxcbiAgICAgIGluaXRpYWxWYWx1ZVxuICAgIH0pKTtcbiAgICByZXR1cm4gbWVtbztcbiAgfSk7XG4gIGNvbnN0IHBvcyA9IHJhbmdlKHZhbHVlLCBtaW4sIG1heCk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJhbmdlV3JhcHBlciwgX2V4dGVuZHMoe1xuICAgIHJlZjogcmVmXG4gIH0sIGJpbmQoKSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmFuZ2UsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5kaWNhdG9yLCB7XG4gICAgc3R5bGU6IHtcbiAgICAgIGxlZnQ6IDAsXG4gICAgICByaWdodDogYCR7KDEgLSBwb3MpICogMTAwfSVgXG4gICAgfVxuICB9KSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2NydWJiZXIsIHtcbiAgICByZWY6IHNjcnViYmVyUmVmLFxuICAgIHN0eWxlOiB7XG4gICAgICBsZWZ0OiBgY2FsYygke3Bvc30gKiAoMTAwJSAtICR7c2NydWJiZXJXaWR0aH0pKWBcbiAgICB9XG4gIH0pKTtcbn1cblxuY29uc3QgRHJhZ2dhYmxlTGFiZWwgPSBSZWFjdC5tZW1vKCh7XG4gIGxhYmVsLFxuICBvblVwZGF0ZSxcbiAgc3RlcCxcbiAgaW5uZXJMYWJlbFRyaW1cbn0pID0+IHtcbiAgY29uc3QgW2RyYWdnaW5nLCBzZXREcmFnZ2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGJpbmQgPSB1c2VEcmFnKCh7XG4gICAgYWN0aXZlLFxuICAgIGRlbHRhOiBbZHhdLFxuICAgIGV2ZW50LFxuICAgIG1lbW86IF9tZW1vID0gMFxuICB9KSA9PiB7XG4gICAgc2V0RHJhZ2dpbmcoYWN0aXZlKTtcbiAgICBfbWVtbyArPSBkeCAvIDI7XG4gICAgaWYgKE1hdGguYWJzKF9tZW1vKSA+PSAxKSB7XG4gICAgICBvblVwZGF0ZSh2ID0+IHBhcnNlRmxvYXQodikgKyBNYXRoLmZsb29yKF9tZW1vKSAqIHN0ZXAgKiBtdWx0aXBseVN0ZXAoZXZlbnQpKTtcbiAgICAgIF9tZW1vID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIF9tZW1vO1xuICB9KTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5uZXJOdW1iZXJMYWJlbCwgX2V4dGVuZHMoe1xuICAgIGRyYWdnaW5nOiBkcmFnZ2luZyxcbiAgICB0aXRsZTogbGFiZWwubGVuZ3RoID4gMSA/IGxhYmVsIDogJydcbiAgfSwgYmluZCgpKSwgbGFiZWwuc2xpY2UoMCwgaW5uZXJMYWJlbFRyaW0pKTtcbn0pO1xuZnVuY3Rpb24gTnVtYmVyJDEoe1xuICBsYWJlbCxcbiAgaWQsXG4gIGRpc3BsYXlWYWx1ZSxcbiAgb25VcGRhdGUsXG4gIG9uQ2hhbmdlLFxuICBzZXR0aW5ncyxcbiAgaW5uZXJMYWJlbFRyaW0gPSAxXG59KSB7XG4gIGNvbnN0IElubmVyTGFiZWwgPSBpbm5lckxhYmVsVHJpbSA+IDAgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChEcmFnZ2FibGVMYWJlbCwge1xuICAgIGxhYmVsOiBsYWJlbCxcbiAgICBzdGVwOiBzZXR0aW5ncy5zdGVwLFxuICAgIG9uVXBkYXRlOiBvblVwZGF0ZSxcbiAgICBpbm5lckxhYmVsVHJpbTogaW5uZXJMYWJlbFRyaW1cbiAgfSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KE51bWJlcklucHV0LCB7XG4gICAgaWQ6IGlkLFxuICAgIHZhbHVlOiBTdHJpbmcoZGlzcGxheVZhbHVlKSxcbiAgICBvblVwZGF0ZTogb25VcGRhdGUsXG4gICAgb25DaGFuZ2U6IG9uQ2hhbmdlLFxuICAgIGlubmVyTGFiZWw6IElubmVyTGFiZWxcbiAgfSk7XG59XG5mdW5jdGlvbiBOdW1iZXJDb21wb25lbnQoKSB7XG4gIGNvbnN0IHByb3BzID0gdXNlSW5wdXRDb250ZXh0KCk7XG4gIGNvbnN0IHtcbiAgICBsYWJlbCxcbiAgICB2YWx1ZSxcbiAgICBvblVwZGF0ZSxcbiAgICBzZXR0aW5ncyxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBtaW4sXG4gICAgbWF4XG4gIH0gPSBzZXR0aW5ncztcbiAgY29uc3QgaGFzUmFuZ2UgPSBtYXggIT09IEluZmluaXR5ICYmIG1pbiAhPT0gLUluZmluaXR5O1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3csIHtcbiAgICBpbnB1dDogdHJ1ZVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KExhYmVsLCBudWxsLCBsYWJlbCksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmFuZ2VHcmlkLCB7XG4gICAgaGFzUmFuZ2U6IGhhc1JhbmdlXG4gIH0sIGhhc1JhbmdlICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmFuZ2VTbGlkZXIsIF9leHRlbmRzKHtcbiAgICB2YWx1ZTogcGFyc2VGbG9hdCh2YWx1ZSksXG4gICAgb25EcmFnOiBvblVwZGF0ZVxuICB9LCBzZXR0aW5ncykpLCBSZWFjdC5jcmVhdGVFbGVtZW50KE51bWJlciQxLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICBpZDogaWQsXG4gICAgbGFiZWw6IFwidmFsdWVcIixcbiAgICBpbm5lckxhYmVsVHJpbTogaGFzUmFuZ2UgPyAwIDogMVxuICB9KSkpKTtcbn1cblxuY29uc3Qge1xuICAgIHNhbml0aXplU3RlcFxuICB9ID0gcHJvcHMkMyxcbiAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcyQzLCBbXCJzYW5pdGl6ZVN0ZXBcIl0pO1xudmFyIG51bWJlciA9IGNyZWF0ZUludGVybmFsUGx1Z2luKF9vYmplY3RTcHJlYWQyKHtcbiAgY29tcG9uZW50OiBOdW1iZXJDb21wb25lbnRcbn0sIHJlc3QpKTtcblxuY29uc3Qgc2NoZW1hJDIgPSAoX28sIHMpID0+IHY4bigpLnNjaGVtYSh7XG4gIG9wdGlvbnM6IHY4bigpLnBhc3Nlc0FueU9mKHY4bigpLm9iamVjdCgpLCB2OG4oKS5hcnJheSgpKVxufSkudGVzdChzKTtcbmNvbnN0IHNhbml0aXplJDIgPSAodmFsdWUsIHtcbiAgdmFsdWVzXG59KSA9PiB7XG4gIGlmICh2YWx1ZXMuaW5kZXhPZih2YWx1ZSkgPCAwKSB0aHJvdyBFcnJvcihgU2VsZWN0ZWQgdmFsdWUgZG9lc24ndCBtYXRjaCBTZWxlY3Qgb3B0aW9uc2ApO1xuICByZXR1cm4gdmFsdWU7XG59O1xuY29uc3QgZm9ybWF0ID0gKHZhbHVlLCB7XG4gIHZhbHVlc1xufSkgPT4ge1xuICByZXR1cm4gdmFsdWVzLmluZGV4T2YodmFsdWUpO1xufTtcbmNvbnN0IG5vcm1hbGl6ZSQxID0gaW5wdXQgPT4ge1xuICBsZXQge1xuICAgIHZhbHVlLFxuICAgIG9wdGlvbnNcbiAgfSA9IGlucHV0O1xuICBsZXQga2V5cztcbiAgbGV0IHZhbHVlcztcbiAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHtcbiAgICB2YWx1ZXMgPSBvcHRpb25zO1xuICAgIGtleXMgPSBvcHRpb25zLm1hcChvID0+IFN0cmluZyhvKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFsdWVzID0gT2JqZWN0LnZhbHVlcyhvcHRpb25zKTtcbiAgICBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gIH1cbiAgaWYgKCEoJ3ZhbHVlJyBpbiBpbnB1dCkpIHZhbHVlID0gdmFsdWVzWzBdO2Vsc2UgaWYgKCF2YWx1ZXMuaW5jbHVkZXModmFsdWUpKSB7XG4gICAga2V5cy51bnNoaWZ0KFN0cmluZyh2YWx1ZSkpO1xuICAgIHZhbHVlcy51bnNoaWZ0KHZhbHVlKTtcbiAgfVxuICBpZiAoIU9iamVjdC52YWx1ZXMob3B0aW9ucykuaW5jbHVkZXModmFsdWUpKSBvcHRpb25zW1N0cmluZyh2YWx1ZSldID0gdmFsdWU7XG4gIHJldHVybiB7XG4gICAgdmFsdWUsXG4gICAgc2V0dGluZ3M6IHtcbiAgICAgIGtleXMsXG4gICAgICB2YWx1ZXNcbiAgICB9XG4gIH07XG59O1xuXG52YXIgcHJvcHMkMiA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBzY2hlbWE6IHNjaGVtYSQyLFxuICBzYW5pdGl6ZTogc2FuaXRpemUkMixcbiAgZm9ybWF0OiBmb3JtYXQsXG4gIG5vcm1hbGl6ZTogbm9ybWFsaXplJDFcbn0pO1xuXG5jb25zdCBTZWxlY3RDb250YWluZXIgPSBzdHlsZWQoJ2RpdicsIHtcbiAgJGZsZXhDZW50ZXI6ICcnLFxuICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgJz4gc3ZnJzoge1xuICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICByaWdodDogJyRtZCdcbiAgfVxufSk7XG5jb25zdCBOYXRpdmVTZWxlY3QgPSBzdHlsZWQoJ3NlbGVjdCcsIHtcbiAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIHRvcDogMCxcbiAgbGVmdDogMCxcbiAgd2lkdGg6ICcxMDAlJyxcbiAgaGVpZ2h0OiAnMTAwJScsXG4gIG9wYWNpdHk6IDBcbn0pO1xuY29uc3QgUHJlc2VudGF0aW9uYWxTZWxlY3QgPSBzdHlsZWQoJ2RpdicsIHtcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgd2lkdGg6ICcxMDAlJyxcbiAgaGVpZ2h0OiAnJHJvd0hlaWdodCcsXG4gIGJhY2tncm91bmRDb2xvcjogJyRlbGV2YXRpb24zJyxcbiAgYm9yZGVyUmFkaXVzOiAnJHNtJyxcbiAgcGFkZGluZzogJzAgJHNtJyxcbiAgY3Vyc29yOiAncG9pbnRlcicsXG4gIFtgJHtOYXRpdmVTZWxlY3R9OmZvY3VzICsgJmBdOiB7XG4gICAgJGZvY3VzU3R5bGU6ICcnXG4gIH0sXG4gIFtgJHtOYXRpdmVTZWxlY3R9OmhvdmVyICsgJmBdOiB7XG4gICAgJGhvdmVyU3R5bGU6ICcnXG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBTZWxlY3Qoe1xuICBkaXNwbGF5VmFsdWUsXG4gIHZhbHVlLFxuICBvblVwZGF0ZSxcbiAgaWQsXG4gIHNldHRpbmdzLFxuICBkaXNhYmxlZFxufSkge1xuICBjb25zdCB7XG4gICAga2V5cyxcbiAgICB2YWx1ZXNcbiAgfSA9IHNldHRpbmdzO1xuICBjb25zdCBsYXN0RGlzcGxheWVkVmFsdWUgPSB1c2VSZWYoKTtcblxuICBpZiAodmFsdWUgPT09IHZhbHVlc1tkaXNwbGF5VmFsdWVdKSB7XG4gICAgbGFzdERpc3BsYXllZFZhbHVlLmN1cnJlbnQgPSBrZXlzW2Rpc3BsYXlWYWx1ZV07XG4gIH1cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0Q29udGFpbmVyLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KE5hdGl2ZVNlbGVjdCwge1xuICAgIGlkOiBpZCxcbiAgICB2YWx1ZTogZGlzcGxheVZhbHVlLFxuICAgIG9uQ2hhbmdlOiBlID0+IG9uVXBkYXRlKHZhbHVlc1tOdW1iZXIoZS5jdXJyZW50VGFyZ2V0LnZhbHVlKV0pLFxuICAgIGRpc2FibGVkOiBkaXNhYmxlZFxuICB9LCBrZXlzLm1hcCgoa2V5LCBpbmRleCkgPT4gUmVhY3QuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiLCB7XG4gICAga2V5OiBrZXksXG4gICAgdmFsdWU6IGluZGV4XG4gIH0sIGtleSkpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChQcmVzZW50YXRpb25hbFNlbGVjdCwgbnVsbCwgbGFzdERpc3BsYXllZFZhbHVlLmN1cnJlbnQpLCBSZWFjdC5jcmVhdGVFbGVtZW50KENoZXZyb24sIHtcbiAgICB0b2dnbGVkOiB0cnVlXG4gIH0pKTtcbn1cbmZ1bmN0aW9uIFNlbGVjdENvbXBvbmVudCgpIHtcbiAgY29uc3Qge1xuICAgIGxhYmVsLFxuICAgIHZhbHVlLFxuICAgIGRpc3BsYXlWYWx1ZSxcbiAgICBvblVwZGF0ZSxcbiAgICBpZCxcbiAgICBkaXNhYmxlZCxcbiAgICBzZXR0aW5nc1xuICB9ID0gdXNlSW5wdXRDb250ZXh0KCk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdywge1xuICAgIGlucHV0OiB0cnVlXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGFiZWwsIG51bGwsIGxhYmVsKSwgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHtcbiAgICBpZDogaWQsXG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGRpc3BsYXlWYWx1ZTogZGlzcGxheVZhbHVlLFxuICAgIG9uVXBkYXRlOiBvblVwZGF0ZSxcbiAgICBzZXR0aW5nczogc2V0dGluZ3MsXG4gICAgZGlzYWJsZWQ6IGRpc2FibGVkXG4gIH0pKTtcbn1cblxudmFyIHNlbGVjdCA9IGNyZWF0ZUludGVybmFsUGx1Z2luKF9vYmplY3RTcHJlYWQyKHtcbiAgY29tcG9uZW50OiBTZWxlY3RDb21wb25lbnRcbn0sIHByb3BzJDIpKTtcblxuY29uc3Qgc2NoZW1hJDEgPSBvID0+IHY4bigpLnN0cmluZygpLnRlc3Qobyk7XG5jb25zdCBzYW5pdGl6ZSQxID0gdiA9PiB7XG4gIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHRocm93IEVycm9yKGBJbnZhbGlkIHN0cmluZ2ApO1xuICByZXR1cm4gdjtcbn07XG5jb25zdCBub3JtYWxpemUgPSAoe1xuICB2YWx1ZSxcbiAgZWRpdGFibGU6IF9lZGl0YWJsZSA9IHRydWUsXG4gIHJvd3M6IF9yb3dzID0gZmFsc2Vcbn0pID0+IHtcbiAgcmV0dXJuIHtcbiAgICB2YWx1ZSxcbiAgICBzZXR0aW5nczoge1xuICAgICAgZWRpdGFibGU6IF9lZGl0YWJsZSxcbiAgICAgIHJvd3M6IHR5cGVvZiBfcm93cyA9PT0gJ251bWJlcicgPyBfcm93cyA6IF9yb3dzID8gNSA6IDBcbiAgICB9XG4gIH07XG59O1xuXG52YXIgcHJvcHMkMSA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBzY2hlbWE6IHNjaGVtYSQxLFxuICBzYW5pdGl6ZTogc2FuaXRpemUkMSxcbiAgbm9ybWFsaXplOiBub3JtYWxpemVcbn0pO1xuXG5jb25zdCBfZXhjbHVkZWQkMiA9IFtcImRpc3BsYXlWYWx1ZVwiLCBcIm9uVXBkYXRlXCIsIFwib25DaGFuZ2VcIiwgXCJlZGl0YWJsZVwiXTtcbmNvbnN0IE5vbkVkaXRhYmxlU3RyaW5nID0gc3R5bGVkKCdkaXYnLCB7XG4gIHdoaXRlU3BhY2U6ICdwcmUtd3JhcCdcbn0pO1xuZnVuY3Rpb24gU3RyaW5nJDEoX3JlZikge1xuICBsZXQge1xuICAgICAgZGlzcGxheVZhbHVlLFxuICAgICAgb25VcGRhdGUsXG4gICAgICBvbkNoYW5nZSxcbiAgICAgIGVkaXRhYmxlID0gdHJ1ZVxuICAgIH0gPSBfcmVmLFxuICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIF9leGNsdWRlZCQyKTtcbiAgaWYgKGVkaXRhYmxlKSByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChWYWx1ZUlucHV0LCBfZXh0ZW5kcyh7XG4gICAgdmFsdWU6IGRpc3BsYXlWYWx1ZSxcbiAgICBvblVwZGF0ZTogb25VcGRhdGUsXG4gICAgb25DaGFuZ2U6IG9uQ2hhbmdlXG4gIH0sIHByb3BzKSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KE5vbkVkaXRhYmxlU3RyaW5nLCBudWxsLCBkaXNwbGF5VmFsdWUpO1xufVxuZnVuY3Rpb24gU3RyaW5nQ29tcG9uZW50KCkge1xuICBjb25zdCB7XG4gICAgbGFiZWwsXG4gICAgc2V0dGluZ3MsXG4gICAgZGlzcGxheVZhbHVlLFxuICAgIG9uVXBkYXRlLFxuICAgIG9uQ2hhbmdlXG4gIH0gPSB1c2VJbnB1dENvbnRleHQoKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93LCB7XG4gICAgaW5wdXQ6IHRydWVcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChMYWJlbCwgbnVsbCwgbGFiZWwpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFN0cmluZyQxLCBfZXh0ZW5kcyh7XG4gICAgZGlzcGxheVZhbHVlOiBkaXNwbGF5VmFsdWUsXG4gICAgb25VcGRhdGU6IG9uVXBkYXRlLFxuICAgIG9uQ2hhbmdlOiBvbkNoYW5nZVxuICB9LCBzZXR0aW5ncykpKTtcbn1cblxudmFyIHN0cmluZyA9IGNyZWF0ZUludGVybmFsUGx1Z2luKF9vYmplY3RTcHJlYWQyKHtcbiAgY29tcG9uZW50OiBTdHJpbmdDb21wb25lbnRcbn0sIHByb3BzJDEpKTtcblxuY29uc3Qgc2NoZW1hID0gbyA9PiB2OG4oKS5ib29sZWFuKCkudGVzdChvKTtcbmNvbnN0IHNhbml0aXplID0gdiA9PiB7XG4gIGlmICh0eXBlb2YgdiAhPT0gJ2Jvb2xlYW4nKSB0aHJvdyBFcnJvcignSW52YWxpZCBib29sZWFuJyk7XG4gIHJldHVybiB2O1xufTtcblxudmFyIHByb3BzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIHNjaGVtYTogc2NoZW1hLFxuICBzYW5pdGl6ZTogc2FuaXRpemVcbn0pO1xuXG5jb25zdCBTdHlsZWRJbnB1dFdyYXBwZXIgPSBzdHlsZWQoJ2RpdicsIHtcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICRmbGV4OiAnJyxcbiAgaGVpZ2h0OiAnJHJvd0hlaWdodCcsXG4gIGlucHV0OiB7XG4gICAgJHJlc2V0OiAnJyxcbiAgICBoZWlnaHQ6IDAsXG4gICAgd2lkdGg6IDAsXG4gICAgb3BhY2l0eTogMCxcbiAgICBtYXJnaW46IDBcbiAgfSxcbiAgbGFiZWw6IHtcbiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAkZmxleENlbnRlcjogJycsXG4gICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgIGhlaWdodDogJyRjaGVja2JveFNpemUnLFxuICAgIHdpZHRoOiAnJGNoZWNrYm94U2l6ZScsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnJGVsZXZhdGlvbjMnLFxuICAgIGJvcmRlclJhZGl1czogJyRzbScsXG4gICAgJGhvdmVyOiAnJ1xuICB9LFxuICAnaW5wdXQ6Zm9jdXMgKyBsYWJlbCc6IHtcbiAgICAkZm9jdXNTdHlsZTogJydcbiAgfSxcbiAgJ2lucHV0OmZvY3VzOmNoZWNrZWQgKyBsYWJlbCwgaW5wdXQ6Y2hlY2tlZCArIGxhYmVsOmhvdmVyJzoge1xuICAgICRob3ZlclN0eWxlOiAnJGFjY2VudDMnXG4gIH0sXG4gICdpbnB1dCArIGxhYmVsOmFjdGl2ZSc6IHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICckYWNjZW50MSdcbiAgfSxcbiAgJ2lucHV0OmNoZWNrZWQgKyBsYWJlbDphY3RpdmUnOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiAnJGFjY2VudDEnXG4gIH0sXG4gICdsYWJlbCA+IHN2Zyc6IHtcbiAgICBkaXNwbGF5OiAnbm9uZScsXG4gICAgd2lkdGg6ICc5MCUnLFxuICAgIGhlaWdodDogJzkwJScsXG4gICAgc3Ryb2tlOiAnJGhpZ2hsaWdodDMnXG4gIH0sXG4gICdpbnB1dDpjaGVja2VkICsgbGFiZWwnOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiAnJGFjY2VudDInXG4gIH0sXG4gICdpbnB1dDpjaGVja2VkICsgbGFiZWwgPiBzdmcnOiB7XG4gICAgZGlzcGxheTogJ2Jsb2NrJ1xuICB9XG59KTtcblxuZnVuY3Rpb24gQm9vbGVhbih7XG4gIHZhbHVlLFxuICBvblVwZGF0ZSxcbiAgaWQsXG4gIGRpc2FibGVkXG59KSB7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZElucHV0V3JhcHBlciwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICBpZDogaWQsXG4gICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgIGNoZWNrZWQ6IHZhbHVlLFxuICAgIG9uQ2hhbmdlOiBlID0+IG9uVXBkYXRlKGUuY3VycmVudFRhcmdldC5jaGVja2VkKSxcbiAgICBkaXNhYmxlZDogZGlzYWJsZWRcbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XG4gICAgaHRtbEZvcjogaWRcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7XG4gICAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgICBmaWxsOiBcIm5vbmVcIixcbiAgICB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsXG4gICAgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIixcbiAgICBzdHJva2VXaWR0aDogMixcbiAgICBkOiBcIk01IDEzbDQgNEwxOSA3XCJcbiAgfSkpKSk7XG59XG5mdW5jdGlvbiBCb29sZWFuQ29tcG9uZW50KCkge1xuICBjb25zdCB7XG4gICAgbGFiZWwsXG4gICAgdmFsdWUsXG4gICAgb25VcGRhdGUsXG4gICAgZGlzYWJsZWQsXG4gICAgaWRcbiAgfSA9IHVzZUlucHV0Q29udGV4dCgpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3csIHtcbiAgICBpbnB1dDogdHJ1ZVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KExhYmVsLCBudWxsLCBsYWJlbCksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQm9vbGVhbiwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBvblVwZGF0ZTogb25VcGRhdGUsXG4gICAgaWQ6IGlkLFxuICAgIGRpc2FibGVkOiBkaXNhYmxlZFxuICB9KSk7XG59XG5cbnZhciBib29sZWFuID0gY3JlYXRlSW50ZXJuYWxQbHVnaW4oX29iamVjdFNwcmVhZDIoe1xuICBjb21wb25lbnQ6IEJvb2xlYW5Db21wb25lbnRcbn0sIHByb3BzKSk7XG5cbmNvbnN0IF9leGNsdWRlZCQxID0gW1wibG9ja2VkXCJdO1xuZnVuY3Rpb24gQ29vcmRpbmF0ZSh7XG4gIHZhbHVlLFxuICBpZCxcbiAgdmFsdWVLZXksXG4gIHNldHRpbmdzLFxuICBvblVwZGF0ZSxcbiAgaW5uZXJMYWJlbFRyaW1cbn0pIHtcblxuICBjb25zdCB2YWx1ZVJlZiA9IHVzZVJlZih2YWx1ZVt2YWx1ZUtleV0pO1xuICB2YWx1ZVJlZi5jdXJyZW50ID0gdmFsdWVbdmFsdWVLZXldO1xuICBjb25zdCBzZXRWYWx1ZSA9IHVzZUNhbGxiYWNrKG5ld1ZhbHVlID0+XG4gIG9uVXBkYXRlKHtcbiAgICBbdmFsdWVLZXldOiBzYW5pdGl6ZVZhbHVlKHtcbiAgICAgIHR5cGU6ICdOVU1CRVInLFxuICAgICAgdmFsdWU6IHZhbHVlUmVmLmN1cnJlbnQsXG4gICAgICBzZXR0aW5nc1xuICAgIH0sIG5ld1ZhbHVlKVxuICB9KSwgW29uVXBkYXRlLCBzZXR0aW5ncywgdmFsdWVLZXldKTtcbiAgY29uc3QgbnVtYmVyID0gdXNlSW5wdXRTZXR0ZXJzKHtcbiAgICB0eXBlOiAnTlVNQkVSJyxcbiAgICB2YWx1ZTogdmFsdWVbdmFsdWVLZXldLFxuICAgIHNldHRpbmdzLFxuICAgIHNldFZhbHVlXG4gIH0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChOdW1iZXIkMSwge1xuICAgIGlkOiBpZCxcbiAgICBsYWJlbDogdmFsdWVLZXksXG4gICAgdmFsdWU6IHZhbHVlW3ZhbHVlS2V5XSxcbiAgICBkaXNwbGF5VmFsdWU6IG51bWJlci5kaXNwbGF5VmFsdWUsXG4gICAgb25VcGRhdGU6IG51bWJlci5vblVwZGF0ZSxcbiAgICBvbkNoYW5nZTogbnVtYmVyLm9uQ2hhbmdlLFxuICAgIHNldHRpbmdzOiBzZXR0aW5ncyxcbiAgICBpbm5lckxhYmVsVHJpbTogaW5uZXJMYWJlbFRyaW1cbiAgfSk7XG59XG5jb25zdCBDb250YWluZXIgPSBzdHlsZWQoJ2RpdicsIHtcbiAgZGlzcGxheTogJ2dyaWQnLFxuICBjb2x1bW5HYXA6ICckY29sR2FwJyxcbiAgZ3JpZEF1dG9GbG93OiAnY29sdW1uIGRlbnNlJyxcbiAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIHZhcmlhbnRzOiB7XG4gICAgd2l0aExvY2s6IHtcbiAgICAgIHRydWU6IHtcbiAgICAgICAgZ3JpZFRlbXBsYXRlQ29sdW1uczogJzEwcHggYXV0bycsXG4gICAgICAgICc+IHN2Zyc6IHtcbiAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuZnVuY3Rpb24gTG9jayhfcmVmKSB7XG4gIGxldCB7XG4gICAgICBsb2NrZWRcbiAgICB9ID0gX3JlZixcbiAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQkMSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9leHRlbmRzKHtcbiAgICB3aWR0aDogXCIxMFwiLFxuICAgIGhlaWdodDogXCIxMFwiLFxuICAgIHZpZXdCb3g6IFwiMCAwIDE1IDE1XCIsXG4gICAgZmlsbDogXCJub25lXCIsXG4gICAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9LCBwcm9wcyksIGxvY2tlZCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk01IDQuNjM2MDFDNSAzLjc2MDMxIDUuMjQyMTkgMy4xMDU0IDUuNjQzMjMgMi42NzM1N0M2LjAzOTM0IDIuMjQ3MDUgNi42NDU4MiAxLjk3ODMgNy41MDE0IDEuOTc4M0M4LjM1NzQ1IDEuOTc4MyA4Ljk2MzA2IDIuMjQ2NTIgOS4zNTgyMyAyLjY3MjA4QzkuNzU4MzggMy4xMDI5OSAxMCAzLjc1NzA4IDEwIDQuNjMzMjVWNS45OTk5OUg1VjQuNjM2MDFaTTQgNS45OTk5OVY0LjYzNjAxQzQgMy41ODE0OCA0LjI5MzM5IDIuNjU3NTQgNC45MTA0OSAxLjk5MzA3QzUuNTMyNTIgMS4zMjMyOSA2LjQyNjc1IDAuOTc4MzAyIDcuNTAxNCAwLjk3ODMwMkM4LjU3NTgzIDAuOTc4MzAyIDkuNDY5NTIgMS4zMjIzMyAxMC4wOTEgMS45OTE2MkMxMC43MDc2IDIuNjU1NTcgMTEgMy41Nzg5NiAxMSA0LjYzMzI1VjUuOTk5OTlIMTJDMTIuNTUyMyA1Ljk5OTk5IDEzIDYuNDQ3NzEgMTMgNi45OTk5OVYxM0MxMyAxMy41NTIzIDEyLjU1MjMgMTQgMTIgMTRIM0MyLjQ0NzcyIDE0IDIgMTMuNTUyMyAyIDEzVjYuOTk5OTlDMiA2LjQ0NzcxIDIuNDQ3NzIgNS45OTk5OSAzIDUuOTk5OTlINFpNMyA2Ljk5OTk5SDEyVjEzSDNWNi45OTk5OVpcIixcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfSkgOiBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNOSAzLjYzNjAxQzkgMi43NjA0NCA5LjI0MjA3IDIuMTEyMTEgOS42NDE1NCAxLjY4NjIzQzEwLjAzNjYgMS4yNjUwMiAxMC42NDMyIDEgMTEuNTAxNCAxQzEyLjQ0ODUgMSAxMy4wODM5IDEuMzA1NTIgMTMuNDcyMiAxLjgwNjM2QzEzLjgwMzEgMi4yMzMxMiAxNCAyLjg0MzEzIDE0IDMuNjMzMjVIMTVDMTUgMi42ODI0MiAxNC43NjI2IDEuODM4NTYgMTQuMjYyNSAxLjE5MzYxQzEzLjYzODkgMC4zODk0MyAxMi42NzQzIDAgMTEuNTAxNCAwQzEwLjQyOTQgMCA5LjUzNTIzIDAuMzM3ODcxIDguOTEyMTggMS4wMDIxQzguMjkzNTEgMS42NjE2NyA4IDIuNTgxMzUgOCAzLjYzNjAxVjZIMUMwLjQ0NzcxNSA2IDAgNi40NDc3MiAwIDdWMTNDMCAxMy41NTIzIDAuNDQ3NzE1IDE0IDEgMTRIMTBDMTAuNTUyMyAxNCAxMSAxMy41NTIzIDExIDEzVjdDMTEgNi40NDc3MiAxMC41NTIzIDYgMTAgNkg5VjMuNjM2MDFaTTEgN0gxMFYxM0gxVjdaXCIsXG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH0pKTtcbn1cbmZ1bmN0aW9uIFZlY3Rvcih7XG4gIHZhbHVlLFxuICBvblVwZGF0ZSxcbiAgc2V0dGluZ3MsXG4gIGlubmVyTGFiZWxUcmltXG59KSB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBzZXRTZXR0aW5nc1xuICB9ID0gdXNlSW5wdXRDb250ZXh0KCk7XG5cbiAgY29uc3Qge1xuICAgIGxvY2ssXG4gICAgbG9ja2VkXG4gIH0gPSBzZXR0aW5ncztcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29udGFpbmVyLCB7XG4gICAgd2l0aExvY2s6IGxvY2tcbiAgfSwgbG9jayAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KExvY2ssIHtcbiAgICBsb2NrZWQ6IGxvY2tlZCxcbiAgICBvbkNsaWNrOiAoKSA9PiBzZXRTZXR0aW5ncyh7XG4gICAgICBsb2NrZWQ6ICFsb2NrZWRcbiAgICB9KVxuICB9KSwgT2JqZWN0LmtleXModmFsdWUpLm1hcCgoa2V5LCBpKSA9PiBSZWFjdC5jcmVhdGVFbGVtZW50KENvb3JkaW5hdGUsIHtcbiAgICBpZDogaSA9PT0gMCA/IGlkIDogYCR7aWR9LiR7a2V5fWAsXG4gICAga2V5OiBrZXksXG4gICAgdmFsdWVLZXk6IGtleSxcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgc2V0dGluZ3M6IHNldHRpbmdzW2tleV0sXG4gICAgb25VcGRhdGU6IG9uVXBkYXRlLFxuICAgIGlubmVyTGFiZWxUcmltOiBpbm5lckxhYmVsVHJpbVxuICB9KSkpO1xufVxuXG5jb25zdCBub3JtYWxpemVLZXllZE51bWJlclNldHRpbmdzID0gKHZhbHVlLCBzZXR0aW5ncykgPT4ge1xuICBjb25zdCBfc2V0dGluZ3MgPSB7fTtcbiAgbGV0IG1heFN0ZXAgPSAwO1xuICBsZXQgbWluUGFkID0gSW5maW5pdHk7XG4gIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5mb3JFYWNoKChba2V5LCB2XSkgPT4ge1xuICAgIF9zZXR0aW5nc1trZXldID0gbm9ybWFsaXplJDIoX29iamVjdFNwcmVhZDIoe1xuICAgICAgdmFsdWU6IHZcbiAgICB9LCBzZXR0aW5nc1trZXldKSkuc2V0dGluZ3M7XG4gICAgbWF4U3RlcCA9IE1hdGgubWF4KG1heFN0ZXAsIF9zZXR0aW5nc1trZXldLnN0ZXApO1xuICAgIG1pblBhZCA9IE1hdGgubWluKG1pblBhZCwgX3NldHRpbmdzW2tleV0ucGFkKTtcbiAgfSk7XG5cbiAgZm9yIChsZXQga2V5IGluIF9zZXR0aW5ncykge1xuICAgIGNvbnN0IHtcbiAgICAgIHN0ZXAsXG4gICAgICBtaW4sXG4gICAgICBtYXhcbiAgICB9ID0gc2V0dGluZ3Nba2V5XSB8fCB7fTtcbiAgICBpZiAoIWlzRmluaXRlKHN0ZXApICYmICghaXNGaW5pdGUobWluKSB8fCAhaXNGaW5pdGUobWF4KSkpIHtcbiAgICAgIF9zZXR0aW5nc1trZXldLnN0ZXAgPSBtYXhTdGVwO1xuICAgICAgX3NldHRpbmdzW2tleV0ucGFkID0gbWluUGFkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gX3NldHRpbmdzO1xufTtcblxuY29uc3QgX2V4Y2x1ZGVkID0gW1wibG9ja1wiXSxcbiAgX2V4Y2x1ZGVkMiA9IFtcInZhbHVlXCJdO1xuZnVuY3Rpb24gZ2V0VmVjdG9yU2NoZW1hKGRpbWVuc2lvbikge1xuICBjb25zdCBpc1ZlY3RvckFycmF5ID0gdjhuKCkuYXJyYXkoKS5sZW5ndGgoZGltZW5zaW9uKS5ldmVyeS5udW1iZXIoKTtcblxuICBjb25zdCBpc1ZlY3Rvck9iamVjdCA9IG8gPT4ge1xuICAgIGlmICghbyB8fCB0eXBlb2YgbyAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCB2YWx1ZXMgPSBPYmplY3QudmFsdWVzKG8pO1xuICAgIHJldHVybiB2YWx1ZXMubGVuZ3RoID09PSBkaW1lbnNpb24gJiYgdmFsdWVzLmV2ZXJ5KHYgPT4gaXNGaW5pdGUodikpO1xuICB9O1xuICByZXR1cm4gbyA9PiB7XG4gICAgcmV0dXJuIGlzVmVjdG9yQXJyYXkudGVzdChvKSB8fCBpc1ZlY3Rvck9iamVjdChvKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0VmVjdG9yVHlwZSh2YWx1ZSkge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyAnYXJyYXknIDogJ29iamVjdCc7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnQodmFsdWUsIGZvcm1hdCwga2V5cykge1xuICBpZiAoZ2V0VmVjdG9yVHlwZSh2YWx1ZSkgPT09IGZvcm1hdCkgcmV0dXJuIHZhbHVlO1xuICByZXR1cm4gZm9ybWF0ID09PSAnYXJyYXknID8gT2JqZWN0LnZhbHVlcyh2YWx1ZSkgOiBtYXBBcnJheVRvS2V5cyh2YWx1ZSwga2V5cyk7XG59XG5cbmNvbnN0IHNhbml0aXplVmVjdG9yID0gKHZhbHVlLCBzZXR0aW5ncywgcHJldmlvdXNWYWx1ZSkgPT4ge1xuICBjb25zdCBfdmFsdWUgPSBjb252ZXJ0KHZhbHVlLCAnb2JqZWN0Jywgc2V0dGluZ3Mua2V5cyk7XG4gIGZvciAobGV0IGtleSBpbiBfdmFsdWUpIF92YWx1ZVtrZXldID0gc2FuaXRpemUkMyhfdmFsdWVba2V5XSwgc2V0dGluZ3Nba2V5XSk7XG5cbiAgY29uc3QgX3ZhbHVlS2V5cyA9IE9iamVjdC5rZXlzKF92YWx1ZSk7XG4gIGxldCBuZXdWYWx1ZSA9IHt9O1xuXG4gIGlmIChfdmFsdWVLZXlzLmxlbmd0aCA9PT0gc2V0dGluZ3Mua2V5cy5sZW5ndGgpIG5ld1ZhbHVlID0gX3ZhbHVlO1xuICBlbHNlIHtcbiAgICBjb25zdCBfcHJldmlvdXNWYWx1ZSA9IGNvbnZlcnQocHJldmlvdXNWYWx1ZSwgJ29iamVjdCcsIHNldHRpbmdzLmtleXMpO1xuICAgIGlmIChfdmFsdWVLZXlzLmxlbmd0aCA9PT0gMSAmJiBzZXR0aW5ncy5sb2NrZWQpIHtcbiAgICAgIGNvbnN0IGxvY2tlZEtleSA9IF92YWx1ZUtleXNbMF07XG4gICAgICBjb25zdCBsb2NrZWRDb29yZGluYXRlID0gX3ZhbHVlW2xvY2tlZEtleV07XG4gICAgICBjb25zdCBwcmV2aW91c0xvY2tlZENvb3JkaW5hdGUgPSBfcHJldmlvdXNWYWx1ZVtsb2NrZWRLZXldO1xuICAgICAgY29uc3QgcmF0aW8gPSBwcmV2aW91c0xvY2tlZENvb3JkaW5hdGUgIT09IDAgPyBsb2NrZWRDb29yZGluYXRlIC8gcHJldmlvdXNMb2NrZWRDb29yZGluYXRlIDogMTtcbiAgICAgIGZvciAobGV0IGtleSBpbiBfcHJldmlvdXNWYWx1ZSkge1xuICAgICAgICBpZiAoa2V5ID09PSBsb2NrZWRLZXkpIG5ld1ZhbHVlW2xvY2tlZEtleV0gPSBsb2NrZWRDb29yZGluYXRlO1xuICAgICAgICBlbHNlIG5ld1ZhbHVlW2tleV0gPSBfcHJldmlvdXNWYWx1ZVtrZXldICogcmF0aW87XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld1ZhbHVlID0gX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIF9wcmV2aW91c1ZhbHVlKSwgX3ZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvbnZlcnQobmV3VmFsdWUsIHNldHRpbmdzLmZvcm1hdCwgc2V0dGluZ3Mua2V5cyk7XG59O1xuXG5jb25zdCBmb3JtYXRWZWN0b3IgPSAodmFsdWUsIHNldHRpbmdzKSA9PiBjb252ZXJ0KHZhbHVlLCAnb2JqZWN0Jywgc2V0dGluZ3Mua2V5cyk7XG5cbmNvbnN0IGlzTnVtYmVyU2V0dGluZ3MgPSBvID0+ICEhbyAmJiAoJ3N0ZXAnIGluIG8gfHwgJ21pbicgaW4gbyB8fCAnbWF4JyBpbiBvKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplVmVjdG9yKHZhbHVlLCBzZXR0aW5ncywgZGVmYXVsdEtleXMgPSBbXSkge1xuICBjb25zdCB7XG4gICAgICBsb2NrID0gZmFsc2VcbiAgICB9ID0gc2V0dGluZ3MsXG4gICAgX3NldHRpbmdzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNldHRpbmdzLCBfZXhjbHVkZWQpO1xuICBjb25zdCBmb3JtYXQgPSBBcnJheS5pc0FycmF5KHZhbHVlKSA/ICdhcnJheScgOiAnb2JqZWN0JztcbiAgY29uc3Qga2V5cyA9IGZvcm1hdCA9PT0gJ29iamVjdCcgPyBPYmplY3Qua2V5cyh2YWx1ZSkgOiBkZWZhdWx0S2V5cztcbiAgY29uc3QgX3ZhbHVlID0gY29udmVydCh2YWx1ZSwgJ29iamVjdCcsIGtleXMpO1xuXG4gIGNvbnN0IG1lcmdlZFNldHRpbmdzID0gaXNOdW1iZXJTZXR0aW5ncyhfc2V0dGluZ3MpID8ga2V5cy5yZWR1Y2UoKGFjYywgaykgPT4gT2JqZWN0LmFzc2lnbihhY2MsIHtcbiAgICBba106IF9zZXR0aW5nc1xuICB9KSwge30pIDogX3NldHRpbmdzO1xuICBjb25zdCBudW1iZXJTZXR0aW5ncyA9IG5vcm1hbGl6ZUtleWVkTnVtYmVyU2V0dGluZ3MoX3ZhbHVlLCBtZXJnZWRTZXR0aW5ncyk7XG4gIHJldHVybiB7XG4gICAgdmFsdWU6IGZvcm1hdCA9PT0gJ2FycmF5JyA/IHZhbHVlIDogX3ZhbHVlLFxuICAgIHNldHRpbmdzOiBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgbnVtYmVyU2V0dGluZ3MpLCB7fSwge1xuICAgICAgZm9ybWF0LFxuICAgICAga2V5cyxcbiAgICAgIGxvY2ssXG4gICAgICBsb2NrZWQ6IGZhbHNlXG4gICAgfSlcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFZlY3RvclBsdWdpbihkZWZhdWx0S2V5cykge1xuICByZXR1cm4ge1xuICAgIHNjaGVtYTogZ2V0VmVjdG9yU2NoZW1hKGRlZmF1bHRLZXlzLmxlbmd0aCksXG4gICAgbm9ybWFsaXplOiBfcmVmID0+IHtcbiAgICAgIGxldCB7XG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgfSA9IF9yZWYsXG4gICAgICAgIHNldHRpbmdzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIF9leGNsdWRlZDIpO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZVZlY3Rvcih2YWx1ZSwgc2V0dGluZ3MsIGRlZmF1bHRLZXlzKTtcbiAgICB9LFxuICAgIGZvcm1hdDogKHZhbHVlLCBzZXR0aW5ncykgPT4gZm9ybWF0VmVjdG9yKHZhbHVlLCBzZXR0aW5ncyksXG4gICAgc2FuaXRpemU6ICh2YWx1ZSwgc2V0dGluZ3MsIHByZXZWYWx1ZSkgPT4gc2FuaXRpemVWZWN0b3IodmFsdWUsIHNldHRpbmdzLCBwcmV2VmFsdWUpXG4gIH07XG59XG5cbmV4cG9ydCB7IFRoZW1lQ29udGV4dCBhcyAkLCB1c2VJbnB1dFNldHRlcnMgYXMgQSwgUGx1Z2lucyBhcyBCLCBJbnB1dENvbnRleHQgYXMgQywgU3R5bGVkSW5wdXRXcmFwcGVyJDEgYXMgRCwgdXNlU3RvcmVDb250ZXh0IGFzIEUsIHVzZUNhbnZhczJkIGFzIEYsIHVzZUlucHV0IGFzIEcsIGxvZyBhcyBILCBJbmRpY2F0b3IgYXMgSSwgU3R5bGVkVGl0bGUgYXMgSiwgQ2hldnJvbiBhcyBLLCBMYWJlbCBhcyBMLCBTdHlsZWRXcmFwcGVyIGFzIE0sIFN0eWxlZENvbnRlbnQgYXMgTiwgT3ZlcmxheSBhcyBPLCBQb3J0YWwgYXMgUCwgU3R5bGVkRm9sZGVyIGFzIFEsIFJvdyBhcyBSLCBTY3J1YmJlciBhcyBTLCBTdHlsZWRJbnB1dFJvdyBhcyBULCBkZWJvdW5jZSBhcyBVLCBWYWx1ZUlucHV0IGFzIFYsIGdsb2JhbFN0eWxlcyBhcyBXLCBQYW5lbFNldHRpbmdzQ29udGV4dCBhcyBYLCBTdG9yZUNvbnRleHQgYXMgWSwgbWVyZ2VUaGVtZSBhcyBaLCBfb2JqZWN0U3ByZWFkMiBhcyBfLCBWZWN0b3IgYXMgYSwgcmVuZGVyIGFzIGEwLCByZWdpc3RlciBhcyBhMSwgTGV2YUlucHV0cyBhcyBhMiwgc2VsZWN0IGFzIGEzLCBudW1iZXIgYXMgYTQsIHN0cmluZyBhcyBhNSwgYm9vbGVhbiBhcyBhNiwgTGV2YVN0b3JlUHJvdmlkZXIgYXMgYTcsIFN0cmluZyQxIGFzIGE4LCBOdW1iZXIkMSBhcyBhOSwgQm9vbGVhbiBhcyBhYSwgU2VsZWN0IGFzIGFiLCBJbm5lckxhYmVsIGFzIGFjLCBwYWQgYXMgYWQsIGV2YWx1YXRlIGFzIGFlLCBtZXJnZVJlZnMgYXMgYWYsIGNyZWF0ZVBsdWdpbiBhcyBhZywga2V5ZnJhbWVzIGFzIGFoLCBnZXRWZWN0b3JTY2hlbWEgYXMgYWksIGdldFZlY3RvclR5cGUgYXMgYWosIHNhbml0aXplVmVjdG9yIGFzIGFrLCBmb3JtYXRWZWN0b3IgYXMgYWwsIG5vcm1hbGl6ZVZlY3RvciBhcyBhbSwgdXNlVHJhbnNmb3JtIGFzIGIsIGNyZWF0ZUludGVybmFsUGx1Z2luIGFzIGMsIHVzZVRoIGFzIGQsIHVzZURyYWcgYXMgZSwgX2V4dGVuZHMgYXMgZiwgZ2V0VmVjdG9yUGx1Z2luIGFzIGcsIGNsYW1wIGFzIGgsIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBhcyBpLCBpbnZlcnRlZFJhbmdlIGFzIGosIHNhbml0aXplU3RlcCBhcyBrLCBSYW5nZVdyYXBwZXIgYXMgbCwgbXVsdGlwbHlTdGVwIGFzIG0sIG5vcm1hbGl6ZUtleWVkTnVtYmVyU2V0dGluZ3MgYXMgbiwgb21pdCBhcyBvLCBwaWNrIGFzIHAsIFJhbmdlIGFzIHEsIHJhbmdlIGFzIHIsIHN0eWxlZCBhcyBzLCBnZXRVaWQgYXMgdCwgdXNlSW5wdXRDb250ZXh0IGFzIHUsIFNwZWNpYWxJbnB1dHMgYXMgdiwgd2FybiBhcyB3LCBMZXZhRXJyb3JzIGFzIHgsIHVwZGF0ZUlucHV0IGFzIHksIG5vcm1hbGl6ZUlucHV0IGFzIHogfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/leva/dist/vector-plugin-6f82aee9.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/leva/node_modules/zustand/esm/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/leva/node_modules/zustand/esm/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ create)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction createStore(createState) {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (nextState !== state) {\n      const previousState = state;\n      state = replace ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const subscribeWithSelector = (listener, selector = getState, equalityFn = Object.is) => {\n    console.warn(\"[DEPRECATED] Please use `subscribeWithSelector` middleware\");\n    let currentSlice = selector(state);\n    function listenerToAdd() {\n      const nextSlice = selector(state);\n      if (!equalityFn(currentSlice, nextSlice)) {\n        const previousSlice = currentSlice;\n        listener(currentSlice = nextSlice, previousSlice);\n      }\n    }\n    listeners.add(listenerToAdd);\n    return () => listeners.delete(listenerToAdd);\n  };\n  const subscribe = (listener, selector, equalityFn) => {\n    if (selector || equalityFn) {\n      return subscribeWithSelector(listener, selector, equalityFn);\n    }\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => listeners.clear();\n  const api = { setState, getState, subscribe, destroy };\n  state = createState(setState, getState, api);\n  return api;\n}\n\nconst isSSR = typeof window === \"undefined\" || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\nconst useIsomorphicLayoutEffect = isSSR ? react__WEBPACK_IMPORTED_MODULE_0__.useEffect : react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect;\nfunction create(createState) {\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useStore = (selector = api.getState, equalityFn = Object.is) => {\n    const [, forceUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)((c) => c + 1, 0);\n    const state = api.getState();\n    const stateRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(state);\n    const selectorRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(selector);\n    const equalityFnRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(equalityFn);\n    const erroredRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const currentSliceRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n    if (currentSliceRef.current === void 0) {\n      currentSliceRef.current = selector(state);\n    }\n    let newStateSlice;\n    let hasNewStateSlice = false;\n    if (stateRef.current !== state || selectorRef.current !== selector || equalityFnRef.current !== equalityFn || erroredRef.current) {\n      newStateSlice = selector(state);\n      hasNewStateSlice = !equalityFn(currentSliceRef.current, newStateSlice);\n    }\n    useIsomorphicLayoutEffect(() => {\n      if (hasNewStateSlice) {\n        currentSliceRef.current = newStateSlice;\n      }\n      stateRef.current = state;\n      selectorRef.current = selector;\n      equalityFnRef.current = equalityFn;\n      erroredRef.current = false;\n    });\n    const stateBeforeSubscriptionRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(state);\n    useIsomorphicLayoutEffect(() => {\n      const listener = () => {\n        try {\n          const nextState = api.getState();\n          const nextStateSlice = selectorRef.current(nextState);\n          if (!equalityFnRef.current(currentSliceRef.current, nextStateSlice)) {\n            stateRef.current = nextState;\n            currentSliceRef.current = nextStateSlice;\n            forceUpdate();\n          }\n        } catch (error) {\n          erroredRef.current = true;\n          forceUpdate();\n        }\n      };\n      const unsubscribe = api.subscribe(listener);\n      if (api.getState() !== stateBeforeSubscriptionRef.current) {\n        listener();\n      }\n      return unsubscribe;\n    }, []);\n    const sliceToReturn = hasNewStateSlice ? newStateSlice : currentSliceRef.current;\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(sliceToReturn);\n    return sliceToReturn;\n  };\n  Object.assign(useStore, api);\n  useStore[Symbol.iterator] = function() {\n    console.warn(\"[useStore, api] = create() is deprecated and will be removed in v4\");\n    const items = [useStore, api];\n    return {\n      next() {\n        const done = items.length <= 0;\n        return { value: items.shift(), done };\n      }\n    };\n  };\n  return useStore;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGV2YS9ub2RlX21vZHVsZXMvenVzdGFuZC9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNGOztBQUV0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQ0FBMEMsNENBQVMsR0FBRyxrREFBZTtBQUNyRTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaURBQVU7QUFDdEM7QUFDQSxxQkFBcUIsNkNBQU07QUFDM0Isd0JBQXdCLDZDQUFNO0FBQzlCLDBCQUEwQiw2Q0FBTTtBQUNoQyx1QkFBdUIsNkNBQU07QUFDN0IsNEJBQTRCLDZDQUFNO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUNBQXVDLDZDQUFNO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUksb0RBQWE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHh3LWFpLWxhbmd1YWdlLXRlYWNoZXIvLi9ub2RlX21vZHVsZXMvbGV2YS9ub2RlX21vZHVsZXMvenVzdGFuZC9lc20vaW5kZXguanM/ZDc5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VSZWR1Y2VyLCB1c2VSZWYsIHVzZURlYnVnVmFsdWUsIHVzZUVmZmVjdCwgdXNlTGF5b3V0RWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5mdW5jdGlvbiBjcmVhdGVTdG9yZShjcmVhdGVTdGF0ZSkge1xuICBsZXQgc3RhdGU7XG4gIGNvbnN0IGxpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0IHNldFN0YXRlID0gKHBhcnRpYWwsIHJlcGxhY2UpID0+IHtcbiAgICBjb25zdCBuZXh0U3RhdGUgPSB0eXBlb2YgcGFydGlhbCA9PT0gXCJmdW5jdGlvblwiID8gcGFydGlhbChzdGF0ZSkgOiBwYXJ0aWFsO1xuICAgIGlmIChuZXh0U3RhdGUgIT09IHN0YXRlKSB7XG4gICAgICBjb25zdCBwcmV2aW91c1N0YXRlID0gc3RhdGU7XG4gICAgICBzdGF0ZSA9IHJlcGxhY2UgPyBuZXh0U3RhdGUgOiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwgbmV4dFN0YXRlKTtcbiAgICAgIGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoc3RhdGUsIHByZXZpb3VzU3RhdGUpKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGdldFN0YXRlID0gKCkgPT4gc3RhdGU7XG4gIGNvbnN0IHN1YnNjcmliZVdpdGhTZWxlY3RvciA9IChsaXN0ZW5lciwgc2VsZWN0b3IgPSBnZXRTdGF0ZSwgZXF1YWxpdHlGbiA9IE9iamVjdC5pcykgPT4ge1xuICAgIGNvbnNvbGUud2FybihcIltERVBSRUNBVEVEXSBQbGVhc2UgdXNlIGBzdWJzY3JpYmVXaXRoU2VsZWN0b3JgIG1pZGRsZXdhcmVcIik7XG4gICAgbGV0IGN1cnJlbnRTbGljZSA9IHNlbGVjdG9yKHN0YXRlKTtcbiAgICBmdW5jdGlvbiBsaXN0ZW5lclRvQWRkKCkge1xuICAgICAgY29uc3QgbmV4dFNsaWNlID0gc2VsZWN0b3Ioc3RhdGUpO1xuICAgICAgaWYgKCFlcXVhbGl0eUZuKGN1cnJlbnRTbGljZSwgbmV4dFNsaWNlKSkge1xuICAgICAgICBjb25zdCBwcmV2aW91c1NsaWNlID0gY3VycmVudFNsaWNlO1xuICAgICAgICBsaXN0ZW5lcihjdXJyZW50U2xpY2UgPSBuZXh0U2xpY2UsIHByZXZpb3VzU2xpY2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyVG9BZGQpO1xuICAgIHJldHVybiAoKSA9PiBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyVG9BZGQpO1xuICB9O1xuICBjb25zdCBzdWJzY3JpYmUgPSAobGlzdGVuZXIsIHNlbGVjdG9yLCBlcXVhbGl0eUZuKSA9PiB7XG4gICAgaWYgKHNlbGVjdG9yIHx8IGVxdWFsaXR5Rm4pIHtcbiAgICAgIHJldHVybiBzdWJzY3JpYmVXaXRoU2VsZWN0b3IobGlzdGVuZXIsIHNlbGVjdG9yLCBlcXVhbGl0eUZuKTtcbiAgICB9XG4gICAgbGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICB9O1xuICBjb25zdCBkZXN0cm95ID0gKCkgPT4gbGlzdGVuZXJzLmNsZWFyKCk7XG4gIGNvbnN0IGFwaSA9IHsgc2V0U3RhdGUsIGdldFN0YXRlLCBzdWJzY3JpYmUsIGRlc3Ryb3kgfTtcbiAgc3RhdGUgPSBjcmVhdGVTdGF0ZShzZXRTdGF0ZSwgZ2V0U3RhdGUsIGFwaSk7XG4gIHJldHVybiBhcGk7XG59XG5cbmNvbnN0IGlzU1NSID0gdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhd2luZG93Lm5hdmlnYXRvciB8fCAvU2VydmVyU2lkZVJlbmRlcmluZ3xeRGVub1xcLy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5jb25zdCB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0ID0gaXNTU1IgPyB1c2VFZmZlY3QgOiB1c2VMYXlvdXRFZmZlY3Q7XG5mdW5jdGlvbiBjcmVhdGUoY3JlYXRlU3RhdGUpIHtcbiAgY29uc3QgYXBpID0gdHlwZW9mIGNyZWF0ZVN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyBjcmVhdGVTdG9yZShjcmVhdGVTdGF0ZSkgOiBjcmVhdGVTdGF0ZTtcbiAgY29uc3QgdXNlU3RvcmUgPSAoc2VsZWN0b3IgPSBhcGkuZ2V0U3RhdGUsIGVxdWFsaXR5Rm4gPSBPYmplY3QuaXMpID0+IHtcbiAgICBjb25zdCBbLCBmb3JjZVVwZGF0ZV0gPSB1c2VSZWR1Y2VyKChjKSA9PiBjICsgMSwgMCk7XG4gICAgY29uc3Qgc3RhdGUgPSBhcGkuZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBzdGF0ZVJlZiA9IHVzZVJlZihzdGF0ZSk7XG4gICAgY29uc3Qgc2VsZWN0b3JSZWYgPSB1c2VSZWYoc2VsZWN0b3IpO1xuICAgIGNvbnN0IGVxdWFsaXR5Rm5SZWYgPSB1c2VSZWYoZXF1YWxpdHlGbik7XG4gICAgY29uc3QgZXJyb3JlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG4gICAgY29uc3QgY3VycmVudFNsaWNlUmVmID0gdXNlUmVmKCk7XG4gICAgaWYgKGN1cnJlbnRTbGljZVJlZi5jdXJyZW50ID09PSB2b2lkIDApIHtcbiAgICAgIGN1cnJlbnRTbGljZVJlZi5jdXJyZW50ID0gc2VsZWN0b3Ioc3RhdGUpO1xuICAgIH1cbiAgICBsZXQgbmV3U3RhdGVTbGljZTtcbiAgICBsZXQgaGFzTmV3U3RhdGVTbGljZSA9IGZhbHNlO1xuICAgIGlmIChzdGF0ZVJlZi5jdXJyZW50ICE9PSBzdGF0ZSB8fCBzZWxlY3RvclJlZi5jdXJyZW50ICE9PSBzZWxlY3RvciB8fCBlcXVhbGl0eUZuUmVmLmN1cnJlbnQgIT09IGVxdWFsaXR5Rm4gfHwgZXJyb3JlZFJlZi5jdXJyZW50KSB7XG4gICAgICBuZXdTdGF0ZVNsaWNlID0gc2VsZWN0b3Ioc3RhdGUpO1xuICAgICAgaGFzTmV3U3RhdGVTbGljZSA9ICFlcXVhbGl0eUZuKGN1cnJlbnRTbGljZVJlZi5jdXJyZW50LCBuZXdTdGF0ZVNsaWNlKTtcbiAgICB9XG4gICAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoaGFzTmV3U3RhdGVTbGljZSkge1xuICAgICAgICBjdXJyZW50U2xpY2VSZWYuY3VycmVudCA9IG5ld1N0YXRlU2xpY2U7XG4gICAgICB9XG4gICAgICBzdGF0ZVJlZi5jdXJyZW50ID0gc3RhdGU7XG4gICAgICBzZWxlY3RvclJlZi5jdXJyZW50ID0gc2VsZWN0b3I7XG4gICAgICBlcXVhbGl0eUZuUmVmLmN1cnJlbnQgPSBlcXVhbGl0eUZuO1xuICAgICAgZXJyb3JlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgfSk7XG4gICAgY29uc3Qgc3RhdGVCZWZvcmVTdWJzY3JpcHRpb25SZWYgPSB1c2VSZWYoc3RhdGUpO1xuICAgIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbmV4dFN0YXRlID0gYXBpLmdldFN0YXRlKCk7XG4gICAgICAgICAgY29uc3QgbmV4dFN0YXRlU2xpY2UgPSBzZWxlY3RvclJlZi5jdXJyZW50KG5leHRTdGF0ZSk7XG4gICAgICAgICAgaWYgKCFlcXVhbGl0eUZuUmVmLmN1cnJlbnQoY3VycmVudFNsaWNlUmVmLmN1cnJlbnQsIG5leHRTdGF0ZVNsaWNlKSkge1xuICAgICAgICAgICAgc3RhdGVSZWYuY3VycmVudCA9IG5leHRTdGF0ZTtcbiAgICAgICAgICAgIGN1cnJlbnRTbGljZVJlZi5jdXJyZW50ID0gbmV4dFN0YXRlU2xpY2U7XG4gICAgICAgICAgICBmb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBlcnJvcmVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgIGZvcmNlVXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdCB1bnN1YnNjcmliZSA9IGFwaS5zdWJzY3JpYmUobGlzdGVuZXIpO1xuICAgICAgaWYgKGFwaS5nZXRTdGF0ZSgpICE9PSBzdGF0ZUJlZm9yZVN1YnNjcmlwdGlvblJlZi5jdXJyZW50KSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gICAgfSwgW10pO1xuICAgIGNvbnN0IHNsaWNlVG9SZXR1cm4gPSBoYXNOZXdTdGF0ZVNsaWNlID8gbmV3U3RhdGVTbGljZSA6IGN1cnJlbnRTbGljZVJlZi5jdXJyZW50O1xuICAgIHVzZURlYnVnVmFsdWUoc2xpY2VUb1JldHVybik7XG4gICAgcmV0dXJuIHNsaWNlVG9SZXR1cm47XG4gIH07XG4gIE9iamVjdC5hc3NpZ24odXNlU3RvcmUsIGFwaSk7XG4gIHVzZVN0b3JlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLndhcm4oXCJbdXNlU3RvcmUsIGFwaV0gPSBjcmVhdGUoKSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdjRcIik7XG4gICAgY29uc3QgaXRlbXMgPSBbdXNlU3RvcmUsIGFwaV07XG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IGRvbmUgPSBpdGVtcy5sZW5ndGggPD0gMDtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGl0ZW1zLnNoaWZ0KCksIGRvbmUgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuICByZXR1cm4gdXNlU3RvcmU7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZSBhcyBkZWZhdWx0IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/leva/node_modules/zustand/esm/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/leva/node_modules/zustand/esm/middleware.js":
/*!******************************************************************!*\
  !*** ./node_modules/leva/node_modules/zustand/esm/middleware.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   combine: () => (/* binding */ combine),\n/* harmony export */   devtools: () => (/* binding */ devtools),\n/* harmony export */   persist: () => (/* binding */ persist),\n/* harmony export */   redux: () => (/* binding */ redux),\n/* harmony export */   subscribeWithSelector: () => (/* binding */ subscribeWithSelector)\n/* harmony export */ });\nvar __defProp$1 = Object.defineProperty;\nvar __getOwnPropSymbols$1 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$1 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$1 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$1 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$1.call(b, prop))\n      __defNormalProp$1(a, prop, b[prop]);\n  if (__getOwnPropSymbols$1)\n    for (var prop of __getOwnPropSymbols$1(b)) {\n      if (__propIsEnum$1.call(b, prop))\n        __defNormalProp$1(a, prop, b[prop]);\n    }\n  return a;\n};\nconst redux = (reducer, initial) => (set, get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return __spreadValues$1({ dispatch: (...a) => api.dispatch(...a) }, initial);\n};\n\nfunction devtools(fn, options) {\n  return (set, get, api) => {\n    var _a;\n    let didWarnAboutNameDeprecation = false;\n    if (typeof options === \"string\" && !didWarnAboutNameDeprecation) {\n      console.warn(\"[zustand devtools middleware]: passing `name` as directly will be not allowed in next majorpass the `name` in an object `{ name: ... }` instead\");\n      didWarnAboutNameDeprecation = true;\n    }\n    const devtoolsOptions = options === void 0 ? { name: void 0, anonymousActionType: void 0 } : typeof options === \"string\" ? { name: options } : options;\n    if (typeof ((_a = devtoolsOptions == null ? void 0 : devtoolsOptions.serialize) == null ? void 0 : _a.options) !== \"undefined\") {\n      console.warn(\"[zustand devtools middleware]: `serialize.options` is deprecated, just use `serialize`\");\n    }\n    let extensionConnector;\n    try {\n      extensionConnector = window.__REDUX_DEVTOOLS_EXTENSION__ || window.top.__REDUX_DEVTOOLS_EXTENSION__;\n    } catch {\n    }\n    if (!extensionConnector) {\n      if ( true && typeof window !== \"undefined\") {\n        console.warn(\"[zustand devtools middleware] Please install/enable Redux devtools extension\");\n      }\n      return fn(set, get, api);\n    }\n    let extension = Object.create(extensionConnector.connect(devtoolsOptions));\n    let didWarnAboutDevtools = false;\n    Object.defineProperty(api, \"devtools\", {\n      get: () => {\n        if (!didWarnAboutDevtools) {\n          console.warn(\"[zustand devtools middleware] `devtools` property on the store is deprecated it will be removed in the next major.\\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly\");\n          didWarnAboutDevtools = true;\n        }\n        return extension;\n      },\n      set: (value) => {\n        if (!didWarnAboutDevtools) {\n          console.warn(\"[zustand devtools middleware] `api.devtools` is deprecated, it will be removed in the next major.\\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly\");\n          didWarnAboutDevtools = true;\n        }\n        extension = value;\n      }\n    });\n    let didWarnAboutPrefix = false;\n    Object.defineProperty(extension, \"prefix\", {\n      get: () => {\n        if (!didWarnAboutPrefix) {\n          console.warn(\"[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\\nWe no longer prefix the actions/names\" + devtoolsOptions.name === void 0 ? \", pass the `name` option to create a separate instance of devtools for each store.\" : \", because the `name` option already creates a separate instance of devtools for each store.\");\n          didWarnAboutPrefix = true;\n        }\n        return \"\";\n      },\n      set: () => {\n        if (!didWarnAboutPrefix) {\n          console.warn(\"[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\\nWe no longer prefix the actions/names\" + devtoolsOptions.name === void 0 ? \", pass the `name` option to create a separate instance of devtools for each store.\" : \", because the `name` option already creates a separate instance of devtools for each store.\");\n          didWarnAboutPrefix = true;\n        }\n      }\n    });\n    let isRecording = true;\n    api.setState = (state, replace, nameOrAction) => {\n      set(state, replace);\n      if (!isRecording)\n        return;\n      extension.send(nameOrAction === void 0 ? { type: devtoolsOptions.anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction, get());\n    };\n    const setStateFromDevtools = (...a) => {\n      const originalIsRecording = isRecording;\n      isRecording = false;\n      set(...a);\n      isRecording = originalIsRecording;\n    };\n    const initialState = fn(api.setState, get, api);\n    extension.init(initialState);\n    if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n      let didWarnAboutReservedActionType = false;\n      const originalDispatch = api.dispatch;\n      api.dispatch = (...a) => {\n        if (a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n          console.warn('[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.');\n          didWarnAboutReservedActionType = true;\n        }\n        originalDispatch(...a);\n      };\n    }\n    extension.subscribe((message) => {\n      var _a2;\n      switch (message.type) {\n        case \"ACTION\":\n          if (typeof message.payload !== \"string\") {\n            console.error(\"[zustand devtools middleware] Unsupported action format\");\n            return;\n          }\n          return parseJsonThen(message.payload, (action) => {\n            if (action.type === \"__setState\") {\n              setStateFromDevtools(action.state);\n              return;\n            }\n            if (!api.dispatchFromDevtools)\n              return;\n            if (typeof api.dispatch !== \"function\")\n              return;\n            api.dispatch(action);\n          });\n        case \"DISPATCH\":\n          switch (message.payload.type) {\n            case \"RESET\":\n              setStateFromDevtools(initialState);\n              return extension.init(api.getState());\n            case \"COMMIT\":\n              return extension.init(api.getState());\n            case \"ROLLBACK\":\n              return parseJsonThen(message.state, (state) => {\n                setStateFromDevtools(state);\n                extension.init(api.getState());\n              });\n            case \"JUMP_TO_STATE\":\n            case \"JUMP_TO_ACTION\":\n              return parseJsonThen(message.state, (state) => {\n                setStateFromDevtools(state);\n              });\n            case \"IMPORT_STATE\": {\n              const { nextLiftedState } = message.payload;\n              const lastComputedState = (_a2 = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a2.state;\n              if (!lastComputedState)\n                return;\n              setStateFromDevtools(lastComputedState);\n              extension.send(null, nextLiftedState);\n              return;\n            }\n            case \"PAUSE_RECORDING\":\n              return isRecording = !isRecording;\n          }\n          return;\n      }\n    });\n    return initialState;\n  };\n}\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\"[zustand devtools middleware] Could not parse the received json\", e);\n  }\n  if (parsed !== void 0)\n    f(parsed);\n};\n\nconst subscribeWithSelector = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\n\nconst combine = (initialState, create) => (set, get, api) => Object.assign({}, initialState, create(set, get, api));\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persist = (config, baseOptions) => (set, get, api) => {\n  let options = __spreadValues({\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => __spreadValues(__spreadValues({}, currentState), persistedState)\n  }, baseOptions);\n  if (options.blacklist || options.whitelist) {\n    console.warn(`The ${options.blacklist ? \"blacklist\" : \"whitelist\"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);\n  }\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (e) {\n  }\n  if (!storage) {\n    return config((...args) => {\n      console.warn(`[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`);\n      set(...args);\n    }, get, api);\n  } else if (!storage.removeItem) {\n    console.warn(`[zustand persist middleware] The given storage for item '${options.name}' does not contain a 'removeItem' method, which will be required in v4.`);\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize(__spreadValues({}, get()));\n    if (options.whitelist) {\n      Object.keys(state).forEach((key) => {\n        var _a;\n        !((_a = options.whitelist) == null ? void 0 : _a.includes(key)) && delete state[key];\n      });\n    }\n    if (options.blacklist) {\n      options.blacklist.forEach((key) => delete state[key]);\n    }\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then((serializedValue) => storage.setItem(options.name, serializedValue)).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config((...args) => {\n    set(...args);\n    void setItem();\n  }, get, api);\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage)\n      return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(deserializedStorageValue.state, deserializedStorageValue.version);\n          }\n          console.error(`State loaded from storage couldn't be migrated since no migrate function was provided`);\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(migratedState, (_a2 = get()) != null ? _a2 : configResult);\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = __spreadValues(__spreadValues({}, options), newOptions);\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      var _a;\n      (_a = storage == null ? void 0 : storage.removeItem) == null ? void 0 : _a.call(storage, options.name);\n    },\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGV2YS9ub2RlX21vZHVsZXMvenVzdGFuZC9lc20vbWlkZGxld2FyZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGLDZEQUE2RDtBQUMvSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsd0NBQXdDO0FBQ3BFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrSUFBK0ksV0FBVztBQUMxSjtBQUNBO0FBQ0EsbURBQW1ELDRDQUE0QyxrQ0FBa0MsZ0JBQWdCO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsVUFBVSxLQUEwRDtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELDJEQUEyRCx1Q0FBdUMscUJBQXFCO0FBQ3hLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLHNCQUFzQixrQkFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2RUFBNkU7O0FBRTdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFO0FBQzdFLEdBQUc7QUFDSDtBQUNBLHdCQUF3QiwrQ0FBK0M7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLGFBQWE7QUFDdkY7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLDZFQUE2RSxhQUFhO0FBQzFGO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGlDQUFpQztBQUMxRTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRW9FIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHh3LWFpLWxhbmd1YWdlLXRlYWNoZXIvLi9ub2RlX21vZHVsZXMvbGV2YS9ub2RlX21vZHVsZXMvenVzdGFuZC9lc20vbWlkZGxld2FyZS5qcz83YzhjIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AkMSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BTeW1ib2xzJDEgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9faGFzT3duUHJvcCQxID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0kMSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wJDEgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wJDEob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzJDEgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcCQxLmNhbGwoYiwgcHJvcCkpXG4gICAgICBfX2RlZk5vcm1hbFByb3AkMShhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMkMSlcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMkMShiKSkge1xuICAgICAgaWYgKF9fcHJvcElzRW51bSQxLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcCQxKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xuY29uc3QgcmVkdXggPSAocmVkdWNlciwgaW5pdGlhbCkgPT4gKHNldCwgZ2V0LCBhcGkpID0+IHtcbiAgYXBpLmRpc3BhdGNoID0gKGFjdGlvbikgPT4ge1xuICAgIHNldCgoc3RhdGUpID0+IHJlZHVjZXIoc3RhdGUsIGFjdGlvbiksIGZhbHNlLCBhY3Rpb24pO1xuICAgIHJldHVybiBhY3Rpb247XG4gIH07XG4gIGFwaS5kaXNwYXRjaEZyb21EZXZ0b29scyA9IHRydWU7XG4gIHJldHVybiBfX3NwcmVhZFZhbHVlcyQxKHsgZGlzcGF0Y2g6ICguLi5hKSA9PiBhcGkuZGlzcGF0Y2goLi4uYSkgfSwgaW5pdGlhbCk7XG59O1xuXG5mdW5jdGlvbiBkZXZ0b29scyhmbiwgb3B0aW9ucykge1xuICByZXR1cm4gKHNldCwgZ2V0LCBhcGkpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IGRpZFdhcm5BYm91dE5hbWVEZXByZWNhdGlvbiA9IGZhbHNlO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiAmJiAhZGlkV2FybkFib3V0TmFtZURlcHJlY2F0aW9uKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJbenVzdGFuZCBkZXZ0b29scyBtaWRkbGV3YXJlXTogcGFzc2luZyBgbmFtZWAgYXMgZGlyZWN0bHkgd2lsbCBiZSBub3QgYWxsb3dlZCBpbiBuZXh0IG1ham9ycGFzcyB0aGUgYG5hbWVgIGluIGFuIG9iamVjdCBgeyBuYW1lOiAuLi4gfWAgaW5zdGVhZFwiKTtcbiAgICAgIGRpZFdhcm5BYm91dE5hbWVEZXByZWNhdGlvbiA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGRldnRvb2xzT3B0aW9ucyA9IG9wdGlvbnMgPT09IHZvaWQgMCA/IHsgbmFtZTogdm9pZCAwLCBhbm9ueW1vdXNBY3Rpb25UeXBlOiB2b2lkIDAgfSA6IHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiID8geyBuYW1lOiBvcHRpb25zIH0gOiBvcHRpb25zO1xuICAgIGlmICh0eXBlb2YgKChfYSA9IGRldnRvb2xzT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogZGV2dG9vbHNPcHRpb25zLnNlcmlhbGl6ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm9wdGlvbnMpICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJbenVzdGFuZCBkZXZ0b29scyBtaWRkbGV3YXJlXTogYHNlcmlhbGl6ZS5vcHRpb25zYCBpcyBkZXByZWNhdGVkLCBqdXN0IHVzZSBgc2VyaWFsaXplYFwiKTtcbiAgICB9XG4gICAgbGV0IGV4dGVuc2lvbkNvbm5lY3RvcjtcbiAgICB0cnkge1xuICAgICAgZXh0ZW5zaW9uQ29ubmVjdG9yID0gd2luZG93Ll9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX18gfHwgd2luZG93LnRvcC5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9fO1xuICAgIH0gY2F0Y2gge1xuICAgIH1cbiAgICBpZiAoIWV4dGVuc2lvbkNvbm5lY3Rvcikge1xuICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgJiYgaW1wb3J0Lm1ldGEuZW52Lk1PREUpICE9PSBcInByb2R1Y3Rpb25cIiAmJiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlt6dXN0YW5kIGRldnRvb2xzIG1pZGRsZXdhcmVdIFBsZWFzZSBpbnN0YWxsL2VuYWJsZSBSZWR1eCBkZXZ0b29scyBleHRlbnNpb25cIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZm4oc2V0LCBnZXQsIGFwaSk7XG4gICAgfVxuICAgIGxldCBleHRlbnNpb24gPSBPYmplY3QuY3JlYXRlKGV4dGVuc2lvbkNvbm5lY3Rvci5jb25uZWN0KGRldnRvb2xzT3B0aW9ucykpO1xuICAgIGxldCBkaWRXYXJuQWJvdXREZXZ0b29scyA9IGZhbHNlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcGksIFwiZGV2dG9vbHNcIiwge1xuICAgICAgZ2V0OiAoKSA9PiB7XG4gICAgICAgIGlmICghZGlkV2FybkFib3V0RGV2dG9vbHMpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJbenVzdGFuZCBkZXZ0b29scyBtaWRkbGV3YXJlXSBgZGV2dG9vbHNgIHByb3BlcnR5IG9uIHRoZSBzdG9yZSBpcyBkZXByZWNhdGVkIGl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvci5cXG5Zb3Ugc2hvdWxkbid0IGludGVyYWN0IHdpdGggdGhlIGV4dGVuc2lvbiBkaXJlY3RseS4gQnV0IGluIGNhc2UgeW91IHN0aWxsIHdhbnQgdG8geW91IGNhbiBwYXRjaCBgd2luZG93Ll9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX19gIGRpcmVjdGx5XCIpO1xuICAgICAgICAgIGRpZFdhcm5BYm91dERldnRvb2xzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXh0ZW5zaW9uO1xuICAgICAgfSxcbiAgICAgIHNldDogKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghZGlkV2FybkFib3V0RGV2dG9vbHMpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJbenVzdGFuZCBkZXZ0b29scyBtaWRkbGV3YXJlXSBgYXBpLmRldnRvb2xzYCBpcyBkZXByZWNhdGVkLCBpdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IuXFxuWW91IHNob3VsZG4ndCBpbnRlcmFjdCB3aXRoIHRoZSBleHRlbnNpb24gZGlyZWN0bHkuIEJ1dCBpbiBjYXNlIHlvdSBzdGlsbCB3YW50IHRvIHlvdSBjYW4gcGF0Y2ggYHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9fYCBkaXJlY3RseVwiKTtcbiAgICAgICAgICBkaWRXYXJuQWJvdXREZXZ0b29scyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZXh0ZW5zaW9uID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbGV0IGRpZFdhcm5BYm91dFByZWZpeCA9IGZhbHNlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHRlbnNpb24sIFwicHJlZml4XCIsIHtcbiAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICBpZiAoIWRpZFdhcm5BYm91dFByZWZpeCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIlt6dXN0YW5kIGRldnRvb2xzIG1pZGRsZXdhcmVdIGFsb25nIHdpdGggYGFwaS5kZXZ0b29sc2AsIGBhcGkuZGV2dG9vbHMucHJlZml4YCBpcyBkZXByZWNhdGVkLlxcbldlIG5vIGxvbmdlciBwcmVmaXggdGhlIGFjdGlvbnMvbmFtZXNcIiArIGRldnRvb2xzT3B0aW9ucy5uYW1lID09PSB2b2lkIDAgPyBcIiwgcGFzcyB0aGUgYG5hbWVgIG9wdGlvbiB0byBjcmVhdGUgYSBzZXBhcmF0ZSBpbnN0YW5jZSBvZiBkZXZ0b29scyBmb3IgZWFjaCBzdG9yZS5cIiA6IFwiLCBiZWNhdXNlIHRoZSBgbmFtZWAgb3B0aW9uIGFscmVhZHkgY3JlYXRlcyBhIHNlcGFyYXRlIGluc3RhbmNlIG9mIGRldnRvb2xzIGZvciBlYWNoIHN0b3JlLlwiKTtcbiAgICAgICAgICBkaWRXYXJuQWJvdXRQcmVmaXggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfSxcbiAgICAgIHNldDogKCkgPT4ge1xuICAgICAgICBpZiAoIWRpZFdhcm5BYm91dFByZWZpeCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIlt6dXN0YW5kIGRldnRvb2xzIG1pZGRsZXdhcmVdIGFsb25nIHdpdGggYGFwaS5kZXZ0b29sc2AsIGBhcGkuZGV2dG9vbHMucHJlZml4YCBpcyBkZXByZWNhdGVkLlxcbldlIG5vIGxvbmdlciBwcmVmaXggdGhlIGFjdGlvbnMvbmFtZXNcIiArIGRldnRvb2xzT3B0aW9ucy5uYW1lID09PSB2b2lkIDAgPyBcIiwgcGFzcyB0aGUgYG5hbWVgIG9wdGlvbiB0byBjcmVhdGUgYSBzZXBhcmF0ZSBpbnN0YW5jZSBvZiBkZXZ0b29scyBmb3IgZWFjaCBzdG9yZS5cIiA6IFwiLCBiZWNhdXNlIHRoZSBgbmFtZWAgb3B0aW9uIGFscmVhZHkgY3JlYXRlcyBhIHNlcGFyYXRlIGluc3RhbmNlIG9mIGRldnRvb2xzIGZvciBlYWNoIHN0b3JlLlwiKTtcbiAgICAgICAgICBkaWRXYXJuQWJvdXRQcmVmaXggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgbGV0IGlzUmVjb3JkaW5nID0gdHJ1ZTtcbiAgICBhcGkuc2V0U3RhdGUgPSAoc3RhdGUsIHJlcGxhY2UsIG5hbWVPckFjdGlvbikgPT4ge1xuICAgICAgc2V0KHN0YXRlLCByZXBsYWNlKTtcbiAgICAgIGlmICghaXNSZWNvcmRpbmcpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGV4dGVuc2lvbi5zZW5kKG5hbWVPckFjdGlvbiA9PT0gdm9pZCAwID8geyB0eXBlOiBkZXZ0b29sc09wdGlvbnMuYW5vbnltb3VzQWN0aW9uVHlwZSB8fCBcImFub255bW91c1wiIH0gOiB0eXBlb2YgbmFtZU9yQWN0aW9uID09PSBcInN0cmluZ1wiID8geyB0eXBlOiBuYW1lT3JBY3Rpb24gfSA6IG5hbWVPckFjdGlvbiwgZ2V0KCkpO1xuICAgIH07XG4gICAgY29uc3Qgc2V0U3RhdGVGcm9tRGV2dG9vbHMgPSAoLi4uYSkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWxJc1JlY29yZGluZyA9IGlzUmVjb3JkaW5nO1xuICAgICAgaXNSZWNvcmRpbmcgPSBmYWxzZTtcbiAgICAgIHNldCguLi5hKTtcbiAgICAgIGlzUmVjb3JkaW5nID0gb3JpZ2luYWxJc1JlY29yZGluZztcbiAgICB9O1xuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IGZuKGFwaS5zZXRTdGF0ZSwgZ2V0LCBhcGkpO1xuICAgIGV4dGVuc2lvbi5pbml0KGluaXRpYWxTdGF0ZSk7XG4gICAgaWYgKGFwaS5kaXNwYXRjaEZyb21EZXZ0b29scyAmJiB0eXBlb2YgYXBpLmRpc3BhdGNoID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGxldCBkaWRXYXJuQWJvdXRSZXNlcnZlZEFjdGlvblR5cGUgPSBmYWxzZTtcbiAgICAgIGNvbnN0IG9yaWdpbmFsRGlzcGF0Y2ggPSBhcGkuZGlzcGF0Y2g7XG4gICAgICBhcGkuZGlzcGF0Y2ggPSAoLi4uYSkgPT4ge1xuICAgICAgICBpZiAoYVswXS50eXBlID09PSBcIl9fc2V0U3RhdGVcIiAmJiAhZGlkV2FybkFib3V0UmVzZXJ2ZWRBY3Rpb25UeXBlKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdbenVzdGFuZCBkZXZ0b29scyBtaWRkbGV3YXJlXSBcIl9fc2V0U3RhdGVcIiBhY3Rpb24gdHlwZSBpcyByZXNlcnZlZCB0byBzZXQgc3RhdGUgZnJvbSB0aGUgZGV2dG9vbHMuIEF2b2lkIHVzaW5nIGl0LicpO1xuICAgICAgICAgIGRpZFdhcm5BYm91dFJlc2VydmVkQWN0aW9uVHlwZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgb3JpZ2luYWxEaXNwYXRjaCguLi5hKTtcbiAgICAgIH07XG4gICAgfVxuICAgIGV4dGVuc2lvbi5zdWJzY3JpYmUoKG1lc3NhZ2UpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICBzd2l0Y2ggKG1lc3NhZ2UudHlwZSkge1xuICAgICAgICBjYXNlIFwiQUNUSU9OXCI6XG4gICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnBheWxvYWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbenVzdGFuZCBkZXZ0b29scyBtaWRkbGV3YXJlXSBVbnN1cHBvcnRlZCBhY3Rpb24gZm9ybWF0XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcGFyc2VKc29uVGhlbihtZXNzYWdlLnBheWxvYWQsIChhY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChhY3Rpb24udHlwZSA9PT0gXCJfX3NldFN0YXRlXCIpIHtcbiAgICAgICAgICAgICAgc2V0U3RhdGVGcm9tRGV2dG9vbHMoYWN0aW9uLnN0YXRlKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhcGkuZGlzcGF0Y2hGcm9tRGV2dG9vbHMpXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXBpLmRpc3BhdGNoICE9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGFwaS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlIFwiRElTUEFUQ0hcIjpcbiAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UucGF5bG9hZC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiUkVTRVRcIjpcbiAgICAgICAgICAgICAgc2V0U3RhdGVGcm9tRGV2dG9vbHMoaW5pdGlhbFN0YXRlKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvbi5pbml0KGFwaS5nZXRTdGF0ZSgpKTtcbiAgICAgICAgICAgIGNhc2UgXCJDT01NSVRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvbi5pbml0KGFwaS5nZXRTdGF0ZSgpKTtcbiAgICAgICAgICAgIGNhc2UgXCJST0xMQkFDS1wiOlxuICAgICAgICAgICAgICByZXR1cm4gcGFyc2VKc29uVGhlbihtZXNzYWdlLnN0YXRlLCAoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZUZyb21EZXZ0b29scyhzdGF0ZSk7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uLmluaXQoYXBpLmdldFN0YXRlKCkpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhc2UgXCJKVU1QX1RPX1NUQVRFXCI6XG4gICAgICAgICAgICBjYXNlIFwiSlVNUF9UT19BQ1RJT05cIjpcbiAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSnNvblRoZW4obWVzc2FnZS5zdGF0ZSwgKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0U3RhdGVGcm9tRGV2dG9vbHMoc3RhdGUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhc2UgXCJJTVBPUlRfU1RBVEVcIjoge1xuICAgICAgICAgICAgICBjb25zdCB7IG5leHRMaWZ0ZWRTdGF0ZSB9ID0gbWVzc2FnZS5wYXlsb2FkO1xuICAgICAgICAgICAgICBjb25zdCBsYXN0Q29tcHV0ZWRTdGF0ZSA9IChfYTIgPSBuZXh0TGlmdGVkU3RhdGUuY29tcHV0ZWRTdGF0ZXMuc2xpY2UoLTEpWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnN0YXRlO1xuICAgICAgICAgICAgICBpZiAoIWxhc3RDb21wdXRlZFN0YXRlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgc2V0U3RhdGVGcm9tRGV2dG9vbHMobGFzdENvbXB1dGVkU3RhdGUpO1xuICAgICAgICAgICAgICBleHRlbnNpb24uc2VuZChudWxsLCBuZXh0TGlmdGVkU3RhdGUpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiUEFVU0VfUkVDT1JESU5HXCI6XG4gICAgICAgICAgICAgIHJldHVybiBpc1JlY29yZGluZyA9ICFpc1JlY29yZGluZztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpbml0aWFsU3RhdGU7XG4gIH07XG59XG5jb25zdCBwYXJzZUpzb25UaGVuID0gKHN0cmluZ2lmaWVkLCBmKSA9PiB7XG4gIGxldCBwYXJzZWQ7XG4gIHRyeSB7XG4gICAgcGFyc2VkID0gSlNPTi5wYXJzZShzdHJpbmdpZmllZCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW3p1c3RhbmQgZGV2dG9vbHMgbWlkZGxld2FyZV0gQ291bGQgbm90IHBhcnNlIHRoZSByZWNlaXZlZCBqc29uXCIsIGUpO1xuICB9XG4gIGlmIChwYXJzZWQgIT09IHZvaWQgMClcbiAgICBmKHBhcnNlZCk7XG59O1xuXG5jb25zdCBzdWJzY3JpYmVXaXRoU2VsZWN0b3IgPSAoZm4pID0+IChzZXQsIGdldCwgYXBpKSA9PiB7XG4gIGNvbnN0IG9yaWdTdWJzY3JpYmUgPSBhcGkuc3Vic2NyaWJlO1xuICBhcGkuc3Vic2NyaWJlID0gKHNlbGVjdG9yLCBvcHRMaXN0ZW5lciwgb3B0aW9ucykgPT4ge1xuICAgIGxldCBsaXN0ZW5lciA9IHNlbGVjdG9yO1xuICAgIGlmIChvcHRMaXN0ZW5lcikge1xuICAgICAgY29uc3QgZXF1YWxpdHlGbiA9IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmVxdWFsaXR5Rm4pIHx8IE9iamVjdC5pcztcbiAgICAgIGxldCBjdXJyZW50U2xpY2UgPSBzZWxlY3RvcihhcGkuZ2V0U3RhdGUoKSk7XG4gICAgICBsaXN0ZW5lciA9IChzdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBuZXh0U2xpY2UgPSBzZWxlY3RvcihzdGF0ZSk7XG4gICAgICAgIGlmICghZXF1YWxpdHlGbihjdXJyZW50U2xpY2UsIG5leHRTbGljZSkpIHtcbiAgICAgICAgICBjb25zdCBwcmV2aW91c1NsaWNlID0gY3VycmVudFNsaWNlO1xuICAgICAgICAgIG9wdExpc3RlbmVyKGN1cnJlbnRTbGljZSA9IG5leHRTbGljZSwgcHJldmlvdXNTbGljZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5maXJlSW1tZWRpYXRlbHkpIHtcbiAgICAgICAgb3B0TGlzdGVuZXIoY3VycmVudFNsaWNlLCBjdXJyZW50U2xpY2UpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3JpZ1N1YnNjcmliZShsaXN0ZW5lcik7XG4gIH07XG4gIGNvbnN0IGluaXRpYWxTdGF0ZSA9IGZuKHNldCwgZ2V0LCBhcGkpO1xuICByZXR1cm4gaW5pdGlhbFN0YXRlO1xufTtcblxuY29uc3QgY29tYmluZSA9IChpbml0aWFsU3RhdGUsIGNyZWF0ZSkgPT4gKHNldCwgZ2V0LCBhcGkpID0+IE9iamVjdC5hc3NpZ24oe30sIGluaXRpYWxTdGF0ZSwgY3JlYXRlKHNldCwgZ2V0LCBhcGkpKTtcblxudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xuY29uc3QgdG9UaGVuYWJsZSA9IChmbikgPT4gKGlucHV0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gZm4oaW5wdXQpO1xuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdGhlbihvbkZ1bGZpbGxlZCkge1xuICAgICAgICByZXR1cm4gdG9UaGVuYWJsZShvbkZ1bGZpbGxlZCkocmVzdWx0KTtcbiAgICAgIH0sXG4gICAgICBjYXRjaChfb25SZWplY3RlZCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRoZW4oX29uRnVsZmlsbGVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGNhdGNoKG9uUmVqZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHRvVGhlbmFibGUob25SZWplY3RlZCkoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcbmNvbnN0IHBlcnNpc3QgPSAoY29uZmlnLCBiYXNlT3B0aW9ucykgPT4gKHNldCwgZ2V0LCBhcGkpID0+IHtcbiAgbGV0IG9wdGlvbnMgPSBfX3NwcmVhZFZhbHVlcyh7XG4gICAgZ2V0U3RvcmFnZTogKCkgPT4gbG9jYWxTdG9yYWdlLFxuICAgIHNlcmlhbGl6ZTogSlNPTi5zdHJpbmdpZnksXG4gICAgZGVzZXJpYWxpemU6IEpTT04ucGFyc2UsXG4gICAgcGFydGlhbGl6ZTogKHN0YXRlKSA9PiBzdGF0ZSxcbiAgICB2ZXJzaW9uOiAwLFxuICAgIG1lcmdlOiAocGVyc2lzdGVkU3RhdGUsIGN1cnJlbnRTdGF0ZSkgPT4gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGN1cnJlbnRTdGF0ZSksIHBlcnNpc3RlZFN0YXRlKVxuICB9LCBiYXNlT3B0aW9ucyk7XG4gIGlmIChvcHRpb25zLmJsYWNrbGlzdCB8fCBvcHRpb25zLndoaXRlbGlzdCkge1xuICAgIGNvbnNvbGUud2FybihgVGhlICR7b3B0aW9ucy5ibGFja2xpc3QgPyBcImJsYWNrbGlzdFwiIDogXCJ3aGl0ZWxpc3RcIn0gb3B0aW9uIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCB2ZXJzaW9uLiBQbGVhc2UgdXNlIHRoZSAncGFydGlhbGl6ZScgb3B0aW9uIGluc3RlYWQuYCk7XG4gIH1cbiAgbGV0IGhhc0h5ZHJhdGVkID0gZmFsc2U7XG4gIGNvbnN0IGh5ZHJhdGlvbkxpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0IGZpbmlzaEh5ZHJhdGlvbkxpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGxldCBzdG9yYWdlO1xuICB0cnkge1xuICAgIHN0b3JhZ2UgPSBvcHRpb25zLmdldFN0b3JhZ2UoKTtcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIGlmICghc3RvcmFnZSkge1xuICAgIHJldHVybiBjb25maWcoKC4uLmFyZ3MpID0+IHtcbiAgICAgIGNvbnNvbGUud2FybihgW3p1c3RhbmQgcGVyc2lzdCBtaWRkbGV3YXJlXSBVbmFibGUgdG8gdXBkYXRlIGl0ZW0gJyR7b3B0aW9ucy5uYW1lfScsIHRoZSBnaXZlbiBzdG9yYWdlIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZS5gKTtcbiAgICAgIHNldCguLi5hcmdzKTtcbiAgICB9LCBnZXQsIGFwaSk7XG4gIH0gZWxzZSBpZiAoIXN0b3JhZ2UucmVtb3ZlSXRlbSkge1xuICAgIGNvbnNvbGUud2FybihgW3p1c3RhbmQgcGVyc2lzdCBtaWRkbGV3YXJlXSBUaGUgZ2l2ZW4gc3RvcmFnZSBmb3IgaXRlbSAnJHtvcHRpb25zLm5hbWV9JyBkb2VzIG5vdCBjb250YWluIGEgJ3JlbW92ZUl0ZW0nIG1ldGhvZCwgd2hpY2ggd2lsbCBiZSByZXF1aXJlZCBpbiB2NC5gKTtcbiAgfVxuICBjb25zdCB0aGVuYWJsZVNlcmlhbGl6ZSA9IHRvVGhlbmFibGUob3B0aW9ucy5zZXJpYWxpemUpO1xuICBjb25zdCBzZXRJdGVtID0gKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gb3B0aW9ucy5wYXJ0aWFsaXplKF9fc3ByZWFkVmFsdWVzKHt9LCBnZXQoKSkpO1xuICAgIGlmIChvcHRpb25zLndoaXRlbGlzdCkge1xuICAgICAgT2JqZWN0LmtleXMoc3RhdGUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgICEoKF9hID0gb3B0aW9ucy53aGl0ZWxpc3QpID09IG51bGwgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcyhrZXkpKSAmJiBkZWxldGUgc3RhdGVba2V5XTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5ibGFja2xpc3QpIHtcbiAgICAgIG9wdGlvbnMuYmxhY2tsaXN0LmZvckVhY2goKGtleSkgPT4gZGVsZXRlIHN0YXRlW2tleV0pO1xuICAgIH1cbiAgICBsZXQgZXJyb3JJblN5bmM7XG4gICAgY29uc3QgdGhlbmFibGUgPSB0aGVuYWJsZVNlcmlhbGl6ZSh7IHN0YXRlLCB2ZXJzaW9uOiBvcHRpb25zLnZlcnNpb24gfSkudGhlbigoc2VyaWFsaXplZFZhbHVlKSA9PiBzdG9yYWdlLnNldEl0ZW0ob3B0aW9ucy5uYW1lLCBzZXJpYWxpemVkVmFsdWUpKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgZXJyb3JJblN5bmMgPSBlO1xuICAgIH0pO1xuICAgIGlmIChlcnJvckluU3luYykge1xuICAgICAgdGhyb3cgZXJyb3JJblN5bmM7XG4gICAgfVxuICAgIHJldHVybiB0aGVuYWJsZTtcbiAgfTtcbiAgY29uc3Qgc2F2ZWRTZXRTdGF0ZSA9IGFwaS5zZXRTdGF0ZTtcbiAgYXBpLnNldFN0YXRlID0gKHN0YXRlLCByZXBsYWNlKSA9PiB7XG4gICAgc2F2ZWRTZXRTdGF0ZShzdGF0ZSwgcmVwbGFjZSk7XG4gICAgdm9pZCBzZXRJdGVtKCk7XG4gIH07XG4gIGNvbnN0IGNvbmZpZ1Jlc3VsdCA9IGNvbmZpZygoLi4uYXJncykgPT4ge1xuICAgIHNldCguLi5hcmdzKTtcbiAgICB2b2lkIHNldEl0ZW0oKTtcbiAgfSwgZ2V0LCBhcGkpO1xuICBsZXQgc3RhdGVGcm9tU3RvcmFnZTtcbiAgY29uc3QgaHlkcmF0ZSA9ICgpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKCFzdG9yYWdlKVxuICAgICAgcmV0dXJuO1xuICAgIGhhc0h5ZHJhdGVkID0gZmFsc2U7XG4gICAgaHlkcmF0aW9uTGlzdGVuZXJzLmZvckVhY2goKGNiKSA9PiBjYihnZXQoKSkpO1xuICAgIGNvbnN0IHBvc3RSZWh5ZHJhdGlvbkNhbGxiYWNrID0gKChfYSA9IG9wdGlvbnMub25SZWh5ZHJhdGVTdG9yYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChvcHRpb25zLCBnZXQoKSkpIHx8IHZvaWQgMDtcbiAgICByZXR1cm4gdG9UaGVuYWJsZShzdG9yYWdlLmdldEl0ZW0uYmluZChzdG9yYWdlKSkob3B0aW9ucy5uYW1lKS50aGVuKChzdG9yYWdlVmFsdWUpID0+IHtcbiAgICAgIGlmIChzdG9yYWdlVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZGVzZXJpYWxpemUoc3RvcmFnZVZhbHVlKTtcbiAgICAgIH1cbiAgICB9KS50aGVuKChkZXNlcmlhbGl6ZWRTdG9yYWdlVmFsdWUpID0+IHtcbiAgICAgIGlmIChkZXNlcmlhbGl6ZWRTdG9yYWdlVmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBkZXNlcmlhbGl6ZWRTdG9yYWdlVmFsdWUudmVyc2lvbiA9PT0gXCJudW1iZXJcIiAmJiBkZXNlcmlhbGl6ZWRTdG9yYWdlVmFsdWUudmVyc2lvbiAhPT0gb3B0aW9ucy52ZXJzaW9uKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbnMubWlncmF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMubWlncmF0ZShkZXNlcmlhbGl6ZWRTdG9yYWdlVmFsdWUuc3RhdGUsIGRlc2VyaWFsaXplZFN0b3JhZ2VWYWx1ZS52ZXJzaW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgU3RhdGUgbG9hZGVkIGZyb20gc3RvcmFnZSBjb3VsZG4ndCBiZSBtaWdyYXRlZCBzaW5jZSBubyBtaWdyYXRlIGZ1bmN0aW9uIHdhcyBwcm92aWRlZGApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZWRTdG9yYWdlVmFsdWUuc3RhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KS50aGVuKChtaWdyYXRlZFN0YXRlKSA9PiB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgc3RhdGVGcm9tU3RvcmFnZSA9IG9wdGlvbnMubWVyZ2UobWlncmF0ZWRTdGF0ZSwgKF9hMiA9IGdldCgpKSAhPSBudWxsID8gX2EyIDogY29uZmlnUmVzdWx0KTtcbiAgICAgIHNldChzdGF0ZUZyb21TdG9yYWdlLCB0cnVlKTtcbiAgICAgIHJldHVybiBzZXRJdGVtKCk7XG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICBwb3N0UmVoeWRyYXRpb25DYWxsYmFjayA9PSBudWxsID8gdm9pZCAwIDogcG9zdFJlaHlkcmF0aW9uQ2FsbGJhY2soc3RhdGVGcm9tU3RvcmFnZSwgdm9pZCAwKTtcbiAgICAgIGhhc0h5ZHJhdGVkID0gdHJ1ZTtcbiAgICAgIGZpbmlzaEh5ZHJhdGlvbkxpc3RlbmVycy5mb3JFYWNoKChjYikgPT4gY2Ioc3RhdGVGcm9tU3RvcmFnZSkpO1xuICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICBwb3N0UmVoeWRyYXRpb25DYWxsYmFjayA9PSBudWxsID8gdm9pZCAwIDogcG9zdFJlaHlkcmF0aW9uQ2FsbGJhY2sodm9pZCAwLCBlKTtcbiAgICB9KTtcbiAgfTtcbiAgYXBpLnBlcnNpc3QgPSB7XG4gICAgc2V0T3B0aW9uczogKG5ld09wdGlvbnMpID0+IHtcbiAgICAgIG9wdGlvbnMgPSBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgb3B0aW9ucyksIG5ld09wdGlvbnMpO1xuICAgICAgaWYgKG5ld09wdGlvbnMuZ2V0U3RvcmFnZSkge1xuICAgICAgICBzdG9yYWdlID0gbmV3T3B0aW9ucy5nZXRTdG9yYWdlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBjbGVhclN0b3JhZ2U6ICgpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIChfYSA9IHN0b3JhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IHN0b3JhZ2UucmVtb3ZlSXRlbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoc3RvcmFnZSwgb3B0aW9ucy5uYW1lKTtcbiAgICB9LFxuICAgIHJlaHlkcmF0ZTogKCkgPT4gaHlkcmF0ZSgpLFxuICAgIGhhc0h5ZHJhdGVkOiAoKSA9PiBoYXNIeWRyYXRlZCxcbiAgICBvbkh5ZHJhdGU6IChjYikgPT4ge1xuICAgICAgaHlkcmF0aW9uTGlzdGVuZXJzLmFkZChjYik7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBoeWRyYXRpb25MaXN0ZW5lcnMuZGVsZXRlKGNiKTtcbiAgICAgIH07XG4gICAgfSxcbiAgICBvbkZpbmlzaEh5ZHJhdGlvbjogKGNiKSA9PiB7XG4gICAgICBmaW5pc2hIeWRyYXRpb25MaXN0ZW5lcnMuYWRkKGNiKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGZpbmlzaEh5ZHJhdGlvbkxpc3RlbmVycy5kZWxldGUoY2IpO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG4gIGh5ZHJhdGUoKTtcbiAgcmV0dXJuIHN0YXRlRnJvbVN0b3JhZ2UgfHwgY29uZmlnUmVzdWx0O1xufTtcblxuZXhwb3J0IHsgY29tYmluZSwgZGV2dG9vbHMsIHBlcnNpc3QsIHJlZHV4LCBzdWJzY3JpYmVXaXRoU2VsZWN0b3IgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/leva/node_modules/zustand/esm/middleware.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/leva/node_modules/zustand/esm/shallow.js":
/*!***************************************************************!*\
  !*** ./node_modules/leva/node_modules/zustand/esm/shallow.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ shallow)\n/* harmony export */ });\nfunction shallow(objA, objB) {\n  if (Object.is(objA, objB)) {\n    return true;\n  }\n  if (typeof objA !== \"object\" || objA === null || typeof objB !== \"object\" || objB === null) {\n    return false;\n  }\n  const keysA = Object.keys(objA);\n  if (keysA.length !== Object.keys(objB).length) {\n    return false;\n  }\n  for (let i = 0; i < keysA.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) || !Object.is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGV2YS9ub2RlX21vZHVsZXMvenVzdGFuZC9lc20vc2hhbGxvdy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU4QiIsInNvdXJjZXMiOlsid2VicGFjazovL2R4dy1haS1sYW5ndWFnZS10ZWFjaGVyLy4vbm9kZV9tb2R1bGVzL2xldmEvbm9kZV9tb2R1bGVzL3p1c3RhbmQvZXNtL3NoYWxsb3cuanM/OWU1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBzaGFsbG93KG9iakEsIG9iakIpIHtcbiAgaWYgKE9iamVjdC5pcyhvYmpBLCBvYmpCKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh0eXBlb2Ygb2JqQSAhPT0gXCJvYmplY3RcIiB8fCBvYmpBID09PSBudWxsIHx8IHR5cGVvZiBvYmpCICE9PSBcIm9iamVjdFwiIHx8IG9iakIgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3Qga2V5c0EgPSBPYmplY3Qua2V5cyhvYmpBKTtcbiAgaWYgKGtleXNBLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMob2JqQikubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5c0EubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmpCLCBrZXlzQVtpXSkgfHwgIU9iamVjdC5pcyhvYmpBW2tleXNBW2ldXSwgb2JqQltrZXlzQVtpXV0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgeyBzaGFsbG93IGFzIGRlZmF1bHQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/leva/node_modules/zustand/esm/shallow.js\n");

/***/ })

};
;